/**
 * @license
 * Lo-Dash 2.4.2 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./dist/lodash.js`
 */
(function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function b(b,c){var d=typeof c;if(b=b.cache,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:r+c;return b=(b=b[d])&&b[e],"object"==d?b&&a(b,c)>-1?0:-1:b?0:-1}function c(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:r+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function f(a){var b=-1,d=a.length,e=a[0],f=a[d/2|0],g=a[d-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;var h=i();h["false"]=h["null"]=h["true"]=h.undefined=!1;var j=i();for(j.array=a,j.cache=h,j.push=c;++b<d;)j.push(a[b]);return j}function g(a){return"\\"+V[a]}function h(){return o.pop()||[]}function i(){return p.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function j(a){a.length=0,o.length<t&&o.push(a)}function k(a){var b=a.cache;b&&k(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,p.length<t&&p.push(a)}function l(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function m(c){function o(a){return a&&"object"==typeof a&&!Zc(a)&&Hc.call(a,"__wrapped__")?a:new p(a)}function p(a,b){this.__chain__=!!b,this.__wrapped__=a}function t(a){function b(){if(d){var a=l(d);Ic.apply(a,arguments)}if(this instanceof b){var f=X(c.prototype),g=c.apply(f,a||arguments);return Ea(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return Yc(b,a),b}function V(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Ea(a);if(!g)return a;var i=Ac.call(a);if(!R[i])return a;var k=Wc[i];switch(i){case K:case L:return new k(+a);case N:case Q:return new k(a);case P:return f=k(a.source,z.exec(a)),f.lastIndex=a.lastIndex,f}var m=Zc(a);if(b){var n=!d;d||(d=h()),e||(e=h());for(var o=d.length;o--;)if(d[o]==a)return e[o];f=m?k(a.length):{}}else f=m?l(a):ed({},a);return m&&(Hc.call(a,"index")&&(f.index=a.index),Hc.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(m?Ya:hd)(a,function(a,g){f[g]=V(a,b,c,d,e)}),n&&(j(d),j(e)),f):f}function X(a,b){return Ea(a)?Nc(a):{}}function Y(a,b,c){if("function"!=typeof a)return Zb;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(Xc.funcNames&&(d=!a.name),d=d||!Xc.funcDecomp,!d)){var e=Fc.call(a);Xc.funcNames||(d=!A.test(e)),d||(d=E.test(e),Yc(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Ib(a,b)}function Z(a){function b(){var a=i?g:this;if(e){var o=l(e);Ic.apply(o,arguments)}if((f||k)&&(o||(o=l(arguments)),f&&Ic.apply(o,f),k&&o.length<h))return d|=16,Z([c,m?d:-4&d,o,null,g,h]);if(o||(o=arguments),j&&(c=a[n]),this instanceof b){a=X(c.prototype);var p=c.apply(a,o);return Ea(p)?p:a}return c.apply(a,o)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,m=8&d,n=c;return Yc(b,a),b}function $(c,d){var e=-1,g=ia(),h=c?c.length:0,i=h>=s&&g===a,j=[];if(i){var l=f(d);l?(g=b,d=l):i=!1}for(;++e<h;){var m=c[e];g(d,m)<0&&j.push(m)}return i&&k(d),j}function aa(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Zc(h)||ma(h))){b||(h=aa(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function ba(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var i=typeof a,k=typeof b;if(!(a!==a||a&&U[i]||b&&U[k]))return!1;if(null==a||null==b)return a===b;var l=Ac.call(a),m=Ac.call(b);if(l==I&&(l=O),m==I&&(m=O),l!=m)return!1;switch(l){case K:case L:return+a==+b;case N:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case P:case Q:return a==vc(b)}var o=l==J;if(!o){var p=Hc.call(a,"__wrapped__"),q=Hc.call(b,"__wrapped__");if(p||q)return ba(p?a.__wrapped__:a,q?b.__wrapped__:b,c,d,e,f);if(l!=O)return!1;var r=a.constructor,s=b.constructor;if(r!=s&&!(Da(r)&&r instanceof r&&Da(s)&&s instanceof s)&&"constructor"in a&&"constructor"in b)return!1}var t=!e;e||(e=h()),f||(f=h());for(var u=e.length;u--;)if(e[u]==a)return f[u]==b;var v=0;if(g=!0,e.push(a),f.push(b),o){if(u=a.length,v=b.length,g=v==u,g||d)for(;v--;){var w=u,x=b[v];if(d)for(;w--&&!(g=ba(a[w],x,c,d,e,f)););else if(!(g=ba(a[v],x,c,d,e,f)))break}}else gd(b,function(b,h,i){return Hc.call(i,h)?(v++,g=Hc.call(a,h)&&ba(a[h],b,c,d,e,f)):n}),g&&!d&&gd(a,function(a,b,c){return Hc.call(c,b)?g=--v>-1:n});return e.pop(),f.pop(),t&&(j(e),j(f)),g}function ca(a,b,c,d,e){(Zc(b)?Ya:hd)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Zc(b))||id(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Zc(j)?j:[]:id(j)?j:{}),d.push(b),e.push(j),l||ca(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function da(a,b){return a+Ec(Vc()*(b-a+1))}function ea(c,d,e){var g=-1,i=ia(),l=c?c.length:0,m=[],n=!d&&l>=s&&i===a,o=e||n?h():m;if(n){var p=f(o);i=b,o=p}for(;++g<l;){var q=c[g],r=e?e(q,g,c):q;(d?!g||o[o.length-1]!==r:i(o,r)<0)&&((e||n)&&o.push(r),m.push(q))}return n?(j(o.array),k(o)):e&&j(o),m}function fa(a){return function(b,c,d){var e={};c=o.createCallback(c,d,3);var f=-1,g=b?b.length:0;if("number"==typeof g)for(;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else hd(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function ga(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=16&b,k=32&b;if(!h&&!Da(a))throw new wc;j&&!c.length&&(b&=-17,j=c=!1),k&&!d.length&&(b&=-33,k=d=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=l(m),m[2]&&(m[2]=l(m[2])),m[3]&&(m[3]=l(m[3])),!g||1&m[1]||(m[4]=e),!g&&1&m[1]&&(b|=8),!i||4&m[1]||(m[5]=f),j&&Ic.apply(m[2]||(m[2]=[]),c),k&&Lc.apply(m[3]||(m[3]=[]),d),m[1]|=b,ga.apply(null,m);var n=1==b||17===b?t:Z;return n([a,b,c,d,e,f])}function ha(a){return ad[a]}function ia(){var b=(b=o.indexOf)===rb?a:b;return b}function ja(a){return"function"==typeof a&&Bc.test(a)}function ka(a){var b,c;return a&&Ac.call(a)==O&&(b=a.constructor,!Da(b)||b instanceof b)?(gd(a,function(a,b){c=b}),"undefined"==typeof c||Hc.call(a,c)):!1}function la(a){return bd[a]}function ma(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ac.call(a)==I||!1}function na(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),V(a,b,"function"==typeof c&&Y(c,d,1))}function oa(a,b,c){return V(a,!0,"function"==typeof b&&Y(b,c,1))}function pa(a,b){var c=X(a);return b?ed(c,b):c}function qa(a,b,c){var d;return b=o.createCallback(b,c,3),hd(a,function(a,c,e){return b(a,c,e)?(d=c,!1):n}),d}function ra(a,b,c){var d;return b=o.createCallback(b,c,3),ta(a,function(a,c,e){return b(a,c,e)?(d=c,!1):n}),d}function sa(a,b,c){var d=[];gd(a,function(a,b){d.push(b,a)});var e=d.length;for(b=Y(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function ta(a,b,c){var d=_c(a),e=d.length;for(b=Y(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function ua(a){var b=[];return gd(a,function(a,c){Da(a)&&b.push(c)}),b.sort()}function va(a,b){return a?Hc.call(a,b):!1}function wa(a){for(var b=-1,c=_c(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function xa(a){return a===!0||a===!1||a&&"object"==typeof a&&Ac.call(a)==K||!1}function ya(a){return a&&"object"==typeof a&&Ac.call(a)==L||!1}function za(a){return a&&1===a.nodeType||!1}function Aa(a){var b=!0;if(!a)return b;var c=Ac.call(a),d=a.length;return c==J||c==Q||c==I||c==O&&"number"==typeof d&&Da(a.splice)?!d:(hd(a,function(){return b=!1}),b)}function Ba(a,b,c,d){return ba(a,b,"function"==typeof c&&Y(c,d,2))}function Ca(a){return Pc(a)&&!Qc(parseFloat(a))}function Da(a){return"function"==typeof a}function Ea(a){return!(!a||!U[typeof a])}function Fa(a){return Ha(a)&&a!=+a}function Ga(a){return null===a}function Ha(a){return"number"==typeof a||a&&"object"==typeof a&&Ac.call(a)==N||!1}function Ia(a){return a&&"object"==typeof a&&Ac.call(a)==P||!1}function Ja(a){return"string"==typeof a||a&&"object"==typeof a&&Ac.call(a)==Q||!1}function Ka(a){return"undefined"==typeof a}function La(a,b,c){var d={};return b=o.createCallback(b,c,3),hd(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Ma(a){var b=arguments,c=2;if(!Ea(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=Y(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=l(arguments,1,c),f=-1,g=h(),i=h();++f<c;)ca(a,e[f],d,g,i);return j(g),j(i),a}function Na(a,b,c){var d={};if("function"!=typeof b){var e=[];gd(a,function(a,b){e.push(b)}),e=$(e,aa(arguments,!0,!1,1));for(var f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=o.createCallback(b,c,3),gd(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d}function Oa(a){for(var b=-1,c=_c(a),d=c.length,e=nc(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Pa(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=aa(arguments,!0,!1,1),g=Ea(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=o.createCallback(b,c,3),gd(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d}function Qa(a,b,c,d){var e=Zc(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor,g=f&&f.prototype;c=X(g)}return b&&(b=o.createCallback(b,d,4),(e?Ya:hd)(a,function(a,d,e){return b(c,a,d,e)})),c}function Ra(a){for(var b=-1,c=_c(a),d=c.length,e=nc(d);++b<d;)e[b]=a[c[b]];return e}function Sa(a){for(var b=arguments,c=-1,d=aa(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=nc(e);++c<e;)f[c]=a[d[c]];return f}function Ta(a,b,c){var d=-1,e=ia(),f=a?a.length:0,g=!1;return c=(0>c?Sc(0,f+c):c)||0,Zc(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Ja(a)?a.indexOf(b,c):e(a,b,c))>-1:hd(a,function(a){return++d<c?n:!(g=a===b)}),g}function Ua(a,b,c){var d=!0;b=o.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else hd(a,function(a,c,e){return d=!!b(a,c,e)});return d}function Va(a,b,c){var d=[];b=o.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else hd(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function Wa(a,b,c){b=o.createCallback(b,c,3);var d=-1,e=a?a.length:0;if("number"!=typeof e){var f;return hd(a,function(a,c,d){return b(a,c,d)?(f=a,!1):n}),f}for(;++d<e;){var g=a[d];if(b(g,d,a))return g}}function Xa(a,b,c){var d;return b=o.createCallback(b,c,3),Za(a,function(a,c,e){return b(a,c,e)?(d=a,!1):n}),d}function Ya(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Y(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else hd(a,b);return a}function Za(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:Y(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=_c(a);d=e.length,hd(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function $a(a,b){var c=l(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=nc("number"==typeof f?f:0);return Ya(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function _a(a,b,c){var d=-1,e=a?a.length:0;if(b=o.createCallback(b,c,3),"number"==typeof e)for(var f=nc(e);++d<e;)f[d]=b(a[d],d,a);else f=[],hd(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function ab(a,b,c){var e=-(1/0),f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zc(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];i>f&&(f=i)}else b=null==b&&Ja(a)?d:o.createCallback(b,c,3),Ya(a,function(a,c,d){var g=b(a,c,d);g>e&&(e=g,f=a)});return f}function bb(a,b,c){var e=1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&Zc(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];f>i&&(f=i)}else b=null==b&&Ja(a)?d:o.createCallback(b,c,3),Ya(a,function(a,c,d){var g=b(a,c,d);e>g&&(e=g,f=a)});return f}function cb(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=o.createCallback(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else hd(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function db(a,b,c,d){var e=arguments.length<3;return b=o.createCallback(b,d,4),Za(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function eb(a,b,c){return b=o.createCallback(b,c,3),Va(a,function(a,c,d){return!b(a,c,d)})}function fb(a,b,c){if(a&&"number"!=typeof a.length&&(a=Ra(a)),null==b||c)return a?a[da(0,a.length-1)]:n;var d=gb(a);return d.length=Tc(Sc(0,b),d.length),d}function gb(a){var b=-1,c=a?a.length:0,d=nc("number"==typeof c?c:0);return Ya(a,function(a){var c=da(0,++b);d[b]=d[c],d[c]=a}),d}function hb(a){var b=a?a.length:0;return"number"==typeof b?b:_c(a).length}function ib(a,b,c){var d;b=o.createCallback(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else hd(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function jb(a,b,c){var d=-1,f=Zc(b),g=a?a.length:0,l=nc("number"==typeof g?g:0);for(f||(b=o.createCallback(b,c,3)),Ya(a,function(a,c,e){var g=l[++d]=i();f?g.criteria=_a(b,function(b){return a[b]}):(g.criteria=h())[0]=b(a,c,e),g.index=d,g.value=a}),g=l.length,l.sort(e);g--;){var m=l[g];l[g]=m.value,f||j(m.criteria),k(m)}return l}function kb(a){return a&&"number"==typeof a.length?l(a):Ra(a)}function lb(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function mb(a){return $(a,aa(arguments,!0,!0,1))}function nb(a,b,c){var d=-1,e=a?a.length:0;for(b=o.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function ob(a,b,c){var d=a?a.length:0;for(b=o.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function pb(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=o.createCallback(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:n;return l(a,0,Tc(Sc(0,d),e))}function qb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=_a(a,c,d)),aa(a,b)}function rb(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Sc(0,e+d):d||0}else if(d){var f=Ab(b,c);return b[f]===c?f:-1}return a(b,c,d)}function sb(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=o.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return l(a,0,Tc(Sc(0,e-d),e))}function tb(){for(var c=[],d=-1,e=arguments.length,g=h(),i=ia(),l=i===a,m=h();++d<e;){var n=arguments[d];(Zc(n)||ma(n))&&(c.push(n),g.push(l&&n.length>=s&&f(d?c[d]:m)))}var o=c[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var t=g[0];if(n=o[p],(t?b(t,n):i(m,n))<0){for(d=e,(t||m).push(n);--d;)if(t=g[d],(t?b(t,n):i(c[d],n))<0)continue a;r.push(n)}}for(;e--;)t=g[e],t&&k(t);return j(g),j(m),r}function ub(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=o.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:n;return l(a,Sc(0,e-d))}function vb(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Sc(0,d+c):Tc(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function wb(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Kc.call(a,f--,1),e--);return a}function xb(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Sc(0,Cc((b-a)/(c||1))),f=nc(e);++d<e;)f[d]=a,a+=c;return f}function yb(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=o.createCallback(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),Kc.call(a,d--,1),e--)}return f}function zb(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=o.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:Sc(0,b);return l(a,d)}function Ab(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?o.createCallback(c,d,1):Zb,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function Bb(){return ea(aa(arguments,!0,!0))}function Cb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=o.createCallback(c,d,3)),ea(a,b,c)}function Db(a){return $(a,l(arguments,1))}function Eb(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Zc(c)||ma(c))var d=d?ea($(d,c).concat($(c,d))):c}return d||[]}function Fb(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?ab(md(a,"length")):0,d=nc(0>c?0:c);++b<c;)d[b]=md(a,b);return d}function Gb(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Zc(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Hb(a,b){if(!Da(b))throw new wc;return function(){return--a<1?b.apply(this,arguments):n}}function Ib(a,b){return arguments.length>2?ga(a,17,l(arguments,2),null,b):ga(a,1,null,null,b)}function Jb(a){for(var b=arguments.length>1?aa(arguments,!0,!1,1):ua(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ga(a[e],1,null,null,a)}return a}function Kb(a,b){return arguments.length>2?ga(b,19,l(arguments,2),null,a):ga(b,3,null,null,a)}function Lb(){for(var a=arguments,b=a.length;b--;)if(!Da(a[b]))throw new wc;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Mb(a,b){return b="number"==typeof b?b:+b||a.length,ga(a,4,null,null,null,b)}function Nb(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Da(a))throw new wc;if(b=Sc(0,b)||0,c===!0){var o=!0;m=!1}else Ea(c)&&(o=c.leading,l="maxWait"in c&&(Sc(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var p=function(){var c=b-(od()-g);if(c>0)i=Jc(p,c);else{e&&Dc(e);var l=j;e=i=j=n,l&&(k=od(),f=a.apply(h,d),i||e||(d=h=null))}},q=function(){i&&Dc(i),e=i=j=n,(m||l!==b)&&(k=od(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=od(),h=this,j=m&&(i||!o),l===!1)var c=o&&!i;else{e||o||(k=g);var n=l-(g-k),r=0>=n;r?(e&&(e=Dc(e)),k=g,f=a.apply(h,d)):e||(e=Jc(q,n))}return r&&i?i=Dc(i):i||b===l||(i=Jc(p,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Ob(a){if(!Da(a))throw new wc;var b=l(arguments,1);return Jc(function(){a.apply(n,b)},1)}function Pb(a,b){if(!Da(a))throw new wc;var c=l(arguments,2);return Jc(function(){a.apply(n,c)},b)}function Qb(a,b){if(!Da(a))throw new wc;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):r+arguments[0];return Hc.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Rb(a){var b,c;if(!Da(a))throw new wc;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Sb(a){return ga(a,16,l(arguments,1))}function Tb(a){return ga(a,32,null,l(arguments,1))}function Ub(a,b,c){var d=!0,e=!0;if(!Da(a))throw new wc;return c===!1?d=!1:Ea(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),S.leading=d,S.maxWait=b,S.trailing=e,Nb(a,b,S)}function Vb(a,b){return ga(b,16,[a])}function Wb(a){return function(){return a}}function Xb(a,b,c){var d=typeof a;if(null==a||"function"==d)return Y(a,b,c);if("object"!=d)return bc(a);var e=_c(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Ea(g)?function(b){for(var c=e.length,d=!1;c--&&(d=ba(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Yb(a){return null==a?"":vc(a).replace(dd,ha)}function Zb(a){return a}function $b(a,b,c){var d=!0,e=b&&ua(b);b&&(c||e.length)||(null==c&&(c=b),f=p,b=a,a=o,e=ua(b)),c===!1?d=!1:Ea(c)&&"chain"in c&&(d=c.chain);var f=a,g=Da(f);Ya(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];Ic.apply(g,arguments);var h=e.apply(a,g);if(d||b){if(c===h&&Ea(h))return this;h=new f(h),h.__chain__=b}return h})})}function _b(){return c._=zc,this}function ac(){}function bc(a){return function(b){return b[a]}}function cc(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=Vc();return Tc(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return da(a,b)}function dc(a,b){if(a){var c=a[b];return Da(c)?a[b]():c}}function ec(a,b,c){var d=o.templateSettings;a=vc(a||""),c=fd({},c,d);var e,f=fd({},c.imports,d.imports),h=_c(f),i=Ra(f),j=0,k=c.interpolate||D,l="__p += '",m=uc((c.escape||D).source+"|"+k.source+"|"+(k===B?y:D).source+"|"+(c.evaluate||D).source+"|$","g");a.replace(m,function(b,c,d,f,h,i){return d||(d=f),l+=a.slice(j,i).replace(F,g),c&&(l+="' +\n__e("+c+") +\n'"),h&&(e=!0,l+="';\n"+h+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=i+b.length,b}),l+="';\n";var p=c.variable,q=p;q||(p="obj",l="with ("+p+") {\n"+l+"\n}\n"),l=(e?l.replace(v,""):l).replace(w,"$1").replace(x,"$1;"),l="function("+p+") {\n"+(q?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(e?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var r="\n/*\n//# sourceURL="+(c.sourceURL||"/lodash/template/source["+H++ +"]")+"\n*/";try{var s=qc(h,"return "+l+r).apply(n,i)}catch(t){throw t.source=l,t}return b?s(b):(s.source=l,s)}function fc(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=nc(a);for(b=Y(b,c,1);++d<a;)e[d]=b(d);return e}function gc(a){return null==a?"":vc(a).replace(cd,la)}function hc(a){var b=++q;return vc(null==a?"":a)+b}function ic(a){return a=new p(a),a.__chain__=!0,a}function jc(a,b){return b(a),a}function kc(){return this.__chain__=!0,this}function lc(){return vc(this.__wrapped__)}function mc(){return this.__wrapped__}c=c?_.defaults(W.Object(),c,_.pick(W,G)):W;var nc=c.Array,oc=c.Boolean,pc=c.Date,qc=c.Function,rc=c.Math,sc=c.Number,tc=c.Object,uc=c.RegExp,vc=c.String,wc=c.TypeError,xc=[],yc=tc.prototype,zc=c._,Ac=yc.toString,Bc=uc("^"+vc(Ac).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Cc=rc.ceil,Dc=c.clearTimeout,Ec=rc.floor,Fc=qc.prototype.toString,Gc=ja(Gc=tc.getPrototypeOf)&&Gc,Hc=yc.hasOwnProperty,Ic=xc.push,Jc=c.setTimeout,Kc=xc.splice,Lc=xc.unshift,Mc=function(){try{var a={},b=ja(b=tc.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Nc=ja(Nc=tc.create)&&Nc,Oc=ja(Oc=nc.isArray)&&Oc,Pc=c.isFinite,Qc=c.isNaN,Rc=ja(Rc=tc.keys)&&Rc,Sc=rc.max,Tc=rc.min,Uc=c.parseInt,Vc=rc.random,Wc={};Wc[J]=nc,Wc[K]=oc,Wc[L]=pc,Wc[M]=qc,Wc[O]=tc,Wc[N]=sc,Wc[P]=uc,Wc[Q]=vc,p.prototype=o.prototype;var Xc=o.support={};Xc.funcDecomp=!ja(c.WinRTError)&&E.test(m),Xc.funcNames="string"==typeof qc.name,o.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:B,variable:"",imports:{_:o}},Nc||(X=function(){function a(){}return function(b){if(Ea(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}());var Yc=Mc?function(a,b){T.value=b,Mc(a,"__bindData__",T),T.value=null}:ac,Zc=Oc||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ac.call(a)==J||!1},$c=function(a){var b,c=a,d=[];if(!c)return d;if(!U[typeof a])return d;for(b in c)Hc.call(c,b)&&d.push(b);return d},_c=Rc?function(a){return Ea(a)?Rc(a):[]}:$c,ad={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bd=wa(ad),cd=uc("("+_c(bd).join("|")+")","g"),dd=uc("["+_c(ad).join("")+"]","g"),ed=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=Y(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&U[typeof e])for(var k=-1,l=U[typeof e]&&_c(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},fd=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&U[typeof e])for(var j=-1,k=U[typeof e]&&_c(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f},gd=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!U[typeof e])return f;b=b&&"undefined"==typeof c?b:Y(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},hd=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!U[typeof e])return f;b=b&&"undefined"==typeof c?b:Y(b,c,3);for(var g=-1,h=U[typeof e]&&_c(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},id=Gc?function(a){if(!a||Ac.call(a)!=O)return!1;var b=a.valueOf,c=ja(b)&&(c=Gc(b))&&Gc(c);return c?a==c||Gc(a)==c:ka(a)}:ka,jd=fa(function(a,b,c){Hc.call(a,c)?a[c]++:a[c]=1}),kd=fa(function(a,b,c){(Hc.call(a,c)?a[c]:a[c]=[]).push(b)}),ld=fa(function(a,b,c){a[c]=b}),md=_a,nd=Va,od=ja(od=pc.now)&&od||function(){return(new pc).getTime()},pd=8==Uc(u+"08")?Uc:function(a,b){return Uc(Ja(a)?a.replace(C,""):a,b||0)};return o.after=Hb,o.assign=ed,o.at=Sa,o.bind=Ib,o.bindAll=Jb,o.bindKey=Kb,o.chain=ic,o.compact=lb,o.compose=Lb,o.constant=Wb,o.countBy=jd,o.create=pa,o.createCallback=Xb,o.curry=Mb,o.debounce=Nb,o.defaults=fd,o.defer=Ob,o.delay=Pb,o.difference=mb,o.filter=Va,o.flatten=qb,o.forEach=Ya,o.forEachRight=Za,o.forIn=gd,o.forInRight=sa,o.forOwn=hd,o.forOwnRight=ta,o.functions=ua,o.groupBy=kd,o.indexBy=ld,o.initial=sb,o.intersection=tb,o.invert=wa,o.invoke=$a,o.keys=_c,o.map=_a,o.mapValues=La,o.max=ab,o.memoize=Qb,o.merge=Ma,o.min=bb,o.omit=Na,o.once=Rb,o.pairs=Oa,o.partial=Sb,o.partialRight=Tb,o.pick=Pa,o.pluck=md,o.property=bc,o.pull=wb,o.range=xb,o.reject=eb,o.remove=yb,o.rest=zb,o.shuffle=gb,o.sortBy=jb,o.tap=jc,o.throttle=Ub,o.times=fc,o.toArray=kb,o.transform=Qa,o.union=Bb,o.uniq=Cb,o.values=Ra,o.where=nd,o.without=Db,o.wrap=Vb,o.xor=Eb,o.zip=Fb,o.zipObject=Gb,o.collect=_a,o.drop=zb,o.each=Ya,o.eachRight=Za,o.extend=ed,o.methods=ua,o.object=Gb,o.select=Va,o.tail=zb,o.unique=Cb,o.unzip=Fb,$b(o),o.clone=na,o.cloneDeep=oa,o.contains=Ta,o.escape=Yb,o.every=Ua,o.find=Wa,o.findIndex=nb,o.findKey=qa,o.findLast=Xa,o.findLastIndex=ob,o.findLastKey=ra,o.has=va,o.identity=Zb,o.indexOf=rb,o.isArguments=ma,o.isArray=Zc,o.isBoolean=xa,o.isDate=ya,o.isElement=za,o.isEmpty=Aa,o.isEqual=Ba,o.isFinite=Ca,o.isFunction=Da,o.isNaN=Fa,o.isNull=Ga,o.isNumber=Ha,o.isObject=Ea,o.isPlainObject=id,o.isRegExp=Ia,o.isString=Ja,o.isUndefined=Ka,o.lastIndexOf=vb,o.mixin=$b,o.noConflict=_b,o.noop=ac,o.now=od,o.parseInt=pd,o.random=cc,o.reduce=cb,o.reduceRight=db,o.result=dc,o.runInContext=m,o.size=hb,o.some=ib,o.sortedIndex=Ab,o.template=ec,o.unescape=gc,o.uniqueId=hc,o.all=Ua,o.any=ib,o.detect=Wa,o.findWhere=Wa,o.foldl=cb,o.foldr=db,o.include=Ta,o.inject=cb,$b(function(){var a={};return hd(o,function(b,c){o.prototype[c]||(a[c]=b)}),a}(),!1),o.first=pb,o.last=ub,o.sample=fb,o.take=pb,o.head=pb,hd(o,function(a,b){var c="sample"!==b;o.prototype[b]||(o.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new p(f,e):f})}),o.VERSION="2.4.2",o.prototype.chain=kc,o.prototype.toString=lc,o.prototype.value=mc,o.prototype.valueOf=mc,Ya(["join","pop","shift"],function(a){var b=xc[a];o.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new p(c,a):c}}),Ya(["push","reverse","sort","unshift"],function(a){var b=xc[a];o.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Ya(["concat","slice","splice"],function(a){var b=xc[a];o.prototype[a]=function(){return new p(b.apply(this.__wrapped__,arguments),this.__chain__)}}),o}var n,o=[],p=[],q=0,r=+new Date+"",s=75,t=40,u=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",v=/\b__p \+= '';/g,w=/\b(__p \+=) '' \+/g,x=/(__e\(.*?\)|\b__t\)) \+\n'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,z=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,B=/<%=([\s\S]+?)%>/g,C=RegExp("^["+u+"]*0+(?=.$)"),D=/($^)/,E=/\bthis\b/,F=/['\n\r\t\u2028\u2029\\]/g,G=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],H=0,I="[object Arguments]",J="[object Array]",K="[object Boolean]",L="[object Date]",M="[object Function]",N="[object Number]",O="[object Object]",P="[object RegExp]",Q="[object String]",R={};R[M]=!1,R[I]=R[J]=R[K]=R[L]=R[N]=R[O]=R[P]=R[Q]=!0;var S={leading:!1,maxWait:0,trailing:!1},T={configurable:!1,enumerable:!1,value:null,writable:!1},U={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},V={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},W=U[typeof window]&&window||this,X=U[typeof exports]&&exports&&!exports.nodeType&&exports,Y=U[typeof module]&&module&&!module.nodeType&&module,Z=Y&&Y.exports===X&&X,$=U[typeof global]&&global;!$||$.global!==$&&$.window!==$||(W=$);var _=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(W._=_,define(function(){return _})):X&&Y?Z?(Y.exports=_)._=_:X._=_:W._=_}).call(this),//     Backbone.js 1.3.3
//     (c) 2010-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org
function(a){
// Establish the root object, `window` (`self`) in the browser, or `global` on the server.
// We use `self` instead of `window` for `WebWorker` support.
var b="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;
// Set up Backbone appropriately for the environment. Start with AMD.
if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){b.Backbone=a(b,e,c,d)});else if("undefined"!=typeof exports){var c,d=require("underscore");try{c=require("jquery")}catch(e){}a(b,exports,d,c)}else b.Backbone=a(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)}(function(a,b,c,d){var e=a.Backbone,f=Array.prototype.slice;b.VERSION="1.3.3",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var g=function(a,b,d){switch(a){case 1:return function(){return c[b](this[d])};case 2:return function(a){return c[b](this[d],a)};case 3:return function(a,e){return c[b](this[d],i(a,this),e)};case 4:return function(a,e,f){return c[b](this[d],i(a,this),e,f)};default:return function(){var a=f.call(arguments);return a.unshift(this[d]),c[b].apply(c,a)}}},h=function(a,b,d){c.each(b,function(b,e){c[e]&&(a.prototype[e]=g(b,e,d))})},i=function(a,b){return c.isFunction(a)?a:c.isObject(a)&&!b._isModel(a)?j(a):c.isString(a)?function(b){return b.get(a)}:a},j=function(a){var b=c.matches(a);return function(a){return b(a.attributes)}},k=b.Events={},l=/\s+/,m=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d){void 0!==e&&"context"in f&&void 0===f.context&&(f.context=e);for(g=c.keys(d);h<g.length;h++)b=m(a,b,g[h],d[g[h]],f)}else if(d&&l.test(d))for(g=d.split(l);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};k.on=function(a,b,c){return n(this,a,b,c)};var n=function(a,b,c,d,e){if(a._events=m(o,a._events||{},b,c,{context:d,ctx:a,listening:e}),e){var f=a._listeners||(a._listeners={});f[e.id]=e}return a};k.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),g=f[e];if(!g){var h=this._listenId||(this._listenId=c.uniqueId("l"));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0}}return n(a,b,d,this,g),this};var o=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a};k.off=function(a,b,c){return this._events?(this._events=m(p,this._events,a,b,{context:c,listeners:this._listeners}),this):this},k.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this)}return this};var p=function(a,b,d,e){if(a){var f,g=0,h=e.context,i=e.listeners;if(b||d||h){for(var j=b?[b]:c.keys(a);g<j.length;g++){b=j[g];var k=a[b];if(!k)break;for(var l=[],m=0;m<k.length;m++){var n=k[m];d&&d!==n.callback&&d!==n.callback._callback||h&&h!==n.context?l.push(n):(f=n.listening,f&&0===--f.count&&(delete i[f.id],delete f.listeningTo[f.objId]))}l.length?a[b]=l:delete a[b]}return a}for(var o=c.keys(i);g<o.length;g++)f=i[o[g]],delete i[f.id],delete f.listeningTo[f.objId]}};k.once=function(a,b,d){var e=m(q,{},a,b,c.bind(this.off,this));return"string"==typeof a&&null==d&&(b=void 0),this.on(e,b,d)},k.listenToOnce=function(a,b,d){var e=m(q,{},b,d,c.bind(this.stopListening,this,a));return this.listenTo(a,e)};var q=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};k.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;b>d;d++)c[d]=arguments[d+1];return m(r,this._events,a,void 0,c),this};var r=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&s(e,d),f&&s(f,[b].concat(d))}return a},s=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}};k.bind=k.on,k.unbind=k.off,c.extend(b,k);var t=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{});var e=c.result(this,"defaults");d=c.defaults(c.extend({},e,d),e),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(t.prototype,k,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){if(null==a)return this;var e;if("object"==typeof a?(e=a,d=b):(e={})[a]=b,d||(d={}),!this._validate(e,d))return!1;var f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=c.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;for(var m in e)b=e[m],c.isEqual(j[m],b)||h.push(m),c.isEqual(l[m],b)?delete k[m]:k[m]=b,f?delete j[m]:j[m]=b;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!g){h.length&&(this._pending=d);for(var n=0;n<h.length;n++)this.trigger("change:"+h[n],this,j[h[n]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b=this._changing?this._previousAttributes:this.attributes,d={};for(var e in a){var f=a[e];c.isEqual(b[e],f)||(d[e]=f)}return c.size(d)?d:!1},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=c.extend({parse:!0},a);var b=this,d=a.success;return a.success=function(c){var e=a.parse?b.parse(c,a):c;return b.set(e,a)?(d&&d.call(a.context,b,c,a),void b.trigger("sync",b,c,a)):!1},P(this,a),this.sync("read",this,a)},save:function(a,b,d){var e;null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0,parse:!0},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;return f&&(b=c.extend({},e,b)),b&&!g.set(b,d)?!1:(h&&h.call(d.context,g,a,d),void g.trigger("sync",g,a,d))},P(this,d),e&&f&&(this.attributes=c.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(P(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||O();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend({},a,{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var u={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(t,u,"attributes");var v=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},y=function(a,b,c){c=Math.min(Math.max(c,0),a.length);var d,e=Array(a.length-c),f=b.length;for(d=0;d<e.length;d++)e[d]=a[d+c];for(d=0;f>d;d++)a[d+c]=b[d];for(d=0;d<e.length;d++)a[d+f+c]=e[d]};c.extend(v.prototype,k,{model:t,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,x))},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:a.slice();var e=this._removeModels(a,b);return!b.silent&&e.length&&(b.changes={added:[],merged:[],removed:e},this.trigger("update",this,b)),d?e[0]:e},set:function(a,b){if(null!=a){b=c.extend({},w,b),b.parse&&!this._isModel(a)&&(a=this.parse(a,b)||[]);var d=!c.isArray(a);a=d?[a]:a.slice();var e=b.at;null!=e&&(e=+e),e>this.length&&(e=this.length),0>e&&(e+=this.length+1);var f,g,h=[],i=[],j=[],k=[],l={},m=b.add,n=b.merge,o=b.remove,p=!1,q=this.comparator&&null==e&&b.sort!==!1,r=c.isString(this.comparator)?this.comparator:null;for(g=0;g<a.length;g++){f=a[g];var s=this.get(f);if(s){if(n&&f!==s){var t=this._isModel(f)?f.attributes:f;b.parse&&(t=s.parse(t,b)),s.set(t,b),j.push(s),q&&!p&&(p=s.hasChanged(r))}l[s.cid]||(l[s.cid]=!0,h.push(s)),a[g]=s}else m&&(f=a[g]=this._prepareModel(f,b),f&&(i.push(f),this._addReference(f,b),l[f.cid]=!0,h.push(f)))}if(o){for(g=0;g<this.length;g++)f=this.models[g],l[f.cid]||k.push(f);k.length&&this._removeModels(k,b)}var u=!1,v=!q&&m&&o;if(h.length&&v?(u=this.length!==h.length||c.some(this.models,function(a,b){return a!==h[b]}),this.models.length=0,y(this.models,h,0),this.length=this.models.length):i.length&&(q&&(p=!0),y(this.models,i,null==e?this.length:e),this.length=this.models.length),p&&this.sort({silent:!0}),!b.silent){for(g=0;g<i.length;g++)null!=e&&(b.index=e+g),f=i[g],f.trigger("add",f,this,b);(p||u)&&this.trigger("sort",this,b),(i.length||k.length||j.length)&&(b.changes={added:i,removed:k,merged:j},this.trigger("update",this,b))}return d?a[0]:a}},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return f.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[this.modelId(a.attributes||a)]||a.cid&&this._byId[a.cid]},has:function(a){return null!=this.get(a)},at:function(a){return 0>a&&(a+=this.length),this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var b=this.comparator;if(!b)throw new Error("Cannot sort a set without a comparator");a||(a={});var d=b.length;return c.isFunction(b)&&(b=c.bind(b,this)),1===d||c.isString(b)?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return this.map(a+"")},fetch:function(a){a=c.extend({parse:!0},a);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},P(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;if(a=this._prepareModel(a,b),!a)return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,delete this._byId[e.cid];var g=this.modelId(e.attributes);null!=g&&delete this._byId[g],b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return c},_isModel:function(a){return a instanceof t},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(b){if(("add"===a||"remove"===a)&&c!==this)return;if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}}this.trigger.apply(this,arguments)}});var z={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};h(v,z,"models");var A=b.View=function(a){this.cid=c.uniqueId("view"),c.extend(this,c.pick(a,C)),this._ensureElement(),this.initialize.apply(this,arguments)},B=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];c.extend(A.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=c.result(this,"events")),!a)return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[d]),d){var e=b.match(B);this.delegate(e[1],e[2],c.bind(d,this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),b.sync=function(a,d,e){var f=D[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||O()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var E=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,H=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(E.prototype,k,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g,d)!==!1&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(I,"\\$&").replace(F,"(?:$1)?").replace(G,function(a,b){return b?a:"([^/?]+)"}).replace(H,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var J=b.History=function(){this.handlers=[],this.checkUrl=c.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},K=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,M=/#.*$/;J.started=!1,c.extend(J.prototype,k,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.getSearch()},matchRoot:function(){var a=this.decodeFragment(this.location.pathname),b=a.slice(0,this.root.length-1)+"/";return b===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(K,"")},start:function(a){if(J.started)throw new Error("Backbone.history has already been started");if(J.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(L,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};return this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),J.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return this.matchRoot()?(a=this.fragment=this.getFragment(a),c.some(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})):!1},navigate:function(a,b){if(!J.started)return!1;b&&b!==!0||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;(""===a||"?"===a.charAt(0))&&(c=c.slice(0,-1)||"/");var d=c+a;if(a=this.decodeFragment(a.replace(M,"")),this.fragment!==a){if(this.fragment=a,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var e=this.iframe.contentWindow;b.replace||(e.document.open(),e.document.close()),this._updateHash(e.location,a,b.replace)}}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new J;var N=function(a,b){var d,e=this;return d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b),d.prototype=c.create(e.prototype,a),d.prototype.constructor=d,d.__super__=e.prototype,d};t.extend=v.extend=E.extend=A.extend=J.extend=N;var O=function(){throw new Error('A "url" property or function must be specified')},P=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return md.apply(null,arguments)}function b(a){md=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function e(a){var b;for(b in a)return!1;return!0}function f(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function g(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function i(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);return h(b,"toString")&&(a.toString=b.toString),h(b,"valueOf")&&(a.valueOf=b.valueOf),a}function j(a,b,c,d){return qb(a,b,c,d,!0).utc()}function k(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function l(a){return null==a._pf&&(a._pf=k()),a._pf}function m(a){if(null==a._isValid){var b=l(a),c=nd.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function n(a){var b=j(NaN);return null!=a?i(l(b),a):l(b).userInvalidated=!0,b}function o(a){return void 0===a}function p(a,b){var c,d,e;if(o(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),o(b._i)||(a._i=b._i),o(b._f)||(a._f=b._f),o(b._l)||(a._l=b._l),o(b._strict)||(a._strict=b._strict),o(b._tzm)||(a._tzm=b._tzm),o(b._isUTC)||(a._isUTC=b._isUTC),o(b._offset)||(a._offset=b._offset),o(b._pf)||(a._pf=l(b)),o(b._locale)||(a._locale=b._locale),od.length>0)for(c in od)d=od[c],e=b[d],o(e)||(a[d]=e);return a}function q(b){p(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),pd===!1&&(pd=!0,a.updateOffset(this),pd=!1)}function r(a){return a instanceof q||null!=a&&null!=a._isAMomentObject}function s(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function t(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=s(b)),c}function u(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&t(a[d])!==t(b[d]))&&g++;return g+f}function v(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function w(b,c){var d=!0;return i(function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,b),d){for(var e,f=[],g=0;g<arguments.length;g++){if(e="","object"==typeof arguments[g]){e+="\n["+g+"] ";for(var h in arguments[0])e+=h+": "+arguments[0][h]+", ";e=e.slice(0,-2)}else e=arguments[g];f.push(e)}v(b+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+(new Error).stack),d=!1}return c.apply(this,arguments)},c)}function x(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),qd[b]||(v(c),qd[b]=!0)}function y(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function z(a){var b,c;for(c in a)b=a[c],y(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function A(a,b){var c,e=i({},a);for(c in b)h(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},i(e[c],a[c]),i(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)h(a,c)&&!h(b,c)&&d(a[c])&&(e[c]=i({},e[c]));return e}function B(a){null!=a&&this.set(a)}function C(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return y(d)?d.call(b,c):d}function D(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function E(){return this._invalidDate}function F(a){return this._ordinal.replace("%d",a)}function G(a,b,c,d){var e=this._relativeTime[c];return y(e)?e(a,b,c,d):e.replace(/%d/i,a)}function H(a,b){var c=this._relativeTime[a>0?"future":"past"];return y(c)?c(b):c.replace(/%s/i,b)}function I(a,b){var c=a.toLowerCase();zd[c]=zd[c+"s"]=zd[b]=a}function J(a){return"string"==typeof a?zd[a]||zd[a.toLowerCase()]:void 0}function K(a){var b,c,d={};for(c in a)h(a,c)&&(b=J(c),b&&(d[b]=a[c]));return d}function L(a,b){Ad[a]=b}function M(a){var b=[];for(var c in a)b.push({unit:c,priority:Ad[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function N(b,c){return function(d){return null!=d?(P(this,b,d),a.updateOffset(this,c),this):O(this,b)}}function O(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function P(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function Q(a){return a=J(a),y(this[a])?this[a]():this}function R(a,b){if("object"==typeof a){a=K(a);for(var c=M(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=J(a),y(this[a]))return this[a](b);return this}function S(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function T(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Ed[a]=e),b&&(Ed[b[0]]=function(){return S(e.apply(this,arguments),b[1],b[2])}),c&&(Ed[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function U(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function V(a){var b,c,d=a.match(Bd);for(b=0,c=d.length;c>b;b++)Ed[d[b]]?d[b]=Ed[d[b]]:d[b]=U(d[b]);return function(b){var e,f="";for(e=0;c>e;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}function W(a,b){return a.isValid()?(b=X(b,a.localeData()),Dd[b]=Dd[b]||V(b),Dd[b](a)):a.localeData().invalidDate()}function X(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Cd.lastIndex=0;d>=0&&Cd.test(a);)a=a.replace(Cd,c),Cd.lastIndex=0,d-=1;return a}function Y(a,b,c){Wd[a]=y(b)?b:function(a,d){return a&&c?c:b}}function Z(a,b){return h(Wd,a)?Wd[a](b._strict,b._locale):new RegExp($(a))}function $(a){return _(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function _(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function aa(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=t(a)}),c=0;c<a.length;c++)Xd[a[c]]=d}function ba(a,b){aa(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function ca(a,b,c){null!=b&&h(Xd,a)&&Xd[a](b,c._a,c,a)}function da(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ea(a,b){return a?c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||fe).test(b)?"format":"standalone"][a.month()]:this._months}function fa(a,b){return a?c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[fe.test(b)?"format":"standalone"][a.month()]:this._monthsShort}function ga(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)f=j([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=sd.call(this._shortMonthsParse,g),-1!==e?e:null):(e=sd.call(this._longMonthsParse,g),-1!==e?e:null):"MMM"===b?(e=sd.call(this._shortMonthsParse,g),-1!==e?e:(e=sd.call(this._longMonthsParse,g),-1!==e?e:null)):(e=sd.call(this._longMonthsParse,g),-1!==e?e:(e=sd.call(this._shortMonthsParse,g),-1!==e?e:null))}function ha(a,b,c){var d,e,f;if(this._monthsParseExact)return ga.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=j([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function ia(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=t(b);else if(b=a.localeData().monthsParse(b),"number"!=typeof b)return a;return c=Math.min(a.date(),da(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ja(b){return null!=b?(ia(this,b),a.updateOffset(this,!0),this):O(this,"Month")}function ka(){return da(this.year(),this.month())}function la(a){return this._monthsParseExact?(h(this,"_monthsRegex")||na.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(h(this,"_monthsShortRegex")||(this._monthsShortRegex=ie),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function ma(a){return this._monthsParseExact?(h(this,"_monthsRegex")||na.call(this),a?this._monthsStrictRegex:this._monthsRegex):(h(this,"_monthsRegex")||(this._monthsRegex=je),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function na(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=j([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=_(d[b]),e[b]=_(e[b]);for(b=0;24>b;b++)f[b]=_(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),
this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function oa(a){return pa(a)?366:365}function pa(a){return a%4===0&&a%100!==0||a%400===0}function qa(){return pa(this.year())}function ra(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function sa(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function ta(a,b,c){var d=7+b-c,e=(7+sa(a,0,d).getUTCDay()-b)%7;return-e+d-1}function ua(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ta(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=oa(f)+j):j>oa(a)?(f=a+1,g=j-oa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function va(a,b,c){var d,e,f=ta(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+wa(e,b,c)):g>wa(a.year(),b,c)?(d=g-wa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function wa(a,b,c){var d=ta(a,b,c),e=ta(a+1,b,c);return(oa(a)-d+e)/7}function xa(a){return va(a,this._week.dow,this._week.doy).week}function ya(){return this._week.dow}function za(){return this._week.doy}function Aa(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ba(a){var b=va(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Ca(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Da(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Ea(a,b){return a?c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:this._weekdays}function Fa(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort}function Ga(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin}function Ha(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)f=j([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=sd.call(this._weekdaysParse,g),-1!==e?e:null):"ddd"===b?(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:null):(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null):"dddd"===b?(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null))):"ddd"===b?(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:null))):(e=sd.call(this._minWeekdaysParse,g),-1!==e?e:(e=sd.call(this._weekdaysParse,g),-1!==e?e:(e=sd.call(this._shortWeekdaysParse,g),-1!==e?e:null)))}function Ia(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ha.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=j([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function Ja(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Ca(a,this.localeData()),this.add(a-b,"d")):b}function Ka(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function La(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=Da(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Ma(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(h(this,"_weekdaysRegex")||(this._weekdaysRegex=pe),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Na(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(h(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Oa(a){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||Pa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(h(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=re),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Pa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],k=[];for(b=0;7>b;b++)c=j([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),k.push(d),k.push(e),k.push(f);for(g.sort(a),h.sort(a),i.sort(a),k.sort(a),b=0;7>b;b++)h[b]=_(h[b]),i[b]=_(i[b]),k[b]=_(k[b]);this._weekdaysRegex=new RegExp("^("+k.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Qa(){return this.hours()%12||12}function Ra(){return this.hours()||24}function Sa(a,b){T(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Ta(a,b){return b._meridiemParse}function Ua(a){return"p"===(a+"").toLowerCase().charAt(0)}function Va(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wa(a){return a?a.toLowerCase().replace("_","-"):a}function Xa(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Wa(a[f]).split("-"),b=e.length,c=Wa(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=Ya(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&u(e,c,!0)>=b-1)break;b--}f++}return null}function Ya(a){var b=null;if(!we[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=se._abbr,require("./locale/"+a),Za(b)}catch(c){}return we[a]}function Za(a,b){var c;return a&&(c=o(b)?ab(a):$a(a,b),c&&(se=c)),se._abbr}function $a(a,b){if(null!==b){var c=ve;return b.abbr=a,null!=we[a]?(x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=we[a]._config):null!=b.parentLocale&&(null!=we[b.parentLocale]?c=we[b.parentLocale]._config:x("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),we[a]=new B(A(c,b)),Za(a),we[a]}return delete we[a],null}function _a(a,b){if(null!=b){var c,d=ve;null!=we[a]&&(d=we[a]._config),b=A(d,b),c=new B(b),c.parentLocale=we[a],we[a]=c,Za(a)}else null!=we[a]&&(null!=we[a].parentLocale?we[a]=we[a].parentLocale:null!=we[a]&&delete we[a]);return we[a]}function ab(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return se;if(!c(a)){if(b=Ya(a))return b;a=[a]}return Xa(a)}function bb(){return rd(we)}function cb(a){var b,c=a._a;return c&&-2===l(a).overflow&&(b=c[Zd]<0||c[Zd]>11?Zd:c[$d]<1||c[$d]>da(c[Yd],c[Zd])?$d:c[_d]<0||c[_d]>24||24===c[_d]&&(0!==c[ae]||0!==c[be]||0!==c[ce])?_d:c[ae]<0||c[ae]>59?ae:c[be]<0||c[be]>59?be:c[ce]<0||c[ce]>999?ce:-1,l(a)._overflowDayOfYear&&(Yd>b||b>$d)&&(b=$d),l(a)._overflowWeeks&&-1===b&&(b=de),l(a)._overflowWeekday&&-1===b&&(b=ee),l(a).overflow=b),a}function db(a){var b,c,d,e,f,g,h=a._i,i=xe.exec(h)||ye.exec(h);if(i){for(l(a).iso=!0,b=0,c=Ae.length;c>b;b++)if(Ae[b][1].exec(i[1])){e=Ae[b][0],d=Ae[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Be.length;c>b;b++)if(Be[b][1].exec(i[3])){f=(i[2]||" ")+Be[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!ze.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),jb(a)}else a._isValid=!1}function eb(b){var c=Ce.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(db(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function fb(a,b,c){return null!=a?a:null!=b?b:c}function gb(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function hb(a){var b,c,d,e,f=[];if(!a._d){for(d=gb(a),a._w&&null==a._a[$d]&&null==a._a[Zd]&&ib(a),a._dayOfYear&&(e=fb(a._a[Yd],d[Yd]),a._dayOfYear>oa(e)&&(l(a)._overflowDayOfYear=!0),c=sa(e,0,a._dayOfYear),a._a[Zd]=c.getUTCMonth(),a._a[$d]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[_d]&&0===a._a[ae]&&0===a._a[be]&&0===a._a[ce]&&(a._nextDay=!0,a._a[_d]=0),a._d=(a._useUTC?sa:ra).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[_d]=24)}}function ib(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=fb(b.GG,a._a[Yd],va(rb(),1,4).year),d=fb(b.W,1),e=fb(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=fb(b.gg,a._a[Yd],va(rb(),f,g).year),d=fb(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>wa(c,f,g)?l(a)._overflowWeeks=!0:null!=i?l(a)._overflowWeekday=!0:(h=ua(c,d,e,f,g),a._a[Yd]=h.year,a._dayOfYear=h.dayOfYear)}function jb(b){if(b._f===a.ISO_8601)return void db(b);b._a=[],l(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=X(b._f,b._locale).match(Bd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(Z(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&l(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Ed[f]?(d?l(b).empty=!1:l(b).unusedTokens.push(f),ca(f,d,b)):b._strict&&!d&&l(b).unusedTokens.push(f);l(b).charsLeftOver=i-j,h.length>0&&l(b).unusedInput.push(h),b._a[_d]<=12&&l(b).bigHour===!0&&b._a[_d]>0&&(l(b).bigHour=void 0),l(b).parsedDateParts=b._a.slice(0),l(b).meridiem=b._meridiem,b._a[_d]=kb(b._locale,b._a[_d],b._meridiem),hb(b),cb(b)}function kb(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function lb(a){var b,c,d,e,f;if(0===a._f.length)return l(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=p({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],jb(b),m(b)&&(f+=l(b).charsLeftOver,f+=10*l(b).unusedTokens.length,l(b).score=f,(null==d||d>f)&&(d=f,c=b));i(a,c||b)}function mb(a){if(!a._d){var b=K(a._i);a._a=g([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),hb(a)}}function nb(a){var b=new q(cb(ob(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function ob(a){var b=a._i,d=a._f;return a._locale=a._locale||ab(a._l),null===b||void 0===d&&""===b?n({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),r(b)?new q(cb(b)):(c(d)?lb(a):f(b)?a._d=b:d?jb(a):pb(a),m(a)||(a._d=null),a))}function pb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):f(d)?b._d=new Date(d.valueOf()):"string"==typeof d?eb(b):c(d)?(b._a=g(d.slice(0),function(a){return parseInt(a,10)}),hb(b)):"object"==typeof d?mb(b):"number"==typeof d?b._d=new Date(d):a.createFromInputFallback(b)}function qb(a,b,f,g,h){var i={};return"boolean"==typeof f&&(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,nb(i)}function rb(a,b,c,d){return qb(a,b,c,d,!1)}function sb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return rb();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function tb(){var a=[].slice.call(arguments,0);return sb("isBefore",a)}function ub(){var a=[].slice.call(arguments,0);return sb("isAfter",a)}function vb(a){var b=K(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=ab(),this._bubble()}function wb(a){return a instanceof vb}function xb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function yb(a,b){T(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+S(~~(a/60),2)+b+S(~~a%60,2)})}function zb(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Ge)||["-",0,0],f=+(60*e[1])+t(e[2]);return"+"===e[0]?f:-f}function Ab(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(r(b)||f(b)?b.valueOf():rb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):rb(b).local()}function Bb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Cb(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=zb(Td,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Bb(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?Sb(this,Nb(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Bb(this):null!=b?this:NaN}function Db(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Eb(a){return this.utcOffset(0,a)}function Fb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Bb(this),"m")),this}function Gb(){if(this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var a=zb(Sd,this._i);0===a?this.utcOffset(0,!0):this.utcOffset(zb(Sd,this._i))}return this}function Hb(a){return this.isValid()?(a=a?rb(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Ib(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Jb(){if(!o(this._isDSTShifted))return this._isDSTShifted;var a={};if(p(a,this),a=ob(a),a._a){var b=a._isUTC?j(a._a):rb(a._a);this._isDSTShifted=this.isValid()&&u(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Kb(){return this.isValid()?!this._isUTC:!1}function Lb(){return this.isValid()?this._isUTC:!1}function Mb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Nb(a,b){var c,d,e,f=a,g=null;return wb(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=He.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:t(g[$d])*c,h:t(g[_d])*c,m:t(g[ae])*c,s:t(g[be])*c,ms:t(xb(1e3*g[ce]))*c}):(g=Ie.exec(a))?(c="-"===g[1]?-1:1,f={y:Ob(g[2],c),M:Ob(g[3],c),w:Ob(g[4],c),d:Ob(g[5],c),h:Ob(g[6],c),m:Ob(g[7],c),s:Ob(g[8],c)}):null==f?f={}:"object"==typeof f&&("from"in f||"to"in f)&&(e=Qb(rb(f.from),rb(f.to)),f={},f.ms=e.milliseconds,f.M=e.months),d=new vb(f),wb(a)&&h(a,"_locale")&&(d._locale=a._locale),d}function Ob(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Pb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Qb(a,b){var c;return a.isValid()&&b.isValid()?(b=Ab(b,a),a.isBefore(b)?c=Pb(a,b):(c=Pb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Rb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(x(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Nb(c,d),Sb(this,e,a),this}}function Sb(b,c,d,e){var f=c._milliseconds,g=xb(c._days),h=xb(c._months);b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&P(b,"Date",O(b,"Date")+g*d),h&&ia(b,O(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function Tb(a,b){var c=a.diff(b,"days",!0);return-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse"}function Ub(b,c){var d=b||rb(),e=Ab(d,this).startOf("day"),f=a.calendarFormat(this,e)||"sameElse",g=c&&(y(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,rb(d)))}function Vb(){return new q(this)}function Wb(a,b){var c=r(a)?a:rb(a);return this.isValid()&&c.isValid()?(b=J(o(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()):!1}function Xb(a,b){var c=r(a)?a:rb(a);return this.isValid()&&c.isValid()?(b=J(o(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()):!1}function Yb(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function Zb(a,b){var c,d=r(a)?a:rb(a);return this.isValid()&&d.isValid()?(b=J(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf())):!1}function $b(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function _b(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function ac(a,b,c){var d,e,f,g;return this.isValid()?(d=Ab(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=J(b),"year"===b||"month"===b||"quarter"===b?(g=bc(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:s(g)):NaN):NaN}function bc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function cc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dc(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?y(Date.prototype.toISOString)?this.toDate().toISOString():W(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ec(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=W(this,b);return this.localeData().postformat(c)}function fc(a,b){return this.isValid()&&(r(a)&&a.isValid()||rb(a).isValid())?Nb({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function gc(a){return this.from(rb(),a)}function hc(a,b){return this.isValid()&&(r(a)&&a.isValid()||rb(a).isValid())?Nb({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.to(rb(),a)}function jc(a){var b;return void 0===a?this._locale._abbr:(b=ab(a),null!=b&&(this._locale=b),this)}function kc(){return this._locale}function lc(a){switch(a=J(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function mc(a){return a=J(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function nc(){return this._d.valueOf()-6e4*(this._offset||0)}function oc(){return Math.floor(this.valueOf()/1e3)}function pc(){return new Date(this.valueOf())}function qc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function rc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function sc(){return this.isValid()?this.toISOString():null}function tc(){return m(this)}function uc(){return i({},l(this))}function vc(){return l(this).overflow}function wc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xc(a,b){T(0,[a,a.length],0,b)}function yc(a){return Cc.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function zc(a){return Cc.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Ac(){return wa(this.year(),1,4)}function Bc(){var a=this.localeData()._week;return wa(this.year(),a.dow,a.doy)}function Cc(a,b,c,d,e){var f;return null==a?va(this,d,e).year:(f=wa(a,d,e),b>f&&(b=f),Dc.call(this,a,b,c,d,e))}function Dc(a,b,c,d,e){var f=ua(a,b,c,d,e),g=sa(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Ec(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Fc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Gc(a,b){b[ce]=t(1e3*("0."+a))}function Hc(){return this._isUTC?"UTC":""}function Ic(){return this._isUTC?"Coordinated Universal Time":""}function Jc(a){return rb(1e3*a)}function Kc(){return rb.apply(null,arguments).parseZone()}function Lc(a){return a}function Mc(a,b,c,d){var e=ab(),f=j().set(d,b);return e[c](f,a)}function Nc(a,b,c){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return Mc(a,b,c,"month");var d,e=[];for(d=0;12>d;d++)e[d]=Mc(a,d,c,"month");return e}function Oc(a,b,c,d){"boolean"==typeof a?("number"==typeof b&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,"number"==typeof b&&(c=b,b=void 0),b=b||"");var e=ab(),f=a?e._week.dow:0;if(null!=c)return Mc(b,(c+f)%7,d,"day");var g,h=[];for(g=0;7>g;g++)h[g]=Mc(b,(g+f)%7,d,"day");return h}function Pc(a,b){return Nc(a,b,"months")}function Qc(a,b){return Nc(a,b,"monthsShort")}function Rc(a,b,c){return Oc(a,b,c,"weekdays")}function Sc(a,b,c){return Oc(a,b,c,"weekdaysShort")}function Tc(a,b,c){return Oc(a,b,c,"weekdaysMin")}function Uc(){var a=this._data;return this._milliseconds=Ue(this._milliseconds),this._days=Ue(this._days),this._months=Ue(this._months),a.milliseconds=Ue(a.milliseconds),a.seconds=Ue(a.seconds),a.minutes=Ue(a.minutes),a.hours=Ue(a.hours),a.months=Ue(a.months),a.years=Ue(a.years),this}function Vc(a,b,c,d){var e=Nb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Wc(a,b){return Vc(this,a,b,1)}function Xc(a,b){return Vc(this,a,b,-1)}function Yc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Zc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Yc(_c(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=s(f/1e3),i.seconds=a%60,b=s(a/60),i.minutes=b%60,c=s(b/60),i.hours=c%24,g+=s(c/24),e=s($c(g)),h+=e,g-=Yc(_c(e)),d=s(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function $c(a){return 4800*a/146097}function _c(a){return 146097*a/4800}function ad(a){var b,c,d=this._milliseconds;if(a=J(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+$c(b),"month"===a?c:c/12;switch(b=this._days+Math.round(_c(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function bd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*t(this._months/12)}function cd(a){return function(){return this.as(a)}}function dd(a){return a=J(a),this[a+"s"]()}function ed(a){return function(){return this._data[a]}}function fd(){return s(this.days()/7)}function gd(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function hd(a,b,c){var d=Nb(a).abs(),e=jf(d.as("s")),f=jf(d.as("m")),g=jf(d.as("h")),h=jf(d.as("d")),i=jf(d.as("M")),j=jf(d.as("y")),k=e<kf.s&&["s",e]||1>=f&&["m"]||f<kf.m&&["mm",f]||1>=g&&["h"]||g<kf.h&&["hh",g]||1>=h&&["d"]||h<kf.d&&["dd",h]||1>=i&&["M"]||i<kf.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,gd.apply(null,k)}function id(a){return void 0===a?jf:"function"==typeof a?(jf=a,!0):!1}function jd(a,b){return void 0===kf[a]?!1:void 0===b?kf[a]:(kf[a]=b,!0)}function kd(a){var b=this.localeData(),c=hd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function ld(){var a,b,c,d=lf(this._milliseconds)/1e3,e=lf(this._days),f=lf(this._months);a=s(d/60),b=s(a/60),d%=60,a%=60,c=s(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var md,nd;nd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;c>d;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var od=a.momentProperties=[],pd=!1,qd={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var rd;rd=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)h(a,b)&&c.push(b);return c};var sd,td={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ud={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},vd="Invalid date",wd="%d",xd=/\d{1,2}/,yd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zd={},Ad={},Bd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Cd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Dd={},Ed={},Fd=/\d/,Gd=/\d\d/,Hd=/\d{3}/,Id=/\d{4}/,Jd=/[+-]?\d{6}/,Kd=/\d\d?/,Ld=/\d\d\d\d?/,Md=/\d\d\d\d\d\d?/,Nd=/\d{1,3}/,Od=/\d{1,4}/,Pd=/[+-]?\d{1,6}/,Qd=/\d+/,Rd=/[+-]?\d+/,Sd=/Z|[+-]\d\d:?\d\d/gi,Td=/Z|[+-]\d\d(?::?\d\d)?/gi,Ud=/[+-]?\d+(\.\d{1,3})?/,Vd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Wd={},Xd={},Yd=0,Zd=1,$d=2,_d=3,ae=4,be=5,ce=6,de=7,ee=8;sd=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1},T("M",["MM",2],"Mo",function(){return this.month()+1}),T("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),T("MMMM",0,0,function(a){return this.localeData().months(this,a)}),I("month","M"),L("month",8),Y("M",Kd),Y("MM",Kd,Gd),Y("MMM",function(a,b){return b.monthsShortRegex(a)}),Y("MMMM",function(a,b){return b.monthsRegex(a)}),aa(["M","MM"],function(a,b){b[Zd]=t(a)-1}),aa(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[Zd]=e:l(c).invalidMonth=a});var fe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ge="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),he="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ie=Vd,je=Vd;T("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),T(0,["YY",2],0,function(){return this.year()%100}),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),I("year","y"),L("year",1),Y("Y",Rd),Y("YY",Kd,Gd),Y("YYYY",Od,Id),Y("YYYYY",Pd,Jd),Y("YYYYYY",Pd,Jd),aa(["YYYYY","YYYYYY"],Yd),aa("YYYY",function(b,c){c[Yd]=2===b.length?a.parseTwoDigitYear(b):t(b)}),aa("YY",function(b,c){c[Yd]=a.parseTwoDigitYear(b)}),aa("Y",function(a,b){b[Yd]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return t(a)+(t(a)>68?1900:2e3)};var ke=N("FullYear",!0);T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),L("week",5),L("isoWeek",5),Y("w",Kd),Y("ww",Kd,Gd),Y("W",Kd),Y("WW",Kd,Gd),ba(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=t(a)});var le={dow:0,doy:6};T("d",0,"do","day"),T("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),T("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),T("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),Y("d",Kd),Y("e",Kd),Y("E",Kd),Y("dd",function(a,b){return b.weekdaysMinRegex(a)}),Y("ddd",function(a,b){return b.weekdaysShortRegex(a)}),Y("dddd",function(a,b){return b.weekdaysRegex(a)}),ba(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:l(c).invalidWeekday=a}),ba(["d","e","E"],function(a,b,c,d){b[d]=t(a)});var me="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ne="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),oe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),pe=Vd,qe=Vd,re=Vd;T("H",["HH",2],0,"hour"),T("h",["hh",2],0,Qa),T("k",["kk",2],0,Ra),T("hmm",0,0,function(){return""+Qa.apply(this)+S(this.minutes(),2)}),T("hmmss",0,0,function(){return""+Qa.apply(this)+S(this.minutes(),2)+S(this.seconds(),2)}),T("Hmm",0,0,function(){return""+this.hours()+S(this.minutes(),2)}),T("Hmmss",0,0,function(){return""+this.hours()+S(this.minutes(),2)+S(this.seconds(),2)}),Sa("a",!0),Sa("A",!1),I("hour","h"),L("hour",13),Y("a",Ta),Y("A",Ta),Y("H",Kd),Y("h",Kd),Y("HH",Kd,Gd),Y("hh",Kd,Gd),Y("hmm",Ld),Y("hmmss",Md),Y("Hmm",Ld),Y("Hmmss",Md),aa(["H","HH"],_d),aa(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),aa(["h","hh"],function(a,b,c){b[_d]=t(a),l(c).bigHour=!0}),aa("hmm",function(a,b,c){var d=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d)),l(c).bigHour=!0}),aa("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d,2)),b[be]=t(a.substr(e)),l(c).bigHour=!0}),aa("Hmm",function(a,b,c){var d=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d))}),aa("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[_d]=t(a.substr(0,d)),b[ae]=t(a.substr(d,2)),b[be]=t(a.substr(e))});var se,te=/[ap]\.?m?\.?/i,ue=N("Hours",!0),ve={calendar:td,longDateFormat:ud,invalidDate:vd,ordinal:wd,ordinalParse:xd,relativeTime:yd,months:ge,monthsShort:he,week:le,weekdays:me,weekdaysMin:oe,weekdaysShort:ne,meridiemParse:te},we={},xe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ye=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ze=/Z|[+-]\d\d(?::?\d\d)?/,Ae=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Be=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ce=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=w("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),a.ISO_8601=function(){};var De=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){
var a=rb.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:n()}),Ee=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=rb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:n()}),Fe=function(){return Date.now?Date.now():+new Date};yb("Z",":"),yb("ZZ",""),Y("Z",Td),Y("ZZ",Td),aa(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=zb(Td,a)});var Ge=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var He=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ie=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Nb.fn=vb.prototype;var Je=Rb(1,"add"),Ke=Rb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Le=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});T(0,["gg",2],0,function(){return this.weekYear()%100}),T(0,["GG",2],0,function(){return this.isoWeekYear()%100}),xc("gggg","weekYear"),xc("ggggg","weekYear"),xc("GGGG","isoWeekYear"),xc("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),Y("G",Rd),Y("g",Rd),Y("GG",Kd,Gd),Y("gg",Kd,Gd),Y("GGGG",Od,Id),Y("gggg",Od,Id),Y("GGGGG",Pd,Jd),Y("ggggg",Pd,Jd),ba(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=t(a)}),ba(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),T("Q",0,"Qo","quarter"),I("quarter","Q"),L("quarter",7),Y("Q",Fd),aa("Q",function(a,b){b[Zd]=3*(t(a)-1)}),T("D",["DD",2],"Do","date"),I("date","D"),L("date",9),Y("D",Kd),Y("DD",Kd,Gd),Y("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),aa(["D","DD"],$d),aa("Do",function(a,b){b[$d]=t(a.match(Kd)[0],10)});var Me=N("Date",!0);T("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),L("dayOfYear",4),Y("DDD",Nd),Y("DDDD",Hd),aa(["DDD","DDDD"],function(a,b,c){c._dayOfYear=t(a)}),T("m",["mm",2],0,"minute"),I("minute","m"),L("minute",14),Y("m",Kd),Y("mm",Kd,Gd),aa(["m","mm"],ae);var Ne=N("Minutes",!1);T("s",["ss",2],0,"second"),I("second","s"),L("second",15),Y("s",Kd),Y("ss",Kd,Gd),aa(["s","ss"],be);var Oe=N("Seconds",!1);T("S",0,0,function(){return~~(this.millisecond()/100)}),T(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),T(0,["SSS",3],0,"millisecond"),T(0,["SSSS",4],0,function(){return 10*this.millisecond()}),T(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),T(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),T(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),T(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),T(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),L("millisecond",16),Y("S",Nd,Fd),Y("SS",Nd,Gd),Y("SSS",Nd,Hd);var Pe;for(Pe="SSSS";Pe.length<=9;Pe+="S")Y(Pe,Qd);for(Pe="S";Pe.length<=9;Pe+="S")aa(Pe,Gc);var Qe=N("Milliseconds",!1);T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");var Re=q.prototype;Re.add=Je,Re.calendar=Ub,Re.clone=Vb,Re.diff=ac,Re.endOf=mc,Re.format=ec,Re.from=fc,Re.fromNow=gc,Re.to=hc,Re.toNow=ic,Re.get=Q,Re.invalidAt=vc,Re.isAfter=Wb,Re.isBefore=Xb,Re.isBetween=Yb,Re.isSame=Zb,Re.isSameOrAfter=$b,Re.isSameOrBefore=_b,Re.isValid=tc,Re.lang=Le,Re.locale=jc,Re.localeData=kc,Re.max=Ee,Re.min=De,Re.parsingFlags=uc,Re.set=R,Re.startOf=lc,Re.subtract=Ke,Re.toArray=qc,Re.toObject=rc,Re.toDate=pc,Re.toISOString=dc,Re.toJSON=sc,Re.toString=cc,Re.unix=oc,Re.valueOf=nc,Re.creationData=wc,Re.year=ke,Re.isLeapYear=qa,Re.weekYear=yc,Re.isoWeekYear=zc,Re.quarter=Re.quarters=Ec,Re.month=ja,Re.daysInMonth=ka,Re.week=Re.weeks=Aa,Re.isoWeek=Re.isoWeeks=Ba,Re.weeksInYear=Bc,Re.isoWeeksInYear=Ac,Re.date=Me,Re.day=Re.days=Ja,Re.weekday=Ka,Re.isoWeekday=La,Re.dayOfYear=Fc,Re.hour=Re.hours=ue,Re.minute=Re.minutes=Ne,Re.second=Re.seconds=Oe,Re.millisecond=Re.milliseconds=Qe,Re.utcOffset=Cb,Re.utc=Eb,Re.local=Fb,Re.parseZone=Gb,Re.hasAlignedHourOffset=Hb,Re.isDST=Ib,Re.isLocal=Kb,Re.isUtcOffset=Lb,Re.isUtc=Mb,Re.isUTC=Mb,Re.zoneAbbr=Hc,Re.zoneName=Ic,Re.dates=w("dates accessor is deprecated. Use date instead.",Me),Re.months=w("months accessor is deprecated. Use month instead",ja),Re.years=w("years accessor is deprecated. Use year instead",ke),Re.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Db),Re.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Jb);var Se=Re,Te=B.prototype;Te.calendar=C,Te.longDateFormat=D,Te.invalidDate=E,Te.ordinal=F,Te.preparse=Lc,Te.postformat=Lc,Te.relativeTime=G,Te.pastFuture=H,Te.set=z,Te.months=ea,Te.monthsShort=fa,Te.monthsParse=ha,Te.monthsRegex=ma,Te.monthsShortRegex=la,Te.week=xa,Te.firstDayOfYear=za,Te.firstDayOfWeek=ya,Te.weekdays=Ea,Te.weekdaysMin=Ga,Te.weekdaysShort=Fa,Te.weekdaysParse=Ia,Te.weekdaysRegex=Ma,Te.weekdaysShortRegex=Na,Te.weekdaysMinRegex=Oa,Te.isPM=Ua,Te.meridiem=Va,Za("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===t(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=w("moment.lang is deprecated. Use moment.locale instead.",Za),a.langData=w("moment.langData is deprecated. Use moment.localeData instead.",ab);var Ue=Math.abs,Ve=cd("ms"),We=cd("s"),Xe=cd("m"),Ye=cd("h"),Ze=cd("d"),$e=cd("w"),_e=cd("M"),af=cd("y"),bf=ed("milliseconds"),cf=ed("seconds"),df=ed("minutes"),ef=ed("hours"),ff=ed("days"),gf=ed("months"),hf=ed("years"),jf=Math.round,kf={s:45,m:45,h:22,d:26,M:11},lf=Math.abs,mf=vb.prototype;mf.abs=Uc,mf.add=Wc,mf.subtract=Xc,mf.as=ad,mf.asMilliseconds=Ve,mf.asSeconds=We,mf.asMinutes=Xe,mf.asHours=Ye,mf.asDays=Ze,mf.asWeeks=$e,mf.asMonths=_e,mf.asYears=af,mf.valueOf=bd,mf._bubble=Zc,mf.get=dd,mf.milliseconds=bf,mf.seconds=cf,mf.minutes=df,mf.hours=ef,mf.days=ff,mf.weeks=fd,mf.months=gf,mf.years=hf,mf.humanize=kd,mf.toISOString=ld,mf.toString=ld,mf.toJSON=ld,mf.locale=jc,mf.localeData=kc,mf.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ld),mf.lang=Le,T("X",0,0,"unix"),T("x",0,0,"valueOf"),Y("x",Rd),Y("X",Ud),aa("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),aa("x",function(a,b,c){c._d=new Date(t(a))}),a.version="2.15.2",b(rb),a.fn=Se,a.min=tb,a.max=ub,a.now=Fe,a.utc=j,a.unix=Jc,a.months=Pc,a.isDate=f,a.locale=Za,a.invalid=n,a.duration=Nb,a.isMoment=r,a.weekdays=Rc,a.parseZone=Kc,a.localeData=ab,a.isDuration=wb,a.monthsShort=Qc,a.weekdaysMin=Tc,a.defineLocale=$a,a.updateLocale=_a,a.locales=bb,a.weekdaysShort=Sc,a.normalizeUnits=J,a.relativeTimeRounding=id,a.relativeTimeThreshold=jd,a.calendarFormat=Tb,a.prototype=Se;var nf=a;return nf}),/*! iScroll v5.2.0 ~ (c) 2008-2016 Matteo Spinelli ~ http://cubiq.org/license */
function(a,b,c){function d(d,e){this.wrapper="string"==typeof d?b.querySelector(d):d,this.scroller=this.wrapper.children[0],e.wrapperAsScroller&&(this.scroller=this.wrapper),this.scrollerStyle=this.scroller.style,this.options={zoomMin:1,zoomMax:4,startZoom:1,resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!h.hasPointer,disableTouch:h.hasPointer||!h.hasTouch,disableMouse:h.hasPointer||h.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof a.onmousedown};for(var f in e)this.options[f]=e[f];this.translateZ=this.options.HWCompositing&&h.hasPerspective?" translateZ(0)":"",this.options.useTransition=h.hasTransition&&this.options.useTransition,this.options.useTransform=h.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?h.ease[this.options.bounceEasing]||h.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this.scale=c.min(c.max(this.options.startZoom,this.options.zoomMin),this.options.zoomMax),this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function e(a,c,d){var e=b.createElement("div"),f=b.createElement("div");return d===!0&&(e.style.cssText="position:absolute;z-index:9999",f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),f.className="iScrollIndicator","h"==a?(d===!0&&(e.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",f.style.height="100%"),e.className="iScrollHorizontalScrollbar"):(d===!0&&(e.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",f.style.width="100%"),e.className="iScrollVerticalScrollbar"),e.style.cssText+=";overflow:hidden",c||(e.style.pointerEvents="none"),e.appendChild(f),e}function f(c,d){this.wrapper="string"==typeof d.el?b.querySelector(d.el):d.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=c,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var e in d)this.options[e]=d[e];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(h.addEvent(this.indicator,"touchstart",this),h.addEvent(a,"touchend",this)),this.options.disablePointer||(h.addEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.addEvent(a,h.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(h.addEvent(this.indicator,"mousedown",this),h.addEvent(a,"mouseup",this))),this.options.fade){this.wrapperStyle[h.style.transform]=this.scroller.translateZ;var f=h.style.transitionDuration;this.wrapperStyle[f]=h.isBadAndroid?"0.0001ms":"0ms";var i=this;h.isBadAndroid&&g(function(){"0.0001ms"===i.wrapperStyle[f]&&(i.wrapperStyle[f]="0s")}),this.wrapperStyle.opacity="0"}}var g=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},h=function(){function d(a){return g===!1?!1:""===g?a:g+a.charAt(0).toUpperCase()+a.substr(1)}var e={},f=b.createElement("div").style,g=function(){for(var a,b=["t","webkitT","MozT","msT","OT"],c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in f)return b[c].substr(0,b[c].length-1);return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(a,b){for(var c in b)a[c]=b[c]},e.isSilkAndPassiveHandler=function(){return AS.browser.silk&&AS.util.supportPassiveHandler()},e.addEvent=function(a,b,c,d){return e.isSilkAndPassiveHandler()?void a.addEventListener(b,c,{capture:!!d,passive:!1}):void a.addEventListener(b,c,!!d)},e.removeEvent=function(a,b,c,d){return e.isSilkAndPassiveHandler()?void a.removeEventListener(b,c,{capture:!!d,passive:!1}):void a.removeEventListener(b,c,!!d)},e.prefixPointerEvent=function(b){return a.MSPointerEvent?"MSPointer"+b.charAt(7).toUpperCase()+b.substr(8):b},e.momentum=function(a,b,d,e,f,g){var h,i,j=a-b,k=c.abs(j)/d;return g=void 0===g?6e-4:g,h=a+k*k/(2*g)*(0>j?-1:1),i=k/g,e>h?(h=f?e-f/2.5*(k/8):e,j=c.abs(h-a),i=j/k):h>0&&(h=f?f/2.5*(k/8):0,j=c.abs(a)+h,i=j/k),{destination:c.round(h),duration:i}};var h=d("transform");return e.extend(e,{hasTransform:h!==!1,hasPerspective:d("perspective")in f,hasTouch:"ontouchstart"in a,hasPointer:navigator.msPointerEnabled,hasTransition:d("transition")in f}),e.isBadAndroid=function(){var b=a.navigator.appVersion;if(/Android/.test(b)&&!/Chrome\/\d/.test(b)){var c=b.match(/Safari\/(\d+.\d)/);return c&&"object"==typeof c&&c.length>=2?parseFloat(c[1])<535.19:!0}return!1}(),e.extend(e.style={},{transform:h,transitionTimingFunction:d("transitionTimingFunction"),transitionDuration:d("transitionDuration"),transitionDelay:d("transitionDelay"),transformOrigin:d("transformOrigin")}),e.hasClass=function(a,b){var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return c.test(a.className)},e.addClass=function(a,b){if(!e.hasClass(a,b)){var c=a.className.split(" ");c.push(b),a.className=c.join(" ")}},e.removeClass=function(a,b){if(e.hasClass(a,b)){var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c," ")}},e.offset=function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},e.preventDefaultException=function(a,b){for(var c in b)if(b[c].test(a[c]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return c.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22,d=.4;return 0===a?0:1==a?1:d*c.pow(2,-10*a)*c.sin((a-b/4)*(2*c.PI)/b)+1}}}),e.tap=function(a,c){var d=b.createEvent("Event");d.initEvent(c,!0,!0),d.pageX=a.pageX,d.pageY=a.pageY,a.target.dispatchEvent(d)},e.click=function(a){var c,d=a.target;/(SELECT|INPUT|TEXTAREA)/i.test(d.tagName)||(c=b.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,a.view,1,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),c._constructed=!0,d.dispatchEvent(c))},e}();d.prototype={version:"5.2.0",_init:function(){this._initEvents(),this.options.zoom&&this._initZoom(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(a){a.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(a){if(1!=h.eventType[a.type]){var b;if(b=a.which?a.button:a.button<2?0:4==a.button?1:2,0!==b)return}if(this.enabled&&(!this.initiated||h.eventType[a.type]===this.initiated)){!this.options.preventDefault||h.isBadAndroid||h.preventDefaultException(a.target,this.options.preventDefaultException)||a.preventDefault();var d,e=a.touches?a.touches[0]:a;this.initiated=h.eventType[a.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=h.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,d=this.getComputedPosition(),this._translate(c.round(d.x),c.round(d.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=e.pageX,this.pointY=e.pageY,this._execEvent("beforeScrollStart")}},_move:function(a){if(this.enabled&&h.eventType[a.type]===this.initiated){this.options.preventDefault&&a.preventDefault();var b,d,e,f,g=a.touches?a.touches[0]:a,i=g.pageX-this.pointX,j=g.pageY-this.pointY,k=h.getTime();if(this.pointX=g.pageX,this.pointY=g.pageY,this.distX+=i,this.distY+=j,e=c.abs(this.distX),f=c.abs(this.distY),!(k-this.endTime>300&&10>e&&10>f)){if(this.directionLocked||this.options.freeScroll||(e>f+this.options.directionLockThreshold?this.directionLocked="h":f>=e+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)a.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);j=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)a.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);i=0}i=this.hasHorizontalScroll?i:0,j=this.hasVerticalScroll?j:0,b=this.x+i,d=this.y+j,(b>0||b<this.maxScrollX)&&(b=this.options.bounce?this.x+i/3:b>0?0:this.maxScrollX),(d>0||d<this.maxScrollY)&&(d=this.options.bounce?this.y+j/3:d>0?0:this.maxScrollY),this.directionX=i>0?-1:0>i?1:0,this.directionY=j>0?-1:0>j?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(b,d),k-this.startTime>300&&(this.startTime=k,this.startX=this.x,this.startY=this.y)}}},_end:function(a){if(this.enabled&&h.eventType[a.type]===this.initiated){this.options.preventDefault&&!h.preventDefaultException(a.target,this.options.preventDefaultException)&&a.preventDefault();var b,d,e=(a.changedTouches?a.changedTouches[0]:a,h.getTime()-this.startTime),f=c.round(this.x),g=c.round(this.y),i=c.abs(f-this.startX),j=c.abs(g-this.startY),k=0,l="";if(this.isInTransition=0,this.initiated=0,this.endTime=h.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(f,g),!this.moved)return this.options.tap&&h.tap(a,this.options.tap),this.options.click&&h.click(a),void this._execEvent("scrollCancel");if(this._events.flick&&200>e&&100>i&&100>j)return void this._execEvent("flick");if(this.options.momentum&&300>e&&(b=this.hasHorizontalScroll?h.momentum(this.x,this.startX,e,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:f,duration:0},d=this.hasVerticalScroll?h.momentum(this.y,this.startY,e,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:g,duration:0},f=b.destination,g=d.destination,k=c.max(b.duration,d.duration),this.isInTransition=1),this.options.snap){var m=this._nearestSnap(f,g);this.currentPage=m,k=this.options.snapSpeed||c.max(c.max(c.min(c.abs(f-m.x),1e3),c.min(c.abs(g-m.y),1e3)),300),f=m.x,g=m.y,this.directionX=0,this.directionY=0,l=this.options.bounceEasing}return f!=this.x||g!=this.y?((f>0||f<this.maxScrollX||g>0||g<this.maxScrollY)&&(l=h.ease.quadratic),void this.scrollTo(f,g,k,l)):void this._execEvent("scrollEnd")}}},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh()},this.options.resizePolling)},resetPosition:function(a){var b=this.x,c=this.y;return a=a||0,!this.hasHorizontalScroll||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!this.hasVerticalScroll||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),b==this.x&&c==this.y?!1:(this.scrollTo(b,c,a,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=c.round(this.scroller.offsetWidth*this.scale),this.scrollerHeight=c.round(this.scroller.offsetHeight*this.scale),this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=h.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},off:function(a,b){if(this._events[a]){var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)}},_execEvent:function(a){if(this._events[a]){var b=0,c=this._events[a].length;if(c)for(;c>b;b++)this._events[a][b].apply(this,[].slice.call(arguments,1))}},scrollBy:function(a,b,c,d){a=this.x+a,b=this.y+b,c=c||0,this.scrollTo(a,b,c,d)},scrollTo:function(a,b,c,d){d=d||h.ease.circular,this.isInTransition=this.options.useTransition&&c>0;var e=this.options.useTransition&&d.style;!c||e?(e&&(this._transitionTimingFunction(d.style),this._transitionTime(c)),this._translate(a,b)):this._animate(a,b,c,d.fn)},scrollToElement:function(a,b,d,e,f){if(a=a.nodeType?a:this.scroller.querySelector(a)){var g=h.offset(a);g.left-=this.wrapperOffset.left,g.top-=this.wrapperOffset.top,d===!0&&(d=c.round(a.offsetWidth/2-this.wrapper.offsetWidth/2)),e===!0&&(e=c.round(a.offsetHeight/2-this.wrapper.offsetHeight/2)),g.left-=d||0,g.top-=e||0,g.left=g.left>0?0:g.left<this.maxScrollX?this.maxScrollX:g.left,g.top=g.top>0?0:g.top<this.maxScrollY?this.maxScrollY:g.top,b=void 0===b||null===b||"auto"===b?c.max(c.abs(this.x-g.left),c.abs(this.y-g.top)):b,this.scrollTo(g.left,g.top,b,f)}},_transitionTime:function(a){a=a||0;var b=h.style.transitionDuration;if(this.scrollerStyle[b]=a+"ms",!a&&h.isBadAndroid){this.scrollerStyle[b]="0.0001ms";var c=this;g(function(){"0.0001ms"===c.scrollerStyle[b]&&(c.scrollerStyle[b]="0s")})}if(this.indicators)for(var d=this.indicators.length;d--;)this.indicators[d].transitionTime(a)},_transitionTimingFunction:function(a){if(this.scrollerStyle[h.style.transitionTimingFunction]=a,this.indicators)for(var b=this.indicators.length;b--;)this.indicators[b].transitionTimingFunction(a)},_translate:function(a,b){if(this.options.useTransform?this.scrollerStyle[h.style.transform]="translate("+a+"px,"+b+"px) scale("+this.scale+") "+this.translateZ:(a=c.round(a),b=c.round(b),this.scrollerStyle.left=a+"px",this.scrollerStyle.top=b+"px"),this.x=a,this.y=b,this.indicators)for(var d=this.indicators.length;d--;)this.indicators[d].updatePosition()},_initEvents:function(b){var c=b?h.removeEvent:h.addEvent,d=this.options.bindToWrapper?this.wrapper:a;c(a,"orientationchange",this),c(a,"resize",this),this.options.click&&c(this.wrapper,"click",this,!0),this.options.disableMouse||(c(this.wrapper,"mousedown",this),c(d,"mousemove",this),c(d,"mousecancel",this),c(d,"mouseup",this)),h.hasPointer&&!this.options.disablePointer&&(c(this.wrapper,h.prefixPointerEvent("pointerdown"),this),c(d,h.prefixPointerEvent("pointermove"),this),c(d,h.prefixPointerEvent("pointercancel"),this),c(d,h.prefixPointerEvent("pointerup"),this)),h.hasTouch&&!this.options.disableTouch&&(c(this.wrapper,"touchstart",this),c(d,"touchmove",this),c(d,"touchcancel",this),c(d,"touchend",this)),c(this.scroller,"transitionend",this),c(this.scroller,"webkitTransitionEnd",this),c(this.scroller,"oTransitionEnd",this),c(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var b,c,d=a.getComputedStyle(this.scroller,null);return this.options.useTransform?(d=d[h.style.transform].split(")")[0].split(", "),b=+(d[12]||d[4]),c=+(d[13]||d[5])):(b=+d.left.replace(/[^-\d.]/g,""),c=+d.top.replace(/[^-\d.]/g,"")),{x:b,y:c}},_initIndicators:function(){function a(a){if(h.indicators)for(var b=h.indicators.length;b--;)a.call(h.indicators[b])}var b,c=this.options.interactiveScrollbars,d="string"!=typeof this.options.scrollbars,g=[],h=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(b={el:e("v",c,this.options.scrollbars),interactive:c,defaultScrollbars:!0,customStyle:d,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(b.el),g.push(b)),this.options.scrollX&&(b={el:e("h",c,this.options.scrollbars),interactive:c,defaultScrollbars:!0,customStyle:d,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(b.el),g.push(b))),this.options.indicators&&(g=g.concat(this.options.indicators));for(var i=g.length;i--;)this.indicators.push(new f(this,g[i]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){a(function(){this.fade()})}),this.on("scrollCancel",function(){a(function(){this.fade()})}),this.on("scrollStart",function(){a(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){a(function(){this.fade(1,!0)})})),this.on("refresh",function(){a(function(){this.refresh()})}),this.on("destroy",function(){a(function(){this.destroy()}),delete this.indicators})},_initZoom:function(){this.scrollerStyle[h.style.transformOrigin]="0 0"},_zoomStart:function(a){var b=c.abs(a.touches[0].pageX-a.touches[1].pageX),d=c.abs(a.touches[0].pageY-a.touches[1].pageY);this.touchesDistanceStart=c.sqrt(b*b+d*d),this.startScale=this.scale,this.originX=c.abs(a.touches[0].pageX+a.touches[1].pageX)/2+this.wrapperOffset.left-this.x,this.originY=c.abs(a.touches[0].pageY+a.touches[1].pageY)/2+this.wrapperOffset.top-this.y,this._execEvent("zoomStart")},_zoom:function(a){if(this.enabled&&h.eventType[a.type]===this.initiated){this.options.preventDefault&&a.preventDefault();var b,d,e,f=c.abs(a.touches[0].pageX-a.touches[1].pageX),g=c.abs(a.touches[0].pageY-a.touches[1].pageY),i=c.sqrt(f*f+g*g),j=1/this.touchesDistanceStart*i*this.startScale;this.scaled=!0,j<this.options.zoomMin?j=.5*this.options.zoomMin*c.pow(2,j/this.options.zoomMin):j>this.options.zoomMax&&(j=2*this.options.zoomMax*c.pow(.5,this.options.zoomMax/j)),b=j/this.startScale,d=this.originX-this.originX*b+this.startX,e=this.originY-this.originY*b+this.startY,this.scale=j,this._execEvent("zoom"),this.scrollTo(d,e,0)}},_zoomEnd:function(a){if(this.enabled&&h.eventType[a.type]===this.initiated){this.options.preventDefault&&a.preventDefault();var b,c,d;this.isInTransition=0,this.initiated=0,this.scale>this.options.zoomMax?this.scale=this.options.zoomMax:this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin),this.refresh(),d=this.scale/this.startScale,b=this.originX-this.originX*d+this.startX,c=this.originY-this.originY*d+this.startY,b>0?b=0:b<this.maxScrollX&&(b=this.maxScrollX),c>0?c=0:c<this.maxScrollY&&(c=this.maxScrollY),(this.x!=b||this.y!=c)&&this.scrollTo(b,c,this.options.bounceTime),this.scaled=!1,this._execEvent("zoomEnd")}},zoom:function(a,b,c,d){if(a<this.options.zoomMin?a=this.options.zoomMin:a>this.options.zoomMax&&(a=this.options.zoomMax),a!=this.scale){var e=a/this.scale;b=void 0===b?this.wrapperWidth/2:b,c=void 0===c?this.wrapperHeight/2:c,d=void 0===d?300:d,b=b+this.wrapperOffset.left-this.x,c=c+this.wrapperOffset.top-this.y,b=b-b*e+this.x,c=c-c*e+this.y,this.scale=a,this.refresh(),b>0?b=0:b<this.maxScrollX&&(b=this.maxScrollX),c>0?c=0:c<this.maxScrollY&&(c=this.maxScrollY),this.scrollTo(b,c,d)}},_wheelZoom:function(a){var b,d,e=this;if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){e._execEvent("zoomEnd")},400),"deltaX"in a)b=-a.deltaY/c.abs(a.deltaY);else if("wheelDeltaX"in a)b=a.wheelDeltaY/c.abs(a.wheelDeltaY);else if("wheelDelta"in a)b=a.wheelDelta/c.abs(a.wheelDelta);else{if(!("detail"in a))return;b=-a.detail/c.abs(a.wheelDelta)}d=this.scale+b/5,this.zoom(d,a.pageX,a.pageY,0)},_initWheel:function(){h.addEvent(this.wrapper,"wheel",this),h.addEvent(this.wrapper,"mousewheel",this),h.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,h.removeEvent(this.wrapper,"wheel",this),h.removeEvent(this.wrapper,"mousewheel",this),h.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(a){if(this.enabled){a.preventDefault();var b,d,e,f,g=this;if(void 0===this.wheelTimeout&&g._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){g.options.snap||g._execEvent("scrollEnd"),g.wheelTimeout=void 0},400),"deltaX"in a)1===a.deltaMode?(b=-a.deltaX*this.options.mouseWheelSpeed,d=-a.deltaY*this.options.mouseWheelSpeed):(b=-a.deltaX,d=-a.deltaY);else if("wheelDeltaX"in a)b=a.wheelDeltaX/120*this.options.mouseWheelSpeed,d=a.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in a)b=d=a.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in a))return;b=d=-a.detail/3*this.options.mouseWheelSpeed}if(b*=this.options.invertWheelDirection,d*=this.options.invertWheelDirection,this.hasVerticalScroll||(b=d,d=0),this.options.snap)return e=this.currentPage.pageX,f=this.currentPage.pageY,b>0?e--:0>b&&e++,d>0?f--:0>d&&f++,void this.goToPage(e,f);e=this.x+c.round(this.hasHorizontalScroll?b:0),f=this.y+c.round(this.hasVerticalScroll?d:0),this.directionX=b>0?-1:0>b?1:0,this.directionY=d>0?-1:0>d?1:0,e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),f>0?f=0:f<this.maxScrollY&&(f=this.maxScrollY),this.scrollTo(e,f,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var a,b,d,e,f,g,h=0,i=0,j=0,k=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(d=c.round(k/2),e=c.round(l/2);j>-this.scrollerWidth;){for(this.pages[h]=[],a=0,f=0;f>-this.scrollerHeight;)this.pages[h][a]={x:c.max(j,this.maxScrollX),y:c.max(f,this.maxScrollY),width:k,height:l,cx:j-d,cy:f-e},f-=l,a++;j-=k,h++}else for(g=this.options.snap,a=g.length,b=-1;a>h;h++)(0===h||g[h].offsetLeft<=g[h-1].offsetLeft)&&(i=0,b++),this.pages[i]||(this.pages[i]=[]),j=c.max(-g[h].offsetLeft,this.maxScrollX),f=c.max(-g[h].offsetTop,this.maxScrollY),d=j-c.round(g[h].offsetWidth/2),e=f-c.round(g[h].offsetHeight/2),this.pages[i][b]={x:j,y:f,width:g[h].offsetWidth,height:g[h].offsetHeight,cx:d,cy:e},j>this.maxScrollX&&i++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var a=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.x-this.startX),1e3),c.min(c.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,a)})},_nearestSnap:function(a,b){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var d=0,e=this.pages.length,f=0;if(c.abs(a-this.absStartX)<this.snapThresholdX&&c.abs(b-this.absStartY)<this.snapThresholdY)return this.currentPage;for(a>0?a=0:a<this.maxScrollX&&(a=this.maxScrollX),b>0?b=0:b<this.maxScrollY&&(b=this.maxScrollY);e>d;d++)if(a>=this.pages[d][0].cx){a=this.pages[d][0].x;break}for(e=this.pages[d].length;e>f;f++)if(b>=this.pages[0][f].cy){b=this.pages[0][f].y;break}return d==this.currentPage.pageX&&(d+=this.directionX,0>d?d=0:d>=this.pages.length&&(d=this.pages.length-1),a=this.pages[d][0].x),f==this.currentPage.pageY&&(f+=this.directionY,0>f?f=0:f>=this.pages[0].length&&(f=this.pages[0].length-1),b=this.pages[0][f].y),{x:a,y:b,pageX:d,pageY:f}},goToPage:function(a,b,d,e){e=e||this.options.bounceEasing,a>=this.pages.length?a=this.pages.length-1:0>a&&(a=0),b>=this.pages[a].length?b=this.pages[a].length-1:0>b&&(b=0);var f=this.pages[a][b].x,g=this.pages[a][b].y;d=void 0===d?this.options.snapSpeed||c.max(c.max(c.min(c.abs(f-this.x),1e3),c.min(c.abs(g-this.y),1e3)),300):d,this.currentPage={x:f,y:g,pageX:a,pageY:b},this.scrollTo(f,g,d,e)},next:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c++,c>=this.pages.length&&this.hasVerticalScroll&&(c=0,d++),this.goToPage(c,d,a,b)},prev:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c--,0>c&&this.hasVerticalScroll&&(c=0,d--),this.goToPage(c,d,a,b)},_initKeys:function(b){var c,d={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(c in this.options.keyBindings)"string"==typeof this.options.keyBindings[c]&&(this.options.keyBindings[c]=this.options.keyBindings[c].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(c in d)this.options.keyBindings[c]=this.options.keyBindings[c]||d[c];h.addEvent(a,"keydown",this),this.on("destroy",function(){h.removeEvent(a,"keydown",this)})},_key:function(a){if(this.enabled){var b,d=this.options.snap,e=d?this.currentPage.pageX:this.x,f=d?this.currentPage.pageY:this.y,g=h.getTime(),i=this.keyTime||0,j=.25;switch(this.options.useTransition&&this.isInTransition&&(b=this.getComputedPosition(),this._translate(c.round(b.x),c.round(b.y)),this.isInTransition=!1),this.keyAcceleration=200>g-i?c.min(this.keyAcceleration+j,50):0,a.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?e+=d?1:this.wrapperWidth:f+=d?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?e-=d?1:this.wrapperWidth:f-=d?1:this.wrapperHeight;break;case this.options.keyBindings.end:e=d?this.pages.length-1:this.maxScrollX,f=d?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:e=0,f=0;break;case this.options.keyBindings.left:e+=d?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:f+=d?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:e-=d?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:f-=d?1:5+this.keyAcceleration>>0;break;default:return}if(d)return void this.goToPage(e,f);e>0?(e=0,this.keyAcceleration=0):e<this.maxScrollX&&(e=this.maxScrollX,this.keyAcceleration=0),f>0?(f=0,this.keyAcceleration=0):f<this.maxScrollY&&(f=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(e,f,0),this.keyTime=g}},_animate:function(a,b,c,d){function e(){var m,n,o,p=h.getTime();return p>=l?(f.isAnimating=!1,f._translate(a,b),void(f.resetPosition(f.options.bounceTime)||f._execEvent("scrollEnd"))):(p=(p-k)/c,o=d(p),m=(a-i)*o+i,n=(b-j)*o+j,f._translate(m,n),void(f.isAnimating&&g(e)))}var f=this,i=this.x,j=this.y,k=h.getTime(),l=k+c;this.isAnimating=!0,e()},handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a),this.options.zoom&&a.touches&&a.touches.length>1&&this._zoomStart(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":if(this.options.zoom&&a.touches&&a.touches[1])return void this._zoom(a);this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":if(this.scaled)return void this._zoomEnd(a);this._end(a);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a);break;case"wheel":case"DOMMouseScroll":case"mousewheel":if("zoom"==this.options.wheelAction)return void this._wheelZoom(a);this._wheel(a);break;case"keydown":this._key(a)}}},f.prototype={handleEvent:function(a){switch(a.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(a)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(h.removeEvent(this.indicator,"touchstart",this),h.removeEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.removeEvent(this.indicator,"mousedown",this),h.removeEvent(a,"touchmove",this),h.removeEvent(a,h.prefixPointerEvent("pointermove"),this),h.removeEvent(a,"mousemove",this),h.removeEvent(a,"touchend",this),h.removeEvent(a,h.prefixPointerEvent("pointerup"),this),h.removeEvent(a,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(b){var c=b.touches?b.touches[0]:b;b.preventDefault(),b.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=c.pageX,this.lastPointY=c.pageY,this.startTime=h.getTime(),this.options.disableTouch||h.addEvent(a,"touchmove",this),this.options.disablePointer||h.addEvent(a,h.prefixPointerEvent("pointermove"),this),this.options.disableMouse||h.addEvent(a,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(a){var b,c,d,e,f=a.touches?a.touches[0]:a;h.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,b=f.pageX-this.lastPointX,this.lastPointX=f.pageX,c=f.pageY-this.lastPointY,this.lastPointY=f.pageY,d=this.x+b,e=this.y+c,this._pos(d,e),a.preventDefault(),a.stopPropagation()},_end:function(b){if(this.initiated){if(this.initiated=!1,b.preventDefault(),b.stopPropagation(),h.removeEvent(a,"touchmove",this),h.removeEvent(a,h.prefixPointerEvent("pointermove"),this),h.removeEvent(a,"mousemove",this),this.scroller.options.snap){var d=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),e=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.scroller.x-d.x),1e3),c.min(c.abs(this.scroller.y-d.y),1e3)),300);(this.scroller.x!=d.x||this.scroller.y!=d.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=d,this.scroller.scrollTo(d.x,d.y,e,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(a){a=a||0;var b=h.style.transitionDuration;if(this.indicatorStyle[b]=a+"ms",!a&&h.isBadAndroid){this.indicatorStyle[b]="0.0001ms";var c=this;g(function(){"0.0001ms"===c.indicatorStyle[b]&&(c.indicatorStyle[b]="0s")})}},transitionTimingFunction:function(a){this.indicatorStyle[h.style.transitionTimingFunction]=a},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",
this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(h.addClass(this.wrapper,"iScrollBothScrollbars"),h.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(h.removeClass(this.wrapper,"iScrollBothScrollbars"),h.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=c.max(c.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=c.max(c.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var a=this.options.listenX&&c.round(this.sizeRatioX*this.scroller.x)||0,b=this.options.listenY&&c.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(a<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=c.max(this.indicatorWidth+a,8),this.indicatorStyle.width=this.width+"px"),a=this.minBoundaryX):a>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=c.max(this.indicatorWidth-(a-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",a=this.maxPosX+this.indicatorWidth-this.width):a=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),b<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=c.max(this.indicatorHeight+3*b,8),this.indicatorStyle.height=this.height+"px"),b=this.minBoundaryY):b>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=c.max(this.indicatorHeight-3*(b-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",b=this.maxPosY+this.indicatorHeight-this.height):b=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=a,this.y=b,this.scroller.options.useTransform?this.indicatorStyle[h.style.transform]="translate("+a+"px,"+b+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=a+"px",this.indicatorStyle.top=b+"px")},_pos:function(a,b){0>a?a=0:a>this.maxPosX&&(a=this.maxPosX),0>b?b=0:b>this.maxPosY&&(b=this.maxPosY),a=this.options.listenX?c.round(a/this.sizeRatioX):this.scroller.x,b=this.options.listenY?c.round(b/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(a,b)},fade:function(a,b){if(!b||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var c=a?250:500,d=a?0:300;a=a?"1":"0",this.wrapperStyle[h.style.transitionDuration]=c+"ms",this.fadeTimeout=setTimeout(function(a){this.wrapperStyle.opacity=a,this.visible=+a}.bind(this,a),d)}}},d.utils=h,"undefined"!=typeof module&&module.exports?module.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):a.IScroll=d}(window,document,Math),/*
 *  jQuery dotdotdot 1.6.13
 *
 *  Copyright (c) Fred Heusschen
 *  www.frebsite.nl
 *
 *  Plugin website:
 *  dotdotdot.frebsite.nl
 *
 *  Dual licensed under the MIT and GPL licenses.
 *  http://en.wikipedia.org/wiki/MIT_License
 *  http://en.wikipedia.org/wiki/GNU_General_Public_License
 */
window.Zepto&&!function(a){var b=function(a,b){return function(c){var d,e,f;return this?(f=this,e=f[a](),d={width:["left","right"],height:["top","bottom"]},d[a].forEach(function(a){e+=parseInt(f.css("padding-"+a),10),b&&(e+=parseInt(f.css("border-"+a+"-width"),10)),c&&(e+=parseInt(f.css("margin-"+a),10))}),e):null}};["width","height"].forEach(function(c){var d=c.substr(0,1).toUpperCase()+c.substr(1);a.fn["inner"+d]=b(c,!1),a.fn["outer"+d]=b(c,!0)})}(Zepto),function(a,b){function c(a,b,c){var d=a.children(),e=!1;a.empty();for(var g=0,h=d.length;h>g;g++){var i=d.eq(g);if(a.append(i),c&&a.append(c),f(a,b)){i.remove(),e=!0;break}c&&c.detach()}return e}function d(b,c,g,h,i){var j=!1,k="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",l="script";return b.contents().detach().each(function(){var m=this,n=a(m);if("undefined"==typeof m||3==m.nodeType&&0==a.trim(m.data).length)return!0;if(n.is(l))b.append(n);else{if(j)return!0;b.append(n),i&&b[b.is(k)?"after":"append"](i),f(g,h)&&(j=3==m.nodeType?e(n,c,g,h,i):d(n,c,g,h,i),j||(n.detach(),j=!0)),j||i&&i.detach()}}),j}function e(b,c,d,e,h){var k=b[0];if(!k)return!1;var m=j(k),n=-1!==m.indexOf(" ")?" ":"　",o="letter"==e.wrap?"":n,p=m.split(o),q=-1,r=-1,s=0,t=p.length-1;for(e.fallbackToLetter&&0==s&&0==t&&(o="",p=m.split(o),t=p.length-1);t>=s&&(0!=s||0!=t);){var u=Math.floor((s+t)/2);if(u==r)break;r=u,i(k,p.slice(0,r+1).join(o)+e.ellipsis),f(d,e)?(t=r,e.fallbackToLetter&&0==s&&0==t&&(o="",p=p[0].split(o),q=-1,r=-1,s=0,t=p.length-1)):(q=r,s=r)}if(-1==q||1==p.length&&0==p[0].length){var v=b.parent();b.detach();var w=h&&h.closest(v).length?h.length:0;v.contents().length>w?k=l(v.contents().eq(-1-w),c):(k=l(v,c,!0),w||v.detach()),k&&(m=g(j(k),e),i(k,m),w&&h&&a(k).parent().append(h))}else m=g(p.slice(0,q+1).join(o),e),i(k,m);return!0}function f(a,b){return a.innerHeight()>b.maxHeight}function g(b,c){for(;a.inArray(b.slice(-1),c.lastCharacter.remove)>-1;)b=b.slice(0,-1);return a.inArray(b.slice(-1),c.lastCharacter.noEllipsis)<0&&(b+=c.ellipsis),b}function h(a){return{width:a.innerWidth(),height:a.innerHeight()}}function i(a,b){a.innerText?a.innerText=b:a.nodeValue?a.nodeValue=b:a.textContent&&(a.textContent=b)}function j(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function k(a){do a=a.previousSibling;while(a&&1!==a.nodeType&&3!==a.nodeType);return a}function l(b,c,d){var e,f=b&&b[0];if(f){if(!d){if(3===f.nodeType)return f;if(a.trim(b.text()))return l(b.contents().last(),c)}for(e=k(f);!e;){if(b=b.parent(),b.is(c)||!b.length)return!1;e=k(b[0])}if(e)return l(a(e),c)}return!1}function m(b,c){return b?"string"==typeof b?(b=a(b,c),b.length?b:!1):b.jquery?b:!1:!1}function n(a){return a.outerHeight()}if(!a.fn.dotdotdot){a.fn.dotdotdot=function(b){if(0==this.length)return a.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){a(this).dotdotdot(b)});var e=this;e.data("dotdotdot")&&e.trigger("destroy_dot"),e.data("dotdotdot-style",e.attr("style")||""),e.css("word-wrap","break-word"),"nowrap"===e.css("white-space")&&e.css("white-space","normal"),e.bind_events=function(){return e.bind("update_dot",function(b,h){b.preventDefault(),b.stopPropagation(),i.maxHeight="number"==typeof i.height?i.height:n(e),i.maxHeight+=i.tolerance,"undefined"!=typeof h&&(("string"==typeof h||h instanceof HTMLElement)&&(h=a("<div />").append(h).contents()),h instanceof a&&(g=h)),p=e.wrapInner('<div class="dotdotdot" />').children(),p.empty().append(g.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var k=!1,l=!1;return j.afterElement&&(k=j.afterElement.clone(!0),k.show(),j.afterElement.detach()),f(p,i)&&(l="children"==i.wrap?c(p,i,k):d(p,e,p,i,k)),p.replaceWith(p.contents()),p=null,a.isFunction(i.callback)&&i.callback.call(e[0],l,g),j.isTruncated=l,l}).bind("isTruncated_dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(e[0],j.isTruncated),j.isTruncated}).bind("originalContent_dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(e[0],g),g}).bind("destroy_dot",function(a){a.preventDefault(),a.stopPropagation(),e.unwatch().unbind_events().empty().append(g).data("dotdotdot",!1)}),e},e.unbind_events=function(){return e.unbind("update_dot isTruncated_dot originalContent_dot destroy_dot"),e},e.watch=function(){if(e.unwatch(),"window"==i.watch){var b=a(window),c=b.width(),d=b.height();b.bind("resize_dot"+j.dotId,function(){c==b.width()&&d==b.height()&&i.windowResizeFix||(c=b.width(),d=b.height(),l&&clearInterval(l),l=setTimeout(function(){e.trigger("update_dot")},10))})}else k=h(e),l=setInterval(function(){var a=h(e);(k.width!=a.width||k.height!=a.height)&&(e.trigger("update_dot"),k=h(e))},100);return e},e.unwatch=function(){return a(window).unbind("resize_dot"+j.dotId),l&&clearInterval(l),e};var g=e.contents(),i=a.extend(!0,{},a.fn.dotdotdot.defaults,b),j={},k={},l=null,p=null;return i.lastCharacter.remove instanceof Array||(i.lastCharacter.remove=a.fn.dotdotdot.defaultArrays.lastCharacter.remove),i.lastCharacter.noEllipsis instanceof Array||(i.lastCharacter.noEllipsis=a.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),j.afterElement=m(i.after,e),j.isTruncated=!1,j.dotId=o++,e.data("dotdotdot",!0).bind_events().trigger("update_dot"),i.watch&&e.watch(),e},a.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},a.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},a.fn.dotdotdot.debug=function(){};var o=1,p=a.fn.html;a.fn.html=function(c){return c!=b&&!a.isFunction(c)&&this.data("dotdotdot")?this.trigger("update",[c]):p.apply(this,arguments)};var q=a.fn.text;a.fn.text=function(c){return c!=b&&!a.isFunction(c)&&this.data("dotdotdot")?(c=a("<div />").text(c).html(),this.trigger("update",[c])):q.apply(this,arguments)}}}(window.jQuery||window.Zepto),/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(a,b,c){(function(c){var d,e="undefined"!=typeof c?c:"undefined"!=typeof window?window:{},f=a(1);"undefined"!=typeof document?d=document:(d=e["__GLOBAL_DOCUMENT_CACHE@4"],d||(d=e["__GLOBAL_DOCUMENT_CACHE@4"]=f)),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],3:[function(a,b,c){(function(a){var c;c="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b,c){!function(a){function c(){}function d(a,b){return function(){a.apply(b,arguments)}}function e(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],k(a,this)}function f(a,b){for(;3===a._state;)a=a._value;return 0===a._state?void a._deferreds.push(b):(a._handled=!0,void e._immediateFn(function(){var c=1===a._state?b.onFulfilled:b.onRejected;if(null===c)return void(1===a._state?g:h)(b.promise,a._value);var d;try{d=c(a._value)}catch(e){return void h(b.promise,e)}g(b.promise,d)}))}function g(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"==typeof b||"function"==typeof b)){var c=b.then;if(b instanceof e)return a._state=3,a._value=b,void i(a);if("function"==typeof c)return void k(d(c,b),a)}a._state=1,a._value=b,i(a)}catch(f){h(a,f)}}function h(a,b){a._state=2,a._value=b,i(a)}function i(a){2===a._state&&0===a._deferreds.length&&e._immediateFn(function(){a._handled||e._unhandledRejectionFn(a._value)});for(var b=0,c=a._deferreds.length;c>b;b++)f(a,a._deferreds[b]);a._deferreds=null}function j(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function k(a,b){var c=!1;try{a(function(a){c||(c=!0,g(b,a))},function(a){c||(c=!0,h(b,a))})}catch(d){if(c)return;c=!0,h(b,d)}}var l=setTimeout;e.prototype["catch"]=function(a){return this.then(null,a)},e.prototype.then=function(a,b){var d=new this.constructor(c);return f(this,new j(a,b,d)),d},e.all=function(a){var b=Array.prototype.slice.call(a);return new e(function(a,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}b[f]=g,0===--e&&a(b)}catch(i){c(i)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},e.resolve=function(a){return a&&"object"==typeof a&&a.constructor===e?a:new e(function(b){b(a)})},e.reject=function(a){return new e(function(b,c){c(a)})},e.race=function(a){return new e(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},e._immediateFn="function"==typeof setImmediate&&function(a){setImmediate(a)}||function(a){l(a,0)},e._unhandledRejectionFn=function(a){"undefined"!=typeof console&&console},e._setImmediateFn=function(a){e._immediateFn=a},e._setUnhandledRejectionFn=function(a){e._unhandledRejectionFn=a},"undefined"!=typeof b&&b.exports?b.exports=e:a.Promise||(a.Promise=e)}(this)},{}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a(7),g=d(f),h=a(9),i=a(18),j={lang:"en",en:h.EN};j.language=function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];if(null!==b&&void 0!==b&&b.length){if("string"!=typeof b[0])throw new TypeError("Language code must be a string value");if(!/^[a-z]{2}(\-[a-z]{2})?$/i.test(b[0]))throw new TypeError("Language code must have format `xx` or `xx-xx`");j.lang=b[0],void 0===j[b[0]]?(b[1]=null!==b[1]&&void 0!==b[1]&&"object"===e(b[1])?b[1]:{},j[b[0]]=i.isObjectEmpty(b[1])?h.EN:b[1]):null!==b[1]&&void 0!==b[1]&&"object"===e(b[1])&&(j[b[0]]=b[1])}return j.lang},j.t=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof a&&a.length){var c=void 0,d=void 0,f=j.language(),g=function(a,b,c){if("object"!==("undefined"==typeof a?"undefined":e(a))||"number"!=typeof b||"number"!=typeof c)return a;var d=function(){return[function(){return arguments.length<=1?void 0:arguments[1]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 0===(arguments.length<=0?void 0:arguments[0])||1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return(arguments.length<=0?void 0:arguments[0])%10===1&&(arguments.length<=0?void 0:arguments[0])%100!==11?arguments.length<=1?void 0:arguments[1]:0!==(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])||11===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])||12===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])>2&&(arguments.length<=0?void 0:arguments[0])<20?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:0===(arguments.length<=0?void 0:arguments[0])||(arguments.length<=0?void 0:arguments[0])%100>0&&(arguments.length<=0?void 0:arguments[0])%100<20?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return(arguments.length<=0?void 0:arguments[0])%10===1&&(arguments.length<=0?void 0:arguments[0])%100!==11?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10>=2&&((arguments.length<=0?void 0:arguments[0])%100<10||(arguments.length<=0?void 0:arguments[0])%100>=20)?arguments.length<=2?void 0:arguments[2]:[3]},function(){return(arguments.length<=0?void 0:arguments[0])%10===1&&(arguments.length<=0?void 0:arguments[0])%100!==11?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10>=2&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||(arguments.length<=0?void 0:arguments[0])%100>=20)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])>=2&&(arguments.length<=0?void 0:arguments[0])<=4?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10>=2&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||(arguments.length<=0?void 0:arguments[0])%100>=20)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return(arguments.length<=0?void 0:arguments[0])%100===1?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])%100===2?arguments.length<=3?void 0:arguments[3]:(arguments.length<=0?void 0:arguments[0])%100===3||(arguments.length<=0?void 0:arguments[0])%100===4?arguments.length<=4?void 0:arguments[4]:arguments.length<=1?void 0:arguments[1]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])>2&&(arguments.length<=0?void 0:arguments[0])<7?arguments.length<=3?void 0:arguments[3]:(arguments.length<=0?void 0:arguments[0])>6&&(arguments.length<=0?void 0:arguments[0])<11?arguments.length<=4?void 0:arguments[4]:arguments.length<=5?void 0:arguments[5]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:(arguments.length<=0?void 0:arguments[0])%100>=3&&(arguments.length<=0?void 0:arguments[0])%100<=10?arguments.length<=4?void 0:arguments[4]:(arguments.length<=0?void 0:arguments[0])%100>=11?arguments.length<=5?void 0:arguments[5]:arguments.length<=6?void 0:arguments[6]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:0===(arguments.length<=0?void 0:arguments[0])||(arguments.length<=0?void 0:arguments[0])%100>1&&(arguments.length<=0?void 0:arguments[0])%100<11?arguments.length<=2?void 0:arguments[2]:(arguments.length<=0?void 0:arguments[0])%100>10&&(arguments.length<=0?void 0:arguments[0])%100<20?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return(arguments.length<=0?void 0:arguments[0])%10===1?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10===2?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 11!==(arguments.length<=0?void 0:arguments[0])&&(arguments.length<=0?void 0:arguments[0])%10===1?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:(arguments.length<=0?void 0:arguments[0])%10>=2&&(arguments.length<=0?void 0:arguments[0])%10<=4&&((arguments.length<=0?void 0:arguments[0])%100<10||(arguments.length<=0?void 0:arguments[0])%100>=20)?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:8!==(arguments.length<=0?void 0:arguments[0])&&11!==(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2]},function(){return 1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:2===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:3===(arguments.length<=0?void 0:arguments[0])?arguments.length<=3?void 0:arguments[3]:arguments.length<=4?void 0:arguments[4]},function(){return 0===(arguments.length<=0?void 0:arguments[0])?arguments.length<=1?void 0:arguments[1]:1===(arguments.length<=0?void 0:arguments[0])?arguments.length<=2?void 0:arguments[2]:arguments.length<=3?void 0:arguments[3]}]}();return d[c].apply(null,[b].concat(a))};return void 0!==j[f]&&(c=j[f][a],null!==b&&"number"==typeof b&&(d=j[f]["mejs.plural-form"],c=g.apply(null,[c,b,d]))),!c&&j.en&&(c=j.en[a],null!==b&&"number"==typeof b&&(d=j.en["mejs.plural-form"],c=g.apply(null,[c,b,d]))),c=c||a,null!==b&&"number"==typeof b&&(c=c.replace("%1",b)),i.escapeHTML(c)}return a},g["default"].i18n=j,"undefined"!=typeof mejsL10n&&g["default"].i18n.language(mejsL10n.language,mejsL10n.strings),c["default"]=j},{18:18,7:7,9:9}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=a(3),h=d(g),i=a(2),j=d(i),k=a(7),l=d(k),m=a(18),n=a(19),o=a(8),p=a(16),q=function r(a,b,c){var d=this;e(this,r);var g=this;c=Array.isArray(c)?c:null,g.defaults={renderers:[],fakeNodeName:"mediaelementwrapper",pluginPath:"build/",shimScriptAccess:"sameDomain"},b=Object.assign(g.defaults,b),g.mediaElement=j["default"].createElement(b.fakeNodeName);var i=a,k=!1;if("string"==typeof a?g.mediaElement.originalNode=j["default"].getElementById(a):(g.mediaElement.originalNode=a,i=a.id),void 0===g.mediaElement.originalNode||null===g.mediaElement.originalNode)return null;g.mediaElement.options=b,i=i||"mejs_"+Math.random().toString().slice(2),g.mediaElement.originalNode.setAttribute("id",i+"_from_mejs");var q=g.mediaElement.originalNode.tagName.toLowerCase();["video","audio"].indexOf(q)>-1&&!g.mediaElement.originalNode.getAttribute("preload")&&g.mediaElement.originalNode.setAttribute("preload","none"),g.mediaElement.originalNode.parentNode.insertBefore(g.mediaElement,g.mediaElement.originalNode),g.mediaElement.appendChild(g.mediaElement.originalNode);var s=function(a,b){if("https:"===h["default"].location.protocol&&0===a.indexOf("http:")&&p.IS_IOS&&l["default"].html5media.mediaTypes.indexOf(b)>-1){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var b=h["default"].URL||h["default"].webkitURL,c=b.createObjectURL(this.response);return g.mediaElement.originalNode.setAttribute("src",c),c}return a},c.open("GET",a),c.responseType="blob",c.send()}return a},t=void 0;if(null!==c)t=c;else if(null!==g.mediaElement.originalNode)switch(t=[],g.mediaElement.originalNode.nodeName.toLowerCase()){case"iframe":t.push({type:"",src:g.mediaElement.originalNode.getAttribute("src")});break;case"audio":case"video":var u=g.mediaElement.originalNode.children.length,v=g.mediaElement.originalNode.getAttribute("src");if(v){var w=g.mediaElement.originalNode,x=n.formatType(v,w.getAttribute("type"));t.push({type:x,src:s(v,x)})}for(var y=0;u>y;y++){var z=g.mediaElement.originalNode.children[y];if("source"===z.tagName.toLowerCase()){var A=z.getAttribute("src"),B=n.formatType(A,z.getAttribute("type"));t.push({type:B,src:s(A,B)})}}}g.mediaElement.id=i,g.mediaElement.renderers={},g.mediaElement.events={},g.mediaElement.promises=[],g.mediaElement.renderer=null,g.mediaElement.rendererName=null,g.mediaElement.changeRenderer=function(a,b){var c=d,e=Object.keys(b[0]).length>2?b[0]:b[0].src;if(void 0!==c.mediaElement.renderer&&null!==c.mediaElement.renderer&&c.mediaElement.renderer.name===a)return c.mediaElement.renderer.pause(),c.mediaElement.renderer.stop&&c.mediaElement.renderer.stop(),c.mediaElement.renderer.show(),c.mediaElement.renderer.setSrc(e),!0;void 0!==c.mediaElement.renderer&&null!==c.mediaElement.renderer&&(c.mediaElement.renderer.pause(),c.mediaElement.renderer.stop&&c.mediaElement.renderer.stop(),c.mediaElement.renderer.hide());var f=c.mediaElement.renderers[a],g=null;if(void 0!==f&&null!==f)return f.show(),f.setSrc(e),c.mediaElement.renderer=f,c.mediaElement.rendererName=a,!0;for(var h=c.mediaElement.options.renderers.length?c.mediaElement.options.renderers:o.renderer.order,i=0,j=h.length;j>i;i++){var k=h[i];if(k===a){var l=o.renderer.renderers;g=l[k];var m=Object.assign(g.options,c.mediaElement.options);return f=g.create(c.mediaElement,m,b),f.name=a,c.mediaElement.renderers[g.name]=f,c.mediaElement.renderer=f,c.mediaElement.rendererName=a,f.show(),!0}}return!1},g.mediaElement.setSize=function(a,b){void 0!==g.mediaElement.renderer&&null!==g.mediaElement.renderer&&g.mediaElement.renderer.setSize(a,b)},g.mediaElement.generateError=function(a,b){a=a||"",b=Array.isArray(b)?b:[];var c=m.createEvent("error",g.mediaElement);c.message=a,c.urls=b,g.mediaElement.dispatchEvent(c),k=!0};var C=l["default"].html5media.properties,D=l["default"].html5media.methods,E=function(a,b,c,d){var e=a[b],f=function(){return c.apply(a,[e])},g=function(b){return e=d.apply(a,[b])};Object.defineProperty(a,b,{get:f,set:g})},F=function(a){if("src"!==a){var b=""+a.substring(0,1).toUpperCase()+a.substring(1),c=function(){return void 0!==g.mediaElement.renderer&&null!==g.mediaElement.renderer&&"function"==typeof g.mediaElement.renderer["get"+b]?g.mediaElement.renderer["get"+b]():null},d=function(a){void 0!==g.mediaElement.renderer&&null!==g.mediaElement.renderer&&"function"==typeof g.mediaElement.renderer["set"+b]&&g.mediaElement.renderer["set"+b](a)};E(g.mediaElement,a,c,d),g.mediaElement["get"+b]=c,g.mediaElement["set"+b]=d}},G=function(){return void 0!==g.mediaElement.renderer&&null!==g.mediaElement.renderer?g.mediaElement.renderer.getSrc():null},H=function(a){var b=[];if("string"==typeof a)b.push({src:a,type:a?n.getTypeFromFile(a):""});else if("object"===("undefined"==typeof a?"undefined":f(a))&&void 0!==a.src){var c=n.absolutizeUrl(a.src),d=a.type,e=Object.assign(a,{src:c,type:""!==d&&null!==d&&void 0!==d||!c?d:n.getTypeFromFile(c)});b.push(e)}else if(Array.isArray(a))for(var h=0,i=a.length;i>h;h++){var j=n.absolutizeUrl(a[h].src),k=a[h].type,l=Object.assign(a[h],{src:j,type:""!==k&&null!==k&&void 0!==k||!j?k:n.getTypeFromFile(j)});b.push(l)}var p=o.renderer.select(b,g.mediaElement.options.renderers.length?g.mediaElement.options.renderers:[]),q=void 0;return g.mediaElement.paused||(g.mediaElement.pause(),q=m.createEvent("pause",g.mediaElement),g.mediaElement.dispatchEvent(q)),g.mediaElement.originalNode.src=b[0].src||"",null===p&&b[0].src?void g.mediaElement.generateError("No renderer found",b):b[0].src?g.mediaElement.changeRenderer(p.rendererName,b):null},I=function(a,b){try{if("play"===a&&"native_dash"===g.mediaElement.rendererName){var c=g.mediaElement.renderer[a](b);c&&"function"==typeof c.then&&c["catch"](function(){g.mediaElement.paused&&setTimeout(function(){var a=g.mediaElement.renderer.play();void 0!==a&&a["catch"](function(){g.mediaElement.renderer.paused||g.mediaElement.renderer.pause()})},150)})}else g.mediaElement.renderer[a](b)}catch(d){g.mediaElement.generateError(d,t)}},J=function(a){g.mediaElement[a]=function(){for(var b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];return void 0!==g.mediaElement.renderer&&null!==g.mediaElement.renderer&&"function"==typeof g.mediaElement.renderer[a]&&(g.mediaElement.promises.length?Promise.all(g.mediaElement.promises).then(function(){I(a,c)})["catch"](function(a){g.mediaElement.generateError(a,t)}):I(a,c)),null}};E(g.mediaElement,"src",G,H),g.mediaElement.getSrc=G,g.mediaElement.setSrc=H;for(var K=0,L=C.length;L>K;K++)F(C[K]);for(var M=0,N=D.length;N>M;M++)J(D[M]);return g.mediaElement.addEventListener=function(a,b){g.mediaElement.events[a]=g.mediaElement.events[a]||[],g.mediaElement.events[a].push(b)},g.mediaElement.removeEventListener=function(a,b){if(!a)return g.mediaElement.events={},!0;var c=g.mediaElement.events[a];if(!c)return!0;if(!b)return g.mediaElement.events[a]=[],!0;for(var d=0;d<c.length;d++)if(c[d]===b)return g.mediaElement.events[a].splice(d,1),!0;return!1},g.mediaElement.dispatchEvent=function(a){var b=g.mediaElement.events[a.type];if(b)for(var c=0;c<b.length;c++)b[c].apply(null,[a])},t.length&&(g.mediaElement.src=t),g.mediaElement.promises.length?Promise.all(g.mediaElement.promises).then(function(){g.mediaElement.options.success&&g.mediaElement.options.success(g.mediaElement,g.mediaElement.originalNode)})["catch"](function(){k&&g.mediaElement.options.error&&g.mediaElement.options.error(g.mediaElement,g.mediaElement.originalNode)}):(g.mediaElement.options.success&&g.mediaElement.options.success(g.mediaElement,g.mediaElement.originalNode),k&&g.mediaElement.options.error&&g.mediaElement.options.error(g.mediaElement,g.mediaElement.originalNode)),g.mediaElement};h["default"].MediaElement=q,l["default"].MediaElement=q,c["default"]=q},{16:16,18:18,19:19,2:2,3:3,7:7,8:8}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a(3),f=d(e),g={};g.version="4.2.6",g.html5media={properties:["volume","src","currentTime","muted","duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable","currentSrc","preload","bufferedBytes","bufferedTime","initialTime","startOffsetTime","defaultPlaybackRate","playbackRate","played","autoplay","loop","controls"],readOnlyProperties:["duration","paused","ended","buffered","error","networkState","readyState","seeking","seekable"],methods:["load","play","pause","canPlayType"],events:["loadstart","durationchange","loadedmetadata","loadeddata","progress","canplay","canplaythrough","suspend","abort","error","emptied","stalled","play","playing","pause","waiting","seeking","seeked","timeupdate","ended","ratechange","volumechange"],mediaTypes:["audio/mp3","audio/ogg","audio/oga","audio/wav","audio/x-wav","audio/wave","audio/x-pn-wav","audio/mpeg","audio/mp4","video/mp4","video/webm","video/ogg","video/ogv"]},f["default"].mejs=g,c["default"]=g},{3:3}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.renderer=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a(7),i=d(h),j=function(){function a(){e(this,a),this.renderers={},this.order=[]}return g(a,[{key:"add",value:function(a){if(void 0===a.name)throw new TypeError("renderer must contain at least `name` property");this.renderers[a.name]=a,this.order.push(a.name)}},{key:"select",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=b.length;if(b=b.length?b:this.order,!c){var d=[/^(html5|native)/i,/^flash/i,/iframe$/i],e=function(a){for(var b=0,c=d.length;c>b;b++)if(d[b].test(a))return b;return d.length};b.sort(function(a,b){return e(a)-e(b)})}for(var f=0,g=b.length;g>f;f++){var h=b[f],i=this.renderers[h];if(null!==i&&void 0!==i)for(var j=0,k=a.length;k>j;j++)if("function"==typeof i.canPlayType&&"string"==typeof a[j].type&&i.canPlayType(a[j].type))return{rendererName:i.name,src:a[j].src}}return null}},{key:"order",set:function(a){if(!Array.isArray(a))throw new TypeError("order must be an array of strings.");this._order=a},get:function(){return this._order}},{key:"renderers",set:function(a){if(null!==a&&"object"!==("undefined"==typeof a?"undefined":f(a)))throw new TypeError("renderers must be an array of objects.");this._renderers=a},get:function(){return this._renderers}}]),a}(),k=c.renderer=new j;i["default"].Renderers=k},{7:7}],9:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.EN={"mejs.plural-form":1,"mejs.download-file":"Download File","mejs.install-flash":"You are using a browser that does not have Flash player enabled or installed. Please turn on your Flash player plugin or download the latest version from https://get.adobe.com/flashplayer/","mejs.fullscreen":"Fullscreen","mejs.play":"Play","mejs.pause":"Pause","mejs.time-slider":"Time Slider","mejs.time-help-text":"Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.","mejs.live-broadcast":"Live Broadcast","mejs.volume-help-text":"Use Up/Down Arrow keys to increase or decrease volume.","mejs.unmute":"Unmute","mejs.mute":"Mute","mejs.volume-slider":"Volume Slider","mejs.video-player":"Video Player","mejs.audio-player":"Audio Player","mejs.captions-subtitles":"Captions/Subtitles","mejs.captions-chapters":"Chapters","mejs.none":"None","mejs.afrikaans":"Afrikaans","mejs.albanian":"Albanian","mejs.arabic":"Arabic","mejs.belarusian":"Belarusian","mejs.bulgarian":"Bulgarian","mejs.catalan":"Catalan","mejs.chinese":"Chinese","mejs.chinese-simplified":"Chinese (Simplified)","mejs.chinese-traditional":"Chinese (Traditional)","mejs.croatian":"Croatian","mejs.czech":"Czech","mejs.danish":"Danish","mejs.dutch":"Dutch","mejs.english":"English","mejs.estonian":"Estonian","mejs.filipino":"Filipino","mejs.finnish":"Finnish","mejs.french":"French","mejs.galician":"Galician","mejs.german":"German","mejs.greek":"Greek","mejs.haitian-creole":"Haitian Creole","mejs.hebrew":"Hebrew","mejs.hindi":"Hindi","mejs.hungarian":"Hungarian","mejs.icelandic":"Icelandic","mejs.indonesian":"Indonesian","mejs.irish":"Irish","mejs.italian":"Italian","mejs.japanese":"Japanese","mejs.korean":"Korean","mejs.latvian":"Latvian","mejs.lithuanian":"Lithuanian","mejs.macedonian":"Macedonian","mejs.malay":"Malay","mejs.maltese":"Maltese","mejs.norwegian":"Norwegian","mejs.persian":"Persian","mejs.polish":"Polish","mejs.portuguese":"Portuguese","mejs.romanian":"Romanian","mejs.russian":"Russian","mejs.serbian":"Serbian","mejs.slovak":"Slovak","mejs.slovenian":"Slovenian","mejs.spanish":"Spanish","mejs.swahili":"Swahili","mejs.swedish":"Swedish","mejs.tagalog":"Tagalog","mejs.thai":"Thai","mejs.turkish":"Turkish","mejs.ukrainian":"Ukrainian","mejs.vietnamese":"Vietnamese","mejs.welsh":"Welsh","mejs.yiddish":"Yiddish"}},{}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a(3),g=d(f),h=a(7),i=d(h),j=a(8),k=a(18),l=a(19),m=a(16),n=a(17),o={promise:null,load:function(a){return"undefined"!=typeof dashjs?o.promise=new Promise(function(a){a()}).then(function(){o._createPlayer(a)}):(a.options.path="string"==typeof a.options.path?a.options.path:"https://cdn.dashjs.org/latest/dash.all.min.js",o.promise=o.promise||n.loadScript(a.options.path),o.promise.then(function(){o._createPlayer(a)})),o.promise},_createPlayer:function(a){var b=dashjs.MediaPlayer().create();return g["default"]["__ready__"+a.id](b),b}},p={name:"native_dash",options:{prefix:"native_dash",dash:{path:"https://cdn.dashjs.org/latest/dash.all.min.js",debug:!1,drm:{},robustnessLevel:""}},canPlayType:function(a){return m.HAS_MSE&&["application/dash+xml"].indexOf(a.toLowerCase())>-1},create:function(a,b,c){var d=a.originalNode,f=a.id+"_"+b.prefix,h=d.autoplay,l=d.children,m=null,n=null;d.removeAttribute("type");for(var p=0,q=l.length;q>p;p++)l[p].removeAttribute("type");m=d.cloneNode(!0),b=Object.assign(b,a.options);for(var r=i["default"].html5media.properties,s=i["default"].html5media.events.concat(["click","mouseover","mouseout"]),t=function(b){if("error"!==b.type){var c=k.createEvent(b.type,a);a.dispatchEvent(c)}},u=function(a){var c=""+a.substring(0,1).toUpperCase()+a.substring(1);m["get"+c]=function(){return null!==n?m[a]:null},m["set"+c]=function(c){if(-1===i["default"].html5media.readOnlyProperties.indexOf(a))if("src"===a){var d="object"===("undefined"==typeof c?"undefined":e(c))&&c.src?c.src:c;if(m[a]=d,null!==n){n.reset();for(var g=0,j=s.length;j>g;g++)m.removeEventListener(s[g],t);n=o._createPlayer({options:b.dash,id:f}),c&&"object"===("undefined"==typeof c?"undefined":e(c))&&"object"===e(c.drm)&&(n.setProtectionData(c.drm),k.isString(b.dash.robustnessLevel)&&b.dash.robustnessLevel&&n.getProtectionController().setRobustnessLevel(b.dash.robustnessLevel)),n.attachSource(d),h&&n.play()}}else m[a]=c}},v=0,w=r.length;w>v;v++)u(r[v]);if(g["default"]["__ready__"+f]=function(c){a.dashPlayer=n=c;for(var d=dashjs.MediaPlayer.events,f=function(a){"loadedmetadata"===a&&(n.getDebug().setLogToBrowserConsole(b.dash.debug),n.initialize(),n.setScheduleWhilePaused(!1),n.setFastSwitchEnabled(!0),n.attachView(m),n.setAutoPlay(!1),"object"!==e(b.dash.drm)||i["default"].Utils.isObjectEmpty(b.dash.drm)||(n.setProtectionData(b.dash.drm),k.isString(b.dash.robustnessLevel)&&b.dash.robustnessLevel&&n.getProtectionController().setRobustnessLevel(b.dash.robustnessLevel)),n.attachSource(m.getSrc())),m.addEventListener(a,t)},g=0,h=s.length;h>g;g++)f(s[g]);var j=function(b,c){if("error"===b.toLowerCase())a.generateError(c.message,m.src);else{var d=k.createEvent(b,a);d.data=c,a.dispatchEvent(d)}};for(var l in d)d.hasOwnProperty(l)&&n.on(d[l],function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];return j(a.type,c)})},c&&c.length>0)for(var x=0,y=c.length;y>x;x++)if(j.renderer.renderers[b.prefix].canPlayType(c[x].type)){m.setAttribute("src",c[x].src),"undefined"!=typeof c[x].drm&&(b.dash.drm=c[x].drm);break}m.setAttribute("id",f),d.parentNode.insertBefore(m,d),d.autoplay=!1,d.style.display="none",m.setSize=function(a,b){return m.style.width=a+"px",m.style.height=b+"px",m},m.hide=function(){return m.pause(),m.style.display="none",m},m.show=function(){return m.style.display="",m},m.destroy=function(){null!==n&&n.reset()};var z=k.createEvent("rendererready",m);return a.dispatchEvent(z),a.promises.push(o.load({options:b.dash,id:f})),m}};l.typeChecks.push(function(a){return~a.toLowerCase().indexOf(".mpd")?"application/dash+xml":null}),j.renderer.add(p)},{16:16,17:17,18:18,19:19,3:3,7:7,8:8}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c.PluginDetector=void 0;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a(3),g=d(f),h=a(2),i=d(h),j=a(7),k=d(j),l=a(5),m=d(l),n=a(8),o=a(18),p=a(16),q=a(19),r=c.PluginDetector={plugins:[],hasPluginVersion:function(a,b){var c=r.plugins[a];return b[1]=b[1]||0,b[2]=b[2]||0,c[0]>b[0]||c[0]===b[0]&&c[1]>b[1]||c[0]===b[0]&&c[1]===b[1]&&c[2]>=b[2]},addPlugin:function(a,b,c,d,e){r.plugins[a]=r.detectPlugin(b,c,d,e)},detectPlugin:function(a,b,c,d){var f=[0,0,0],h=void 0,i=void 0;if(null!==p.NAV.plugins&&void 0!==p.NAV.plugins&&"object"===e(p.NAV.plugins[a])){if(h=p.NAV.plugins[a].description,h&&("undefined"==typeof p.NAV.mimeTypes||!p.NAV.mimeTypes[b]||p.NAV.mimeTypes[b].enabledPlugin)){f=h.replace(a,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".");for(var j=0,k=f.length;k>j;j++)f[j]=parseInt(f[j].match(/\d+/),10)}}else if(void 0!==g["default"].ActiveXObject)try{i=new ActiveXObject(c),i&&(f=d(i))}catch(l){}return f}};r.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(a){var b=[],c=a.GetVariable("$version");return c&&(c=c.split(" ")[1].split(","),b=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]),b});var s={create:function(a,b,c){var d={},e=!1;d.options=b,d.id=a.id+"_"+d.options.prefix,d.mediaElement=a,d.flashState={},d.flashApi=null,d.flashApiStack=[];for(var f=k["default"].html5media.properties,h=function(a){d.flashState[a]=null;var b=""+a.substring(0,1).toUpperCase()+a.substring(1);d["get"+b]=function(){if(null!==d.flashApi){if("function"==typeof d.flashApi["get_"+a]){var b=d.flashApi["get_"+a]();return"buffered"===a?{start:function(){return 0},end:function(){return b},length:1}:b}return null}return null},d["set"+b]=function(b){if("src"===a&&(b=q.absolutizeUrl(b)),null!==d.flashApi&&void 0!==d.flashApi["set_"+a])try{d.flashApi["set_"+a](b)}catch(c){}else d.flashApiStack.push({type:"set",propName:a,value:b})}},j=0,l=f.length;l>j;j++)h(f[j]);
var r=k["default"].html5media.methods,s=function(a){d[a]=function(){if(e)if(null!==d.flashApi){if(d.flashApi["fire_"+a])try{d.flashApi["fire_"+a]()}catch(b){}}else d.flashApiStack.push({type:"call",methodName:a})}};r.push("stop");for(var t=0,u=r.length;u>t;t++)s(r[t]);for(var v=["rendererready"],w=0,x=v.length;x>w;w++){var y=o.createEvent(v[w],d);a.dispatchEvent(y)}g["default"]["__ready__"+d.id]=function(){if(d.flashReady=!0,d.flashApi=i["default"].getElementById("__"+d.id),d.flashApiStack.length)for(var a=0,b=d.flashApiStack.length;b>a;a++){var c=d.flashApiStack[a];if("set"===c.type){var e=c.propName,f=""+e.substring(0,1).toUpperCase()+e.substring(1);d["set"+f](c.value)}else"call"===c.type&&d[c.methodName]()}},g["default"]["__event__"+d.id]=function(a,b){var c=o.createEvent(a,d);if(b)try{c.data=JSON.parse(b),c.details.data=JSON.parse(b)}catch(e){c.message=b}d.mediaElement.dispatchEvent(c)},d.flashWrapper=i["default"].createElement("div"),-1===["always","sameDomain"].indexOf(d.options.shimScriptAccess)&&(d.options.shimScriptAccess="sameDomain");var z=a.originalNode.autoplay,A=["uid="+d.id,"autoplay="+z,"allowScriptAccess="+d.options.shimScriptAccess,"preload="+(a.originalNode.getAttribute("preload")||"")],B=null!==a.originalNode&&"video"===a.originalNode.tagName.toLowerCase(),C=B?a.originalNode.height:1,D=B?a.originalNode.width:1;a.originalNode.getAttribute("src")&&A.push("src="+a.originalNode.getAttribute("src")),d.options.enablePseudoStreaming===!0&&(A.push("pseudostreamstart="+d.options.pseudoStreamingStartQueryParam),A.push("pseudostreamtype="+d.options.pseudoStreamingType)),a.appendChild(d.flashWrapper),a.originalNode.style.display="none";var E=[];if(p.IS_IE||p.IS_EDGE){var F=i["default"].createElement("div");d.flashWrapper.appendChild(F),E=p.IS_EDGE?['type="application/x-shockwave-flash"','data="'+d.options.pluginPath+d.options.filename+'"','id="__'+d.id+'"','width="'+D+'"','height="'+C+"'\""]:['classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"','codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"','id="__'+d.id+'"','width="'+D+'"','height="'+C+'"'],B||E.push('style="clip: rect(0 0 0 0); position: absolute;"'),F.outerHTML="<object "+E.join(" ")+">"+('<param name="movie" value="'+d.options.pluginPath+d.options.filename+"?x="+new Date+'" />')+('<param name="flashvars" value="'+A.join("&amp;")+'" />')+'<param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" />'+('<param name="allowScriptAccess" value="'+d.options.shimScriptAccess+'" />')+'<param name="allowFullScreen" value="true" />'+("<div>"+m["default"].t("mejs.install-flash")+"</div>")+"</object>"}else E=['id="__'+d.id+'"','name="__'+d.id+'"','play="true"','loop="false"','quality="high"','bgcolor="#000000"','wmode="transparent"','allowScriptAccess="'+d.options.shimScriptAccess+'"','allowFullScreen="true"','type="application/x-shockwave-flash"','pluginspage="//www.macromedia.com/go/getflashplayer"','src="'+d.options.pluginPath+d.options.filename+'"','flashvars="'+A.join("&")+'"'],B?(E.push('width="'+D+'"'),E.push('height="'+C+'"')):E.push('style="position: fixed; left: -9999em; top: -9999em;"'),d.flashWrapper.innerHTML="<embed "+E.join(" ")+">";if(d.flashNode=d.flashWrapper.lastChild,d.hide=function(){e=!1,B&&(d.flashNode.style.display="none")},d.show=function(){e=!0,B&&(d.flashNode.style.display="")},d.setSize=function(a,b){d.flashNode.style.width=a+"px",d.flashNode.style.height=b+"px",null!==d.flashApi&&"function"==typeof d.flashApi.fire_setSize&&d.flashApi.fire_setSize(a,b)},d.destroy=function(){d.flashNode.remove()},c&&c.length>0)for(var G=0,H=c.length;H>G;G++)if(n.renderer.renderers[b.prefix].canPlayType(c[G].type)){d.setSrc(c[G].src);break}return d}},t=r.hasPluginVersion("flash",[10,0,0]);if(t){q.typeChecks.push(function(a){return a=a.toLowerCase(),a.startsWith("rtmp")?~a.indexOf(".mp3")?"audio/rtmp":"video/rtmp":/\.og(a|g)/i.test(a)?"audio/ogg":~a.indexOf(".m3u8")?"application/x-mpegURL":~a.indexOf(".mpd")?"application/dash+xml":~a.indexOf(".flv")?"video/flv":null});var u={name:"flash_video",options:{prefix:"flash_video",filename:"mediaelement-flash-video.swf",enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",pseudoStreamingType:"byte"},canPlayType:function(a){return~["video/mp4","video/rtmp","audio/rtmp","rtmp/mp4","audio/mp4","video/flv","video/x-flv"].indexOf(a.toLowerCase())},create:s.create};n.renderer.add(u);var v={name:"flash_hls",options:{prefix:"flash_hls",filename:"mediaelement-flash-video-hls.swf"},canPlayType:function(a){return~["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(a.toLowerCase())},create:s.create};n.renderer.add(v);var w={name:"flash_dash",options:{prefix:"flash_dash",filename:"mediaelement-flash-video-mdash.swf"},canPlayType:function(a){return~["application/dash+xml"].indexOf(a.toLowerCase())},create:s.create};n.renderer.add(w);var x={name:"flash_audio",options:{prefix:"flash_audio",filename:"mediaelement-flash-audio.swf"},canPlayType:function(a){return~["audio/mp3"].indexOf(a.toLowerCase())},create:s.create};n.renderer.add(x);var y={name:"flash_audio_ogg",options:{prefix:"flash_audio_ogg",filename:"mediaelement-flash-audio-ogg.swf"},canPlayType:function(a){return~["audio/ogg","audio/oga","audio/ogv"].indexOf(a.toLowerCase())},create:s.create};n.renderer.add(y)}},{16:16,18:18,19:19,2:2,3:3,5:5,7:7,8:8}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a(3),g=d(f),h=a(7),i=d(h),j=a(8),k=a(18),l=a(16),m=a(19),n=a(17),o={promise:null,load:function(a){return"undefined"!=typeof flvjs?o.promise=new Promise(function(a){a()}).then(function(){o._createPlayer(a)}):(a.options.path="string"==typeof a.options.path?a.options.path:"https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.3.3/flv.min.js",o.promise=o.promise||n.loadScript(a.options.path),o.promise.then(function(){o._createPlayer(a)})),o.promise},_createPlayer:function(a){flvjs.LoggingControl.enableDebug=a.options.debug,flvjs.LoggingControl.enableVerbose=a.options.debug;var b=flvjs.createPlayer(a.options,a.configs);return g["default"]["__ready__"+a.id](b),b}},p={name:"native_flv",options:{prefix:"native_flv",flv:{path:"https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.3.3/flv.min.js",cors:!0,debug:!1}},canPlayType:function(a){return l.HAS_MSE&&["video/x-flv","video/flv"].indexOf(a.toLowerCase())>-1},create:function(a,b,c){var d=a.originalNode,f=a.id+"_"+b.prefix,h=null,l=null;h=d.cloneNode(!0),b=Object.assign(b,a.options);for(var m=i["default"].html5media.properties,n=i["default"].html5media.events.concat(["click","mouseover","mouseout"]),p=function(b){if("error"!==b.type){var c=k.createEvent(b.type,a);a.dispatchEvent(c)}},q=function(a){var c=""+a.substring(0,1).toUpperCase()+a.substring(1);h["get"+c]=function(){return null!==l?h[a]:null},h["set"+c]=function(c){if(-1===i["default"].html5media.readOnlyProperties.indexOf(a))if("src"===a){if(h[a]="object"===("undefined"==typeof c?"undefined":e(c))&&c.src?c.src:c,null!==l){var d={};d.type="flv",d.url=c,d.cors=b.flv.cors,d.debug=b.flv.debug,d.path=b.flv.path;var g=b.flv.configs;l.destroy();for(var j=0,k=n.length;k>j;j++)h.removeEventListener(n[j],p);l=o._createPlayer({options:d,configs:g,id:f}),l.attachMediaElement(h),l.load()}}else h[a]=c}},r=0,s=m.length;s>r;r++)q(m[r]);if(g["default"]["__ready__"+f]=function(b){a.flvPlayer=l=b;for(var c=flvjs.Events,d=function(a){"loadedmetadata"===a&&(l.unload(),l.detachMediaElement(),l.attachMediaElement(h),l.load()),h.addEventListener(a,p)},e=0,f=n.length;f>e;e++)d(n[e]);var g=function(b,c){if("error"===b){var d=c[0]+": "+c[1]+" "+c[2].msg;a.generateError(d,h.src)}else{var e=k.createEvent(b,a);e.data=c,a.dispatchEvent(e)}},i=function(a){c.hasOwnProperty(a)&&l.on(c[a],function(){for(var b=arguments.length,d=Array(b),e=0;b>e;e++)d[e]=arguments[e];return g(c[a],d)})};for(var j in c)i(j)},c&&c.length>0)for(var t=0,u=c.length;u>t;t++)if(j.renderer.renderers[b.prefix].canPlayType(c[t].type)){h.setAttribute("src",c[t].src);break}h.setAttribute("id",f),d.parentNode.insertBefore(h,d),d.autoplay=!1,d.style.display="none";var v={};v.type="flv",v.url=h.src,v.cors=b.flv.cors,v.debug=b.flv.debug,v.path=b.flv.path;var w=b.flv.configs;h.setSize=function(a,b){return h.style.width=a+"px",h.style.height=b+"px",h},h.hide=function(){return null!==l&&l.pause(),h.style.display="none",h},h.show=function(){return h.style.display="",h},h.destroy=function(){null!==l&&l.destroy()};var x=k.createEvent("rendererready",h);return a.dispatchEvent(x),a.promises.push(o.load({options:v,configs:w,id:f})),h}};m.typeChecks.push(function(a){return~a.toLowerCase().indexOf(".flv")?"video/flv":null}),j.renderer.add(p)},{16:16,17:17,18:18,19:19,3:3,7:7,8:8}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a(3),g=d(f),h=a(7),i=d(h),j=a(8),k=a(18),l=a(16),m=a(19),n=a(17),o={promise:null,load:function(a){return"undefined"!=typeof Hls?o.promise=new Promise(function(a){a()}).then(function(){o._createPlayer(a)}):(a.options.path="string"==typeof a.options.path?a.options.path:"https://cdnjs.cloudflare.com/ajax/libs/hls.js/0.8.2/hls.min.js",o.promise=o.promise||n.loadScript(a.options.path),o.promise.then(function(){o._createPlayer(a)})),o.promise},_createPlayer:function(a){var b=new Hls(a.options);return g["default"]["__ready__"+a.id](b),b}},p={name:"native_hls",options:{prefix:"native_hls",hls:{path:"https://cdnjs.cloudflare.com/ajax/libs/hls.js/0.8.2/hls.min.js",autoStartLoad:!1,debug:!1}},canPlayType:function(a){return l.HAS_MSE&&["application/x-mpegurl","application/vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(a.toLowerCase())>-1},create:function(a,b,c){var d=a.originalNode,f=a.id+"_"+b.prefix,h=d.getAttribute("preload"),l=d.autoplay,m=null,n=null,p=0,q=c.length;n=d.cloneNode(!0),b=Object.assign(b,a.options),b.hls.autoStartLoad=h&&"none"!==h||l;for(var r=i["default"].html5media.properties,s=i["default"].html5media.events.concat(["click","mouseover","mouseout"]),t=function(b){if("error"!==b.type){var c=k.createEvent(b.type,a);a.dispatchEvent(c)}},u=function(a){var c=""+a.substring(0,1).toUpperCase()+a.substring(1);n["get"+c]=function(){return null!==m?n[a]:null},n["set"+c]=function(c){if(-1===i["default"].html5media.readOnlyProperties.indexOf(a))if("src"===a){if(n[a]="object"===("undefined"==typeof c?"undefined":e(c))&&c.src?c.src:c,null!==m){m.destroy();for(var d=0,g=s.length;g>d;d++)n.removeEventListener(s[d],t);m=o._createPlayer({options:b.hls,id:f}),m.loadSource(c),m.attachMedia(n)}}else n[a]=c}},v=0,w=r.length;w>v;v++)u(r[v]);if(g["default"]["__ready__"+f]=function(b){a.hlsPlayer=m=b;for(var d=Hls.Events,e=function(b){if("loadedmetadata"===b){var c=a.originalNode.src;m.detachMedia(),m.loadSource(c),m.attachMedia(n)}n.addEventListener(b,t)},f=0,g=s.length;g>f;f++)e(s[f]);var h=void 0,i=void 0,j=function(b,d){if("hlsError"===b){if(d=d[1],d.fatal)switch(d.type){case"mediaError":var e=(new Date).getTime();if(!h||e-h>3e3)h=(new Date).getTime(),m.recoverMediaError();else if(!i||e-i>3e3)i=(new Date).getTime(),m.swapAudioCodec(),m.recoverMediaError();else{var f="Cannot recover, last media error recovery failed";a.generateError(f,n.src)}break;case"networkError":if("manifestLoadError"===d.details)q>p&&(n.setSrc(c[p++].src),n.load(),n.play());else{var g="Network error";a.generateError(g,c)}break;default:m.destroy()}}else{var j=k.createEvent(b,a);j.data=d,a.dispatchEvent(j)}},l=function(a){d.hasOwnProperty(a)&&m.on(d[a],function(){for(var b=arguments.length,c=Array(b),e=0;b>e;e++)c[e]=arguments[e];return j(d[a],c)})};for(var o in d)l(o)},q>0)for(;q>p;p++)if(j.renderer.renderers[b.prefix].canPlayType(c[p].type)){n.setAttribute("src",c[p].src);break}"auto"===h||l||(n.addEventListener("play",function(){null!==m&&m.startLoad()}),n.addEventListener("pause",function(){null!==m&&m.stopLoad()})),n.setAttribute("id",f),d.parentNode.insertBefore(n,d),d.autoplay=!1,d.style.display="none",n.setSize=function(a,b){return n.style.width=a+"px",n.style.height=b+"px",n},n.hide=function(){return n.pause(),n.style.display="none",n},n.show=function(){return n.style.display="",n},n.destroy=function(){null!==m&&(m.stopLoad(),m.destroy())};var x=k.createEvent("rendererready",n);return a.dispatchEvent(x),a.promises.push(o.load({options:b.hls,id:f})),n}};m.typeChecks.push(function(a){return~a.toLowerCase().indexOf(".m3u8")?"application/x-mpegURL":null}),j.renderer.add(p)},{16:16,17:17,18:18,19:19,3:3,7:7,8:8}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a(3),f=d(e),g=a(2),h=d(g),i=a(7),j=d(i),k=a(8),l=a(18),m=a(16),n={name:"html5",options:{prefix:"html5"},canPlayType:function(a){var b=h["default"].createElement("video");return m.IS_ANDROID&&/\/mp(3|4)$/i.test(a)||~["application/x-mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/hls","video/hls"].indexOf(a.toLowerCase())&&m.SUPPORTS_NATIVE_HLS?"yes":b.canPlayType?b.canPlayType(a.toLowerCase()).replace(/no/,""):""},create:function(a,b,c){var d=a.id+"_"+b.prefix,e=!1,f=null;void 0===a.originalNode||null===a.originalNode?(f=h["default"].createElement("audio"),a.appendChild(f)):f=a.originalNode,f.setAttribute("id",d);for(var g=j["default"].html5media.properties,i=function(a){var b=""+a.substring(0,1).toUpperCase()+a.substring(1);f["get"+b]=function(){return f[a]},f["set"+b]=function(b){-1===j["default"].html5media.readOnlyProperties.indexOf(a)&&(f[a]=b)}},m=0,n=g.length;n>m;m++)i(g[m]);for(var o=j["default"].html5media.events.concat(["click","mouseover","mouseout"]),p=function(b){f.addEventListener(b,function(b){if(e){var c=l.createEvent(b.type,b.target);a.dispatchEvent(c)}})},q=0,r=o.length;r>q;q++)p(o[q]);f.setSize=function(a,b){return f.style.width=a+"px",f.style.height=b+"px",f},f.hide=function(){return e=!1,f.style.display="none",f},f.show=function(){return e=!0,f.style.display="",f};var s=0,t=c.length;if(t>0)for(;t>s;s++)if(k.renderer.renderers[b.prefix].canPlayType(c[s].type)){f.setAttribute("src",c[s].src);break}f.addEventListener("error",function(b){4===b.target.error.code&&e&&(t>s?(f.src=c[s++].src,f.load(),f.play()):a.generateError("Media error: Format(s) not supported or source(s) not found",c))});var u=l.createEvent("rendererready",f);return a.dispatchEvent(u),f}};f["default"].HtmlMediaElement=j["default"].HtmlMediaElement=n,k.renderer.add(n)},{16:16,18:18,2:2,3:3,7:7,8:8}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a(3),f=d(e),g=a(2),h=d(g),i=a(7),j=d(i),k=a(8),l=a(18),m=a(19),n=a(17),o={isIframeStarted:!1,isIframeLoaded:!1,iframeQueue:[],enqueueIframe:function(a){o.isLoaded="undefined"!=typeof YT&&YT.loaded,o.isLoaded?o.createIframe(a):(o.loadIframeApi(),o.iframeQueue.push(a))},loadIframeApi:function(){o.isIframeStarted||(n.loadScript("https://www.youtube.com/player_api"),o.isIframeStarted=!0)},iFrameReady:function(){for(o.isLoaded=!0,o.isIframeLoaded=!0;o.iframeQueue.length>0;){var a=o.iframeQueue.pop();o.createIframe(a)}},createIframe:function(a){return new YT.Player(a.containerId,a)},getYouTubeId:function(a){var b="";a.indexOf("?")>0?(b=o.getYouTubeIdFromParam(a),""===b&&(b=o.getYouTubeIdFromUrl(a))):b=o.getYouTubeIdFromUrl(a);var c=b.substring(b.lastIndexOf("/")+1);return b=c.split("?"),b[0]},getYouTubeIdFromParam:function(a){if(void 0===a||null===a||!a.trim().length)return null;for(var b=a.split("?"),c=b[1].split("&"),d="",e=0,f=c.length;f>e;e++){var g=c[e].split("=");if("v"===g[0]){d=g[1];break}}return d},getYouTubeIdFromUrl:function(a){if(void 0===a||null===a||!a.trim().length)return null;var b=a.split("?");return a=b[0],a.substring(a.lastIndexOf("/")+1)},getYouTubeNoCookieUrl:function(a){if(void 0===a||null===a||!a.trim().length||-1===a.indexOf("//www.youtube"))return a;var b=a.split("/");return b[2]=b[2].replace(".com","-nocookie.com"),b.join("/")}},p={name:"youtube_iframe",options:{prefix:"youtube_iframe",youtube:{autoplay:0,controls:0,disablekb:1,end:0,loop:0,modestbranding:0,playsinline:0,rel:0,showinfo:0,start:0,iv_load_policy:3,nocookie:!1,imageQuality:null}},canPlayType:function(a){return~["video/youtube","video/x-youtube"].indexOf(a.toLowerCase())},create:function(a,b,c){var d={},e=[],g=4,i=null,k=!0,m=!1,n=null,p=1;d.options=b,d.id=a.id+"_"+b.prefix,d.mediaElement=a;for(var q=j["default"].html5media.properties,r=function(b){var c=""+b.substring(0,1).toUpperCase()+b.substring(1);d["get"+c]=function(){if(null!==i){var a=null;switch(b){case"currentTime":return i.getCurrentTime();case"duration":return i.getDuration();case"volume":return p=i.getVolume()/100;case"paused":return k;case"ended":return m;case"muted":return i.isMuted();case"buffered":var c=i.getVideoLoadedFraction(),d=i.getDuration();return{start:function(){return 0},end:function(){return c*d},length:1};case"src":return i.getVideoUrl();case"readyState":return g}return a}return null},d["set"+c]=function(c){if(null!==i)switch(b){case"src":var f="string"==typeof c?c:c[0].src,g=o.getYouTubeId(f);a.originalNode.autoplay?i.loadVideoById(g):i.cueVideoById(g);break;case"currentTime":i.seekTo(c);break;case"muted":c?i.mute():i.unMute(),setTimeout(function(){var b=l.createEvent("volumechange",d);a.dispatchEvent(b)},50);break;case"volume":p=c,i.setVolume(100*c),setTimeout(function(){var b=l.createEvent("volumechange",d);a.dispatchEvent(b)},50);break;case"readyState":var h=l.createEvent("canplay",d);a.dispatchEvent(h)}else e.push({type:"set",propName:b,value:c})}},s=0,t=q.length;t>s;s++)r(q[s]);for(var u=j["default"].html5media.methods,v=function(a){d[a]=function(){if(null!==i)switch(a){case"play":return k=!1,i.playVideo();case"pause":return k=!0,i.pauseVideo();case"load":return null}else e.push({type:"call",methodName:a})}},w=0,x=u.length;x>w;w++)v(u[w]);var y=h["default"].createElement("div");y.id=d.id,d.options.youtube.nocookie&&(a.originalNode.src=o.getYouTubeNoCookieUrl(c[0].src)),a.originalNode.parentNode.insertBefore(y,a.originalNode),a.originalNode.style.display="none";var z="audio"===a.originalNode.tagName.toLowerCase(),A=z?"1":a.originalNode.height,B=z?"1":a.originalNode.width,C=o.getYouTubeId(c[0].src),D={id:d.id,containerId:y.id,videoId:C,height:A,width:B,playerVars:Object.assign({controls:0,rel:0,disablekb:1,showinfo:0,modestbranding:0,html5:1,playsinline:0,start:0,end:0,iv_load_policy:3},d.options.youtube),origin:f["default"].location.host,events:{onReady:function(b){if(a.youTubeApi=i=b.target,a.youTubeState={paused:!0,ended:!1},e.length)for(var c=0,f=e.length;f>c;c++){var g=e[c];if("set"===g.type){var h=g.propName,j=""+h.substring(0,1).toUpperCase()+h.substring(1);d["set"+j](g.value)}else"call"===g.type&&d[g.methodName]()}n=i.getIframe(),a.originalNode.getAttribute("muted")&&i.mute();for(var k=["mouseover","mouseout"],m=function(b){var c=l.createEvent(b.type,d);a.dispatchEvent(c)},o=0,p=k.length;p>o;o++)n.addEventListener(k[o],m,!1);for(var q=["rendererready","loadedmetadata","loadeddata","canplay"],r=0,s=q.length;s>r;r++){var t=l.createEvent(q[r],d);a.dispatchEvent(t)}},onStateChange:function(b){var c=[];switch(b.data){case-1:c=["loadedmetadata"],k=!0,m=!1;break;case 0:c=["ended"],k=!1,m=!d.options.youtube.loop,d.options.youtube.loop||d.stopInterval();break;case 1:c=["play","playing"],k=!1,m=!1,d.startInterval();break;case 2:c=["pause"],k=!0,m=!1,d.stopInterval();break;case 3:c=["progress"],m=!1;break;case 5:c=["loadeddata","loadedmetadata","canplay"],k=!0,m=!1}for(var e=0,f=c.length;f>e;e++){var g=l.createEvent(c[e],d);a.dispatchEvent(g)}},onError:function(b){var c=l.createEvent("error",d);c.data=b.data,a.dispatchEvent(c)}}};return z&&(D.playerVars.playsinline=1),a.originalNode.autoplay&&(D.playerVars.autoplay=1),a.originalNode.loop&&(D.playerVars.loop=1),o.enqueueIframe(D),d.onEvent=function(b,c,d){null!==d&&void 0!==d&&(a.youTubeState=d)},d.setSize=function(a,b){null!==i&&i.setSize(a,b)},d.hide=function(){d.stopInterval(),d.pause(),n&&(n.style.display="none")},d.show=function(){n&&(n.style.display="")},d.destroy=function(){i.destroy()},d.interval=null,d.startInterval=function(){d.interval=setInterval(function(){var b=l.createEvent("timeupdate",d);a.dispatchEvent(b)},250)},d.stopInterval=function(){d.interval&&clearInterval(d.interval)},d.getPosterUrl=function(){var c=b.youtube.imageQuality,d=["default","hqdefault","mqdefault","sddefault","maxresdefault"],e=o.getYouTubeId(a.originalNode.src);return c&&d.indexOf(c)>-1&&e?"https://img.youtube.com/vi/"+e+"/"+c+".jpg":""},d}};f["default"].onYouTubePlayerAPIReady=function(){o.iFrameReady()},m.typeChecks.push(function(a){return/\/\/(www\.youtube|youtu\.?be)/i.test(a)?"video/x-youtube":null}),k.renderer.add(p)},{17:17,18:18,19:19,2:2,3:3,7:7,8:8}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c.cancelFullScreen=c.requestFullScreen=c.isFullScreen=c.FULLSCREEN_EVENT_NAME=c.HAS_NATIVE_FULLSCREEN_ENABLED=c.HAS_TRUE_NATIVE_FULLSCREEN=c.HAS_IOS_FULLSCREEN=c.HAS_MS_NATIVE_FULLSCREEN=c.HAS_MOZ_NATIVE_FULLSCREEN=c.HAS_WEBKIT_NATIVE_FULLSCREEN=c.HAS_NATIVE_FULLSCREEN=c.SUPPORTS_NATIVE_HLS=c.SUPPORT_PASSIVE_EVENT=c.SUPPORT_POINTER_EVENTS=c.HAS_MSE=c.IS_STOCK_ANDROID=c.IS_SAFARI=c.IS_FIREFOX=c.IS_CHROME=c.IS_EDGE=c.IS_IE=c.IS_ANDROID=c.IS_IOS=c.IS_IPOD=c.IS_IPHONE=c.IS_IPAD=c.UA=c.NAV=void 0;for(var e=a(3),f=d(e),g=a(2),h=d(g),i=a(7),j=d(i),k=c.NAV=f["default"].navigator,l=c.UA=k.userAgent.toLowerCase(),m=c.IS_IPAD=/ipad/i.test(l)&&!f["default"].MSStream,n=c.IS_IPHONE=/iphone/i.test(l)&&!f["default"].MSStream,o=c.IS_IPOD=/ipod/i.test(l)&&!f["default"].MSStream,p=(c.IS_IOS=/ipad|iphone|ipod/i.test(l)&&!f["default"].MSStream,c.IS_ANDROID=/android/i.test(l)),q=c.IS_IE=/(trident|microsoft)/i.test(k.appName),r=(c.IS_EDGE="msLaunchUri"in k&&!("documentMode"in h["default"])),s=c.IS_CHROME=/chrome/i.test(l),t=c.IS_FIREFOX=/firefox/i.test(l),u=c.IS_SAFARI=/safari/i.test(l)&&!s,v=c.IS_STOCK_ANDROID=/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(l),w=(c.HAS_MSE="MediaSource"in f["default"]),x=(c.SUPPORT_POINTER_EVENTS=function(){var a=h["default"].createElement("x"),b=h["default"].documentElement,c=f["default"].getComputedStyle;if(!("pointerEvents"in a.style))return!1;a.style.pointerEvents="auto",a.style.pointerEvents="x",b.appendChild(a);var d=c&&"auto"===c(a,"").pointerEvents;return a.remove(),!!d}()),y=c.SUPPORT_PASSIVE_EVENT=function(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});f["default"].addEventListener("test",null,b)}catch(c){}return a}(),z=["source","track","audio","video"],A=void 0,B=0,C=z.length;C>B;B++)A=h["default"].createElement(z[B]);var D=c.SUPPORTS_NATIVE_HLS=u||p&&(s||v)||q&&/edge/i.test(l),E=void 0!==A.webkitEnterFullscreen,F=void 0!==A.requestFullscreen;E&&/mac os x 10_5/i.test(l)&&(F=!1,E=!1);var G=void 0!==A.webkitRequestFullScreen,H=void 0!==A.mozRequestFullScreen,I=void 0!==A.msRequestFullscreen,J=G||H||I,K=J,L="",M=void 0,N=void 0,O=void 0;H?K=h["default"].mozFullScreenEnabled:I&&(K=h["default"].msFullscreenEnabled),s&&(E=!1),J&&(G?L="webkitfullscreenchange":H?L="mozfullscreenchange":I&&(L="MSFullscreenChange"),c.isFullScreen=M=function(){return H?h["default"].mozFullScreen:G?h["default"].webkitIsFullScreen:I?null!==h["default"].msFullscreenElement:void 0},c.requestFullScreen=N=function(a){G?a.webkitRequestFullScreen():H?a.mozRequestFullScreen():I&&a.msRequestFullscreen()},c.cancelFullScreen=O=function(){G?h["default"].webkitCancelFullScreen():H?h["default"].mozCancelFullScreen():I&&h["default"].msExitFullscreen()});var P=c.HAS_NATIVE_FULLSCREEN=F,Q=c.HAS_WEBKIT_NATIVE_FULLSCREEN=G,R=c.HAS_MOZ_NATIVE_FULLSCREEN=H,S=c.HAS_MS_NATIVE_FULLSCREEN=I,T=c.HAS_IOS_FULLSCREEN=E,U=c.HAS_TRUE_NATIVE_FULLSCREEN=J,V=c.HAS_NATIVE_FULLSCREEN_ENABLED=K,W=c.FULLSCREEN_EVENT_NAME=L;c.isFullScreen=M,c.requestFullScreen=N,c.cancelFullScreen=O,j["default"].Features=j["default"].Features||{},j["default"].Features.isiPad=m,j["default"].Features.isiPod=o,j["default"].Features.isiPhone=n,j["default"].Features.isiOS=j["default"].Features.isiPhone||j["default"].Features.isiPad,j["default"].Features.isAndroid=p,j["default"].Features.isIE=q,j["default"].Features.isEdge=r,j["default"].Features.isChrome=s,j["default"].Features.isFirefox=t,j["default"].Features.isSafari=u,j["default"].Features.isStockAndroid=v,j["default"].Features.hasMSE=w,j["default"].Features.supportsNativeHLS=D,j["default"].Features.supportsPointerEvents=x,j["default"].Features.supportsPassiveEvent=y,j["default"].Features.hasiOSFullScreen=T,j["default"].Features.hasNativeFullscreen=P,j["default"].Features.hasWebkitNativeFullScreen=Q,j["default"].Features.hasMozNativeFullScreen=R,j["default"].Features.hasMsNativeFullScreen=S,j["default"].Features.hasTrueNativeFullScreen=U,j["default"].Features.nativeFullScreenEnabled=V,j["default"].Features.fullScreenEventName=W,j["default"].Features.isFullScreen=M,j["default"].Features.requestFullScreen=N,j["default"].Features.cancelFullScreen=O},{2:2,3:3,7:7}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return new Promise(function(b,c){var d=p["default"].createElement("script");d.src=a,d.async=!0,d.onload=function(){d.remove(),b()},d.onerror=function(){d.remove(),c()},p["default"].head.appendChild(d)})}function f(a){var b=a.getBoundingClientRect(),c=n["default"].pageXOffset||p["default"].documentElement.scrollLeft,d=n["default"].pageYOffset||p["default"].documentElement.scrollTop;return{top:b.top+d,left:b.left+c}}function g(a,b){v(a,b)?x(a,b):w(a,b)}function h(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,c=arguments[2];a.style.opacity||(a.style.opacity=1);var d=null;n["default"].requestAnimationFrame(function e(f){d=d||f;var g=f-d,h=parseFloat(1-g/b,2);a.style.opacity=0>h?0:h,g>b?c&&"function"==typeof c&&c():n["default"].requestAnimationFrame(e)})}function i(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,c=arguments[2];a.style.opacity||(a.style.opacity=0);var d=null;n["default"].requestAnimationFrame(function e(f){d=d||f;var g=f-d,h=parseFloat(g/b,2);a.style.opacity=h>1?1:h,g>b?c&&"function"==typeof c&&c():n["default"].requestAnimationFrame(e)})}function j(a,b){var c=[];a=a.parentNode.firstChild;do(!b||b(a))&&c.push(a);while(a=a.nextSibling);return c}function k(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function l(a,b,c,d){var e=n["default"].XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),f="application/x-www-form-urlencoded; charset=UTF-8",g=!1,h="*/".concat("*");switch(b){case"text":f="text/plain";break;case"json":f="application/json, text/javascript";break;case"html":f="text/html";break;case"xml":f="application/xml, text/xml"}"application/x-www-form-urlencoded"!==f&&(h=f+", */*; q=0.01"),e&&(e.open("GET",a,!0),e.setRequestHeader("Accept",h),e.onreadystatechange=function(){if(!g&&4===e.readyState)if(200===e.status){g=!0;var a=void 0;switch(b){case"json":a=JSON.parse(e.responseText);break;case"xml":a=e.responseXML;break;default:a=e.responseText}c(a)}else"function"==typeof d&&d(e.status)},e.send())}Object.defineProperty(c,"__esModule",{value:!0}),c.removeClass=c.addClass=c.hasClass=void 0,c.loadScript=e,c.offset=f,c.toggleClass=g,c.fadeOut=h,c.fadeIn=i,c.siblings=j,c.visible=k,c.ajax=l;var m=a(3),n=d(m),o=a(2),p=d(o),q=a(7),r=d(q),s=void 0,t=void 0,u=void 0;"classList"in p["default"].documentElement?(s=function(a,b){return void 0!==a.classList&&a.classList.contains(b)},t=function(a,b){return a.classList.add(b)},u=function(a,b){return a.classList.remove(b)}):(s=function(a,b){return new RegExp("\\b"+b+"\\b").test(a.className)},t=function(a,b){v(a,b)||(a.className+=" "+b)},u=function(a,b){a.className=a.className.replace(new RegExp("\\b"+b+"\\b","g"),"")});var v=c.hasClass=s,w=c.addClass=t,x=c.removeClass=u;r["default"].Utils=r["default"].Utils||{},r["default"].Utils.offset=f,r["default"].Utils.hasClass=v,r["default"].Utils.addClass=w,r["default"].Utils.removeClass=x,r["default"].Utils.toggleClass=g,r["default"].Utils.fadeIn=i,r["default"].Utils.fadeOut=h,r["default"].Utils.siblings=j,r["default"].Utils.visible=k,r["default"].Utils.ajax=l,r["default"].Utils.loadScript=e},{2:2,3:3,7:7}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if("string"!=typeof a)throw new Error("Argument passed must be a string");var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return a.replace(/[&<>"]/g,function(a){return b[a]})}function f(a,b){var c=this,d=arguments,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;if("function"!=typeof a)throw new Error("First argument must be a function");if("number"!=typeof b)throw new Error("Second argument must be a numeric value");var f=void 0;return function(){var g=c,h=d,i=function(){f=null,e||a.apply(g,h)},j=e&&!f;clearTimeout(f),f=setTimeout(i,b),j&&a.apply(g,h)}}function g(a){return Object.getOwnPropertyNames(a).length<=0}function h(a,b){var c=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/,d={d:[],w:[]};return(a||"").split(" ").forEach(function(a){var e=""+a+(b?"."+b:"");e.startsWith(".")?(d.d.push(e),d.w.push(e)):d[c.test(a)?"w":"d"].push(e)}),d.d=d.d.join(" "),d.w=d.w.join(" "),d}function i(a,b){if("string"!=typeof a)throw new Error("Event name must be a string");var c=a.match(/([a-z]+\.([a-z]+))/i),d={target:b};return null!==c&&(a=c[1],d.namespace=c[2]),new window.CustomEvent(a,{detail:d})}function j(a,b){return!!(a&&b&&2&a.compareDocumentPosition(b))}function k(a){return"string"==typeof a}Object.defineProperty(c,"__esModule",{value:!0}),c.escapeHTML=e,c.debounce=f,c.isObjectEmpty=g,c.splitEvents=h,c.createEvent=i,c.isNodeAfter=j,c.isString=k;var l=a(7),m=d(l);m["default"].Utils=m["default"].Utils||{},m["default"].Utils.escapeHTML=e,m["default"].Utils.debounce=f,m["default"].Utils.isObjectEmpty=g,m["default"].Utils.splitEvents=h,m["default"].Utils.createEvent=i,m["default"].Utils.isNodeAfter=j,m["default"].Utils.isString=k},{7:7}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if("string"!=typeof a)throw new Error("`url` argument must be a string");var b=document.createElement("div");return b.innerHTML='<a href="'+m.escapeHTML(a)+'">x</a>',b.firstChild.href}function f(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a&&!b?h(a):b}function g(a){if("string"!=typeof a)throw new Error("`type` argument must be a string");return a&&a.indexOf(";")>-1?a.substr(0,a.indexOf(";")):a}function h(a){if("string"!=typeof a)throw new Error("`url` argument must be a string");for(var b=0,c=n.length;c>b;b++){var d=n[b](a);if(d)return d}var e=i(a),f=j(e),g="video/mp4";return f&&(~["mp4","m4v","ogg","ogv","webm","flv","mpeg","mov"].indexOf(f)?g="video/"+f:~["mp3","oga","wav","mid","midi"].indexOf(f)&&(g="audio/"+f)),g}function i(a){if("string"!=typeof a)throw new Error("`url` argument must be a string");var b=a.split("?")[0],c=b.split("\\").pop().split("/").pop();return~c.indexOf(".")?c.substring(c.lastIndexOf(".")+1):""}function j(a){if("string"!=typeof a)throw new Error("`extension` argument must be a string");switch(a){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return a}}Object.defineProperty(c,"__esModule",{value:!0}),c.typeChecks=void 0,c.absolutizeUrl=e,c.formatType=f,c.getMimeFromType=g,c.getTypeFromFile=h,c.getExtension=i,c.normalizeExtension=j;var k=a(7),l=d(k),m=a(18),n=c.typeChecks=[];
l["default"].Utils=l["default"].Utils||{},l["default"].Utils.typeChecks=n,l["default"].Utils.absolutizeUrl=e,l["default"].Utils.formatType=f,l["default"].Utils.getMimeFromType=g,l["default"].Utils.getTypeFromFile=h,l["default"].Utils.getExtension=i,l["default"].Utils.normalizeExtension=j},{18:18,7:7}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a(2),f=d(e),g=a(4),h=d(g);if(function(a){a.forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=f["default"].createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}return"function"==typeof window.CustomEvent?!1:(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}(),"function"!=typeof Object.assign&&(Object.assign=function(a){if(null===a||void 0===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1,d=arguments.length;d>c;c++){var e=arguments[c];if(null!==e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(b[f]=e[f])}return b}),String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.substr(b,a.length)===a}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){for(var b=(this.document||this.ownerDocument).querySelectorAll(a),c=b.length-1;--c>=0&&b.item(c)!==this;);return c>-1}),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(a){var b=(this.document||this.ownerDocument).querySelectorAll(a),c=void 0,d=this;do for(c=b.length;--c>=0&&b.item(c)!==d;);while(0>c&&(d=d.parentElement));return d}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),/firefox/i.test(navigator.userAgent)){var i=window.getComputedStyle;window.getComputedStyle=function(a,b){var c=i(a,b);return null===c?{getPropertyValue:function(){}}:c}}window.Promise||(window.Promise=h["default"]),function(a){a&&a.prototype&&null===a.prototype.children&&Object.defineProperty(a.prototype,"children",{get:function(){for(var a=0,b=void 0,c=this.childNodes,d=[];b=c[a++];)1===b.nodeType&&d.push(b);return d}})}(window.Node||window.Element)},{2:2,4:4}]},{},[20,6,5,9,14,11,10,12,13,15]),!function(a){"use strict";a.AS||(a.AS={})}(this),function(){"use strict";AS.constant={DEFAULT_PORTRAIT_HEIGHT:1024,DEFAULT_PORTRAIT_WIDTH:768,DEFAULT_LANDSCAPE_HEIGHT:768,DEFAULT_LANDSCAPE_WIDTH:1024,MULTI_VARIANT_WIDTH_TOLERANCE:1.3,PAGE_WIDTH_FIT:"widthfit",PAGE_AUTO_FIT:"autofit",DOUBLE_TAP_THRESHOLD_DURATION:300,ORIENTATION:{LANDSCAPE:"landscape",PORTRAIT:"portrait"}}}(),function(){"use strict";AS.message={PUBLICATION_LOADED:"publication:loaded",ISSUE_NAVIGATE:"issue:navigate",ISSUE_LOADED:"issue:loaded",ISSUE_LOADING_ERROR:"issue:loadingError",ISSUE_UNLOADED:"issue:unloaded",ISSUE_LAYOUT:"issue:layout",VARIANT_CHANGE:"variant:change",PAGE_NAVIGATE:"page:navigate",PAGE_NAVIGATE_NEXT:"page:navigateNext",PAGE_NAVIGATE_PREVIOUS:"page:navigatePrevious",PAGE_LOADED:"page:loaded",PAGE_INITIALISED:"page:initialised",PAGE_FOCUSED:"page:focused",TOGGLE_PAGE_FIT_MODE:"page:fitmode:toggle",PAGE_FIT_MODE_HIDE:"page:fitmode:hide",PAGE_FIT_MODE_UPDATED:"page:fitmode:updated",PAGE_FIT_DID_LAYOUT:"page:fitmode:didLayout",FACING_PAGE_DISPLAY:"page:facing",APPLICATION_START:"app:start",TRACK_EVENT:"app:trackEvent",TRACK_PAGE:"app:trackPage",TOGGLE_FULL_SCREEN:"app:fullscreen:toggle",FULL_SCREEN_ENTER:"app:fullscreen:enter",FULL_SCREEN_EXIT:"app:fullscreen:exit",ZOOM:"app:zoom",AUTO_FIT_PAGEVIEW:"app:autofit:pageview",REFRESH_SCROLL_PAGEVIEW:"app:refreshscroll:pageview",ALERT:"app:alert",TOOLBAR_CLOSE:"app:toolbar:close",TOOLBAR_OPEN:"app:toolbar:open",TOOLBAR_MORE:"app:toolbar:more",SHARE:"app:share",SHARE_OPTIONS_DID_SHOW:"app:shareOptionShow",SHARE_OPTIONS_DID_HIDE:"app:shareOptionHide",SHOW_TIMELINE:"app:showTimeline",HIDE_TIMELINE:"app:hideTimeline",FORCE_SHOW_TIMELINE:"app:forceshowTimeline",FORCE_HIDE_TIMELINE:"app:forcehideTimeline",TIMELINE_IS_VISIBLE:"app:visibleTimeline",NAVIGATION_SCRUB:"app:navgationscrub",CLOSE_POPUP:"app:closePopup",ORIENTATION_CHANGE:"app:orientationChange",VISIBILITY_CHANGE:"app:visibilityChange",CLOSE_LOADING:"app:closeLoading",LOADING_OPEN:"app:loadingOpen",LOADING_CLOSE:"app:loadingClose",TOC_TOGGLE:"app:tocToggle",TOC_ITEM_TOGGLE:"app:tocItemToggle",TOC_HIDE:"app:tocHide",TOC_ON_SCREEN:"app:tocOnScreen",TOC_DID_SHOW:"app:tocDidShow",TOC_DID_HIDE:"app:tocDidHide",TOC_TRANSLATE:"app:tocTranslate",TOC_NOT_AVAILABLE:"app:tocNotAvailable",REFRESH_PAGE:"app:refreshPage",OFFLINE:"app:offline",ONLINE:"app:online",FIRST_LAUNCH:"app:firstLaunch",SHOW_GEOLOCATION:"widget:showgeolocation",SHOW_VIDEO:"widget:showVideo",SHOW_ZOOMABLE_IMAGE:"widget:showZoomableImage",PLAY_GLOBAL_AUDIO:"audio:play",STOP_GLOBAL_AUDIO:"audio:stop",TOGGLE_GLOBAL_AUDIO:"audio:toggleview",NEXT_GLOBAL_AUDIO:"audio:next",PREV_GLOBAL_AUDIO:"audio:prev",UPDATE_GLOBAL_AUDIO:"audio:update",START_GLOBAL_AUDIO:"audio:start",GLOBAL_AUDIO_DID_SHOW:"audio:didShow",GLOBAL_AUDIO_DID_HIDE:"audio:didHide",TOOLBAR_WILL_SHOW:"toolbar:willopen",NOTIFICATION_SHOW:"notification:show",NOTIFICATION_HIDE:"notification:hide",IOS_HOME_SHOW:"ioshome:show",IOS_HOME_HIDE:"ioshome:hide",GOTO_STORE:"app:navigate:store",PRE_AUTHENTICATE:"app:preauth",PRE_AUTHENTICATED:"app:preauth:complete",AUTHENTICATE:"app:auth",AUTHENTICATED:"app:auth:complete",UNAUTHENTICATE:"app:unauth",UNAUTHENTICATED:"app:unauth:complete",RESIZE:"app:resize",TOGGLE_NAV_BARS:"app:togglenavbars",STORE:"app:store",SPREAD_VIEW_TOGGLE:"app:spreadview:toggle",SPREAD_VIEW_UPDATED:"app:spreadview:updated",STORE_LOGIN_OPEN:"app:login:store:open",ISSUE_LOGIN_OPEN:"app:login:issue:open",LOGIN_CLOSE:"app:login:close",OFFLINE_OPTIONS_TOGGLE:"offlineoptions:show",OFFLINE_OPTIONS_STATUS_CHANGE:"offlineoptions:status",OFFLINE_STORE_JSON_UPDATED:"offlinestore:updated",OFFLINE_STORE_JSON_READY:"offlinestore:ready",OFFLINE_ISSUE_COMPLETE:"offline:issuecomplete",OFFLINE_PAGE_READ_COMPLETE:"offline:page:read:complete",OFFLINE_PAGE_DOWNLOAD_COMPLETE:"offline:page:download:complete",OFFLINE_PAGE_PROCESS_COMPLETE:"offline:page:process:complete",OFFLINE_ISSUE_DELETE_COMPLETE:"offline:issuedeleted",OFFLINE_PAGE_DELETE_COMPLETE:"offline:pagedeleted",OFFLINE_DOWNLOAD_EVENT:"offline:downloadevent",PICTURE_ZOOM_SCALE:"pinchzoom:picturezoomwidget",DOUBLE_TAP:"event:doubletap",JS_TAP:"event:jsTap"},_.extend(AS.message,Backbone.Events)}(),function(){"use strict";function a(b,c){var d;for(var e in c)c.hasOwnProperty(e)&&null!==c[e]&&(d=c[e],"object"==typeof d&&d.constructor===Object?(b[e]=b[e]||{},a(b[e],d)):b[e]=d);return b}function b(a,c){var d,e;if(!_.isObject(a))return c(a);for(var f in a)a.hasOwnProperty(f)&&(d=a[f],"object"==typeof d&&d.constructor===Object?b(a[f],c):(e=c(d),d!==e&&(a[f]=e)));return a}var c=function(a){this.target=a};_.extend(c.prototype,{wire:function(a){var b,c,d,e;for(b in a)if(a.hasOwnProperty(b)){if(c=a[b],_.isArray(c))for(e=[],d=0;d<c.length;d++)e.push(this.resolveInject(c[d]));else e=this.resolveInject(c);this.target[b]=e}},resolveInject:function(a){var b=_.isString(a)?AS.config.get(a):a;return b=b||a,_.isObject(b)&&b.hasOwnProperty("class")?b=this.createFactory(b["class"],b):_.isFunction(b)&&(b=this.createFactory(b)),b},createFactory:function(a,b){return function(c){var d=new a(c);return b&&_.extend(d,b),d}}});var d={injectId:null,inject:null,_setupWiring:function(){if(this.injectId){var a=AS.config.get(this.injectId);this.config(a)}else _.isObject(this.inject)&&this.config(this.inject)},config:function(a){var b=new c(this);b.wire(a)}};AS.config=function(a){for(var b in a)AS.config.register(b,a[b])},_.extend(AS.config,{table:{},register:function(c,d){_.isObject(d)?this.table[c]=a(this.table[c]||{},d):this.table[c]=d,_.defer(_.bind(function(){this.table[c]=b(this.table[c],function(a){return _.isString(a)&&0===a.indexOf("locale:")?a.substr(7).toLocaleString():a})},this))},get:function(a){if(!a)return _.clone(this.table);for(var b=a.split("."),c=this.table;c&&b.length;)a=b.shift(),c=c[a];return c},has:function(a){return!!this.get(a)},mixin:function(a){_.extend(a,d)}})}(),function(){"use strict";function a(a,b){return b+a.charAt(0).toUpperCase()+a.substr(1)}function b(){return AS.browser.webkit?"webkit":AS.browser.opera?"o":AS.browser.ie?"ms":document.body.style.MozTransform?"moz":""}function c(){return screen.height===$(window).outerHeight()&&screen.width===$(window).outerWidth()}function d(){AS.util.CURRENT_FRAMEWORK=AS.config.get("app.frameworkMode"),AS.message.off(AS.message.PUBLICATION_LOADED,d)}var e=60,f=1e3/e,g=navigator.userAgent,h=[/Mac OS X 10_8.*\b6.0.* Safari\b/];AS.orientation={locked:function(){return AS.util.getPublicationOrientation()},get:function(a){var b=AS.util.getWindowOrientation();return AS.browser.android||AS.browser.androidbuiltin?(window.outerWidth,window.outerHeight,"undefined"!=typeof a&&"orientationchange"===a.type?0===a.target.orientation||180===a.target.orientation?"portrait":"landscape":window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"):"undefined"!=typeof window.onorientationchange?0===window.orientation||180===window.orientation?"portrait":"landscape":b},value:function(){var a=AS.util.isTouch(),b=this.locked();return b?b:a?this.get():AS.util.getWindowOrientation()},desktop:function(){return"undefined"!=typeof window.onorientationchange?!1:!0},handheld:function(){return"undefined"!=typeof window.onorientationchange?!0:!1},checkFeature:function(){return"undefined"!=typeof window.onorientationchange?!0:!1},set:function(a){$("body").removeClass("ori-landscape").removeClass("ori-portrait"),$("body").addClass("ori-"+a)},setup:function(){var a=AS.orientation.get();$("body").removeClass("ori-landscape").removeClass("ori-portrait"),$("body").addClass("ori-"+a)},isPortraitIssue:function(){return/portrait/.test(window.location.href)}},AS.browser={mac:/Macintosh/.test(g),win:/Windows/.test(g),desktop:/Windows/.test(g)||/Macintosh/.test(g),iphone:/iPhone/.test(g),ipad:/iPad/.test(g),ios:/iPad|iPhone|iPod/.test(g),ios5:/iPad|iPhone|iPod/.test(g)&&/OS 5|OS 4/.test(g),android:/Android/.test(g),androidbuiltin:/Android/.test(g)&&/Mozilla/.test(g)&&/Safari/.test(g)&&!/Chrome/.test(g),firefox:/Firefox/.test(g),webkit:/WebKit/.test(g),opera:/Opera/.test(g),ie:/MSIE/.test(g)||/Trident/.test(g),silk:/Silk/.test(g)||/Trident/.test(g),safari:/Safari/.test(g)&&!/Chrome/.test(g),chrome:/Chrome/.test(g)},AS.extensions=function(){var a=[];return{add:function(b){this.check(b)||a.push(b)},check:function(b){return _.contains(a,b)}}}(),AS.cookies={get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},set:function(a,b,c,d){function e(){var a;return 4!==j.split(".").length||isNaN(j.charAt(0))?(a=_.last(j.split("."),i).join("."),a=a.split(".").length<=1?"":";domain="+a):a="",a}function f(){if(g=e(),document.cookie=a+"="+b+h+g+d,AS.cookies.get(a)!==b.toString()){if(i++,!(i<=j.split(".").length))return!1;f()}return!0}var g,h="",i=2,j=window.location.host;if(c){var k=new Date;k.setTime(k.getTime()+1e3*c),h=";expires="+k.toGMTString()}d=";path="+d;f()},remove:function(a){this.set(a,"",-1,"/")},detect:function(){document.cookie="cookie=1";var a=-1!==document.cookie.indexOf("cookie");return document.cookie="cookie=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",a}},AS.util={FULL_SCREEN_SUPPORTED:void 0,VENDOR_PREFIX:void 0,GPU_ENABLED:void 0,STANDALONE:"standalone"in navigator&&navigator.standalone,RETINA:!1,requestAnimationFrame:function(a){var b=window.requestAnimationFrame;return"function"==typeof b?b.apply(window,arguments):setTimeout(a,f)},supportPassiveHandler:function(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("supportPassive",null,b)}catch(c){}return a},getPublicationOrientation:function(){var a,b=["landscape","portrait"];return a=AS.util.isTouch()?AS.config.get("publication.orientation.mobile"):AS.config.get("publication.orientation.desktop"),a?b.indexOf(a.toLowerCase())>-1?a:void 0:a},isTouch:function(){return Modernizr.touch||AS.config.get("app.mobileOnly")},getToolbarItems:function(){for(var a,b=[],c=AS.util.isTouch()?"mobile":"desktop",d=AS.config.get(),e=0,f=d.toolbar.items.length;f>e;++e)a=d.toolbar.items[e],-1!==a.allowedBrowsers.indexOf(c)&&b.push(a);return b},isAnyToolbarItemEnabled:function(){for(var a,b,c=AS.util.getToolbarItems(),d=AS.config.get(),e=0,f=c.length;f>e&&!b;++e)switch(a=c[e].title){case"Store":b=d.features.storeAccessibility;break;case"Audio":b=d.features.globalAudioPlayer;break;case"Contents":b=d.features.tableOfContents;break;case"Window":b=d.features.fullScreen;break;case"NavigatorView":b=d.features.scrubber;break;case"PageFitView":b=d.features.pageFitButton;break;case"Spread View":b=d.features.spreadToggleButton;break;case"Share":if(d.features.socialSharing){var g=d.socialSharing.options;for(var h in g)if(g[h]===!0){b=!0;break}}else b=d.features.socialSharing}return b},getToolbarHeight:function(){var a=AS.config.get();return AS.util.isToolbarEnabled()?a.toolbar.height:0},isToolbarEnabled:function(){return AS.config.get("features.toolbar")&&AS.util.isAnyToolbarItemEnabled()},iframeCount:function(){return Modernizr.touch||AS.config.get("app.mobileOnly")?AS.browser.androidbuiltin||AS.browser.iphone||AS.browser.ios5||AS.browser.android?3:5:AS.util.isIE9()?5:7},getPageScaleFactor:function(a,b){var c=1;if(AS.ConfigUtil.isFitModeEnabled()){var d=this.getScaleFactorAutoFit(a,b),e=this.getScaleFactorWidthFit(b),f=AS.ConfigUtil.getMaxPageScale();f&&(d=d>f?f:d),c=AS.StateModel.isWidthFitMode()?e:d}return c},getScaleFactorAutoFit:function(a,b){var c=parseInt(AS.Session.getCurrentVariant().get("height"),10);return a>c&&(a=c),Math.min(window.innerWidth/b,window.innerHeight/a)},getScaleFactorWidthFit:function(a){return window.innerWidth/a},cancelAnimationFrame:function(a){var b=window.cancelAnimationFrame;"function"==typeof b&&b.apply(window,arguments),clearTimeout(a)},supportsFullScreen:function(){if(Modernizr.touch||AS.config.get("app.mobileOnly"))return!1;for(var a=0;a<h.length;a++)if(h[a].test(g))return!1;var b=document.body;return b&&(b.requestFullScreen||b.mozRequestFullScreen||b.webkitRequestFullScreen||AS.util.getInternetExplorerVersion()>=10)},isFullScreen:function(){return AS.util.getInternetExplorerVersion()>=10?c():"undefined"!=typeof document.fullscreen?c()?!0:document.fullscreen:"undefined"!=typeof document.mozFullScreen?c()?!0:document.mozFullScreen:"undefined"!=typeof document.webkitIsFullScreen?c()?!0:document.webkitIsFullScreen:void 0},requestFullScreen:function(a){a=a||document.documentElement,a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},vendorPrefixedStyle:function(a){var b=this.VENDOR_PREFIX;return b?"-"+b+"-"+a:a},vendorPrefixedEvent:function(b){function c(b){return function(c){return a(c,b)}}var d=this.VENDOR_PREFIX,e={webkit:c("webkit"),o:c("o"),ms:c("ms")},f=e[d];return"function"==typeof f?f(b):b.toLowerCase()},vendorPrefixed:function(b,c){c=c||window;var d=this.VENDOR_PREFIX;return d&&(b=a(b,d)),c.hasOwnProperty(b)?c[b]:null},isIE:function(){return-1!==AS.util.getInternetExplorerVersion()},isIE10:function(){return AS.util.getInternetExplorerVersion()>=10},isIE9:function(){return 9===AS.util.getInternetExplorerVersion()},canShowFacingPage:function(){var a=AS.Session.getCurrentVariant();return a&&a.get("facing")&&this.isCurrentPageIsFacingPage()},isCurrentPageIsFacingPage:function(){var a=AS.Session.getCurrentPage();return a&&a.has("spreadId")&&a.has("pagePosition")?!0:!1},getDefaultWidthForPage:function(a){return a=a?a.toLowerCase():AS.orientation.get(),"portrait"===a?AS.constant.DEFAULT_PORTRAIT_WIDTH:AS.constant.DEFAULT_LANDSCAPE_WIDTH},getDefaulHeightForPage:function(a){return a=a?a.toLowerCase():AS.orientation.get(),"portrait"===a?AS.constant.DEFAULT_PORTRAIT_HEIGHT:AS.constant.DEFAULT_LANDSCAPE_HEIGHT},getInternetExplorerVersion:function(){var a,b,c=-1;return"Microsoft Internet Explorer"===navigator.appName?(a=navigator.userAgent,b=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!==b.exec(a)&&(c=parseFloat(RegExp.$1))):"Netscape"===navigator.appName&&(a=navigator.userAgent,b=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!==b.exec(a)&&(c=parseFloat(RegExp.$1))),c},parseIssueId:function(a){var b=a.split(":");return b.pop(),b.pop()},isGpuEnabled:function(a){return a=a||window,AS.browser.androidbuiltin?!1:/MSIE/.test(a.navigator.userAgent)?!1:AS.browser.android?!0:/iPad|iPhone|iPod/.test(a.navigator.userAgent)?!0:/Chrome|Safari|Mozilla/.test(a.navigator.userAgent)},numberZero:function(a){return 0>a?a>-10?"0"+a:a.toString():10>a?"0"+a:a.toString()},timeStringFromSeconds:function(a){return Math.floor(a/60)+":"+AS.util.numberZero(Math.floor(a%60))},queryStringParam:function(a,b){var c=this.queryString(b);return c?c[a]:void 0},queryString:_.memoize(function(a){var b,c,d,e,f,g={};if(a=a||window.location.href,b=a.indexOf("#"),c=a.lastIndexOf("?"),-1===c)return void 0;for(d=a.substring(c+1,-1===b?void 0:b),e=d.split("&"),f=0;f<e.length;f++){var h=e[f].split("="),i=decodeURIComponent(h[0]),j=decodeURIComponent(h[1]);g[i]=j}return g}),stripURL:function(a){return a=a||window.location.href,a.split("?")[0]},stripLeadingSlash:function(a){return"/"===a.charAt(0)?a.substr(1):a},cloneEvent:function(a,b){"string"!=typeof a&&(b=a,a=b.type);var c={};c.click=c.mousedown=c.mouseup=c.mousemove="MouseEvents";var d=document.createEvent(c[a]||"Events"),e=!0;if(b)for(var f in b)if("bubbles"===f)e=!!b[f];else try{d[f]=b[f]}catch(g){}return d.initEvent(a,e,!0,null,null,null,null,null,null,null,null,null,null,null,null),d.isDefaultPrevented=function(){return this.defaultPrevented},d},stripTrailingSlash:function(a){return"/"===a.charAt(a.length-1)?a.substr(0,a.length-1):a},truncate:function(a,b){var c=a.innerHTML,d=c.split(" ");for(a.innerHTML="";d.length&&a.offsetHeight<=b;)a.innerHTML+=d.shift()+" ";d.length&&(a.innerHTML=a.innerHTML.substr(0,a.innerHTML.length-1),a.innerHTML+="...")},iosDismissKeyboard:function(){var a=$("a").filter(":visible");return a?void a.first().focus():void $("<a/>",{href:"javascript:;"}).appendTo("body").css("display","block").focus().remove()},changeLocation:function(a){window.location=a},animateRotate:function(a){var b={startDegrees:0,targetDegrees:360,duration:1e3,callback:function(){}};_.extend(b,a),$({deg:b.startDegrees}).animate({deg:b.targetDegrees},{step:function(a){b.el.style[AS.util.vendorPrefixedEvent("transform")]="rotate("+a+"deg)"},duration:b.duration,easing:"linear",complete:b.callback})},restrictTextByLines:function(a,b){a.each(function(){var a,c=$(this).data("singleHeight");c||(a=$(this).html(),c=$(this).html("&nbsp").height(),$(this).html(a+"").data("singleHeight",c)),"function"==typeof $.fn.dotdotdot&&$(this).dotdotdot({height:c*b})})},isValidUrl:function(a){return/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/.test(a)},isValidBundleId:function(a){return/^([a-zA-Z]+).([a-zA-Z]+).([a-zA-Z]+)$/.test(a)},getCurrentScreenDimensions:function(){var a=AS.browser.android||AS.browser.androidbuiltin;return a?{width:screen.width,height:screen.height}:window.hasOwnProperty("orientation")&&90===Math.abs(window.orientation)?{width:screen.height,height:screen.width}:{width:screen.width,height:screen.height}},isModelViewMode:function(){return $(".modalView").length>0},getWindowOrientation:function(){return $(window).height()>$(window).width()?"portrait":"landscape"},checkEventKeyCode:function(a,b){var c,d={left:37,up:38,right:39,down:40};return b=b.toLowerCase(),c=d[b],a.keyCode===c||a.keyIdentifier&&a.keyIdentifier.toLowerCase()===b},CSSTransformString:function(a){var b,c,d,e=a.enable3D?!0:!1,f=a.origin;if(void 0!==a.left||void 0!==a.top){var g=a.left||0,h=a.top||0;b=isNaN(g)||isNaN(h)?e?"translate3D("+g+", "+h+", 0)":"translate("+g+", "+h+")":e?"translate3D("+g+"px, "+h+"px, 0)":"translate("+g+"px, "+h+"px)"}if(a.scale&&(c=e?"scale3D("+a.scale+", "+a.scale+", 0)":"scale("+a.scale+")"),a.angle&&(d=e?"rotate3D(0,0,"+a.angle+"deg)":"rotate("+a.angle+"deg)"),!(b||c||d))return{};var i=b&&c?b+" "+c:b?b:c;d&&(i=i+" "+d);var j={};return j.transform=i,a.origin&&(j["transform-origin"]=f),a.duration&&(j["transition-duration"]=a.duration+"ms"),j},convertStringArrayIntoIntArray:function(a){var b=a.map(function(a){return isNaN(parseInt(a,10))?void 0:parseInt(a,10)});return b},getNearestValueWithScaleFactor:function(a,b,c){var d=0;if(a.length<=0)return d;a=this.convertStringArrayIntoIntArray(a);var e=a.indexOf(b);if(-1!==e)d=a[e];else if(a.push(b),a=_.sortBy(a),e=a.indexOf(b),0===e)d=a[e+1];else if(e===a.length-1)d=a[e-1];else{var f=a[e-1],g=a[e+1],h=g/b,i=b/f,j=c>h?h:0,k=c>i?i:0;d=0!==j&&0!==k?k>j?g:f:0!==j?g:0!==k?f:g}return d},getNearestValue:function(a,b){var c;a.push(b),a=this.convertStringArrayIntoIntArray(a),a=_.sortBy(a);var d=a.indexOf(b);return c=0===d?a[d+1]:d===a.length-1?a[d-1]:a[d+1]}},AS.util.GPU_ENABLED=AS.util.isGpuEnabled(),AS.util.VENDOR_PREFIX=b(),AS.util.FULL_SCREEN_SUPPORTED=AS.util.supportsFullScreen(),AS.message.on(AS.message.PUBLICATION_LOADED,d,this),AS.frameworks={BROWSER:"browser",GSA:"GSA"},AS.NOTIFICATION_LEVEL={ERROR:1,WARN:2,INFO:3,VERBOSE:4,SILLY:5}}(),function(){"use strict";AS.ConfigUtil={getConfig:function(){return AS.config.get()},getMaxPageScale:function(){return this.getConfig().pageFitView.maxScaleForAutoFit},getPageFitMode:function(){return this.getConfig().pageFitView.defaultMode.toLowerCase()},isWidthFitModeEnabled:function(){return this.getPageFitMode()===AS.constant.PAGE_WIDTH_FIT},isLandscapeFacingEnabledForMobile:function(){return this.getConfig().spreadView.showLandscapeFacing.mobile},isFitModeEnabled:function(){return this.getConfig().pageFitView.enable}}}(),function(){"use strict";$.easing||($.easing={}),$.extend($.easing,{},{easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c}}),$.fn.stop||($.fn.stop=function(){return this}),String.prototype.toAlphaNumericString=function(){for(var a=this;a!==a.replace(/[^a-zA-Z0-9_.]+/,"");)a=a.replace(/[^a-zA-Z0-9_.]+/,"");return a}}(),function(){"use strict";function a(a){var b;return a=a||"short",b=("date-"+a).toLocaleString()}var b={interpolate:/\{\{\{(.+?)\}\}\}/g};Date.prototype.toLocaleDateString=Date.prototype.toLocaleString=function(b){return moment(this).format(a(b))},String.prototype.toLocaleDateString=function(b){return moment(this).format(a(b))},String.prototype.toLocaleString=function(){var a=String.prototype.toLocaleString;return function(c){var d=a.apply(this,arguments),e=_.extend(AS.config.get(),_.isObject(c)?c:{});return d=_.template(d,e,b)}}(),String.prototype.toConfiguredLocaleString=function(){function a(a,b,c){var d=AS.config.get("type."+a)?AS.config.get("type."+a):a,e=_.find(_.keys(b),function(a){return d.toLowerCase().match(new RegExp(a))});return e?b[e].toLocaleString():(c||d).toLocaleString()}var b;return b={login:function(){return a("login",{log:"login",sign:"signin"})},subscribe:function(){return a("subscribe",{subscribe:"subscribe",register:"register"})},logout:function(){return a("login",{log:"logout",sign:"signout"},"logout")},"login-waiting":function(){return a("login",{log:"login-waiting",sign:"signin-waiting"},"login-waiting")},"issue-login-subscribe":function(){return a("subscribe",{subscribe:"issue-login-subscribe",register:"issue-login-register"},"issue-login-subscribe")},"issue-login-title":function(){return a("login",{log:"issue-login-title",sign:"issue-signin-title"},"issue-login-title")},_default:function(){return this.toLocaleString()}},_.contains(_.keys(b),this.toString())?b[this]():_.bind(b._default,this)()},String.defaultLocale="en"}(),function(){"use strict";function a(a){a.preventDefault()}function b(a){return function(b){c(b,a)}}function c(a,b){if(AS.browser.android){var c=$(b).data("toc");if(c)return void a.preventDefault()}else a.preventDefault()}function d(c,d){c&&c.body&&(c.body.addEventListener("touchmove",b(d),e()),c.body.addEventListener("gesturechange",a,e()),c.body.addEventListener("gesturestart",a,e()),c.body.addEventListener("gestureend",a,e()))}function e(){var a=!1;return AS.browser.silk&&AS.util.supportPassiveHandler()&&(a={passive:!1,capture:!1}),a}function f(c,d){c&&c.body&&(c.body.addEventListener("touchmove",b(d),e()),c.body.removeEventListener("gesturechange",a,e()),c.body.removeEventListener("gesturestart",a,e()),c.body.removeEventListener("gestureend",a,e()))}function g(a){var b=a.contentWindow,c=AS.Session.loadStateForCurrentPage();c&&"function"==typeof b.loadPageState&&b.loadPageState(c)}var h=AS.util.GPU_ENABLED,i=(AS.util.vendorPrefixedStyle("transform"),AS.util.vendorPrefixedStyle("transform-style")),j=AS.util.vendorPrefixedStyle("backface-visibility"),k=Modernizr.touch?["touchstart","touchmove","touchend","swipeleft","swiperight","tap"]:["mousedown","mouseup","click","mousewheel","wheel","DOMMouseScroll","keyup"],l=["function bridge( message ){","try {","parent.AS.PlatformBridge.request( message, window.location.href );","} catch(e){}","}","if( typeof PR !== 'undefined' ){","PR.notifyApp = bridge;","if( PR.Core ){ ","PR.Core.onAppNotifyDesktop = bridge;","}","}"].join("\n"),m=["function fetchAsset( asset, callback ) { try {","parent.AS.resourceManager.loadResource( asset, callback );","} catch(e) {} }","if(typeof PR !== 'undefined') {","if( PR.WidgetHelper ) {","PR.WidgetHelper.fetchAsset = fetchAsset;","}","}"].join("\n"),n="[class*='animation'] { "+j+": hidden; "+i+": flat; }";AS.ContentAdaptor={processIframe:function(a,b,c){function f(){var b=function(b){for(var c=b;c.originalEvent;)c=c.originalEvent;if(!o(c,a)){if(p(c))return void AS.message.trigger(AS.message.PICTURE_ZOOM_SCALE);if(b.touches&&b.touches.length<=1&&!AS.StateModel.isZoomMode())return}c=AS.util.cloneEvent(c.type,c),a.parentNode.dispatchEvent(c)};if(k.forEach(function(a){q.body.addEventListener(a,b,e())}),Modernizr.touch&&d(q,a),j(),h&&AS.browser.webkit){var c=q.createElement("style");c.innerHTML=n,q.body.appendChild(c)}if(AS.browser.desktop){if("function"==typeof r.linkReader)return i();g()}}function g(){var b=AS.config.get("widgets"),c=q.getElementsByTagName("head")[0],d=q.createElement("link");q.createElement("script"),b.reader=AS.router.readerURL,d.type="text/css",d.rel="stylesheet",d.href=b.reader+b.video.mediaElementCSSFile,d.media="screen",c.appendChild(d),_.defer(function(){if("function"==typeof a.contentWindow.loadReader)return void a.contentWindow.loadReader(b,jQuery);try{r.MediaElementWatch()}catch(c){}})}function i(){function a(a){"function"==typeof r.linkReader&&r.linkReader(a)}var b=AS.config.get("widgets"),c=AS.mediaElementJS;b.reader=AS.router.readerURL,r.linkReader({jQuery:jQuery}),r.widgetSettings=b,a({js:c}),s.loadResource(b.reader+b.video.mediaElementCSSFile,{success:function(b,c,d){a({css:b})},error:function(c){a({"css-file":b.reader+b.video.mediaElementCSSFile})}}),_.defer(function(){"function"==typeof r.MediaElementWatch?r.MediaElementWatch():void 0})}function j(){var a=q.createElement("script");a.innerHTML=l,AS.config.get("app.enableOffline")&&(a.innerHTML+=m),q.body.appendChild(a)}var q=a.contentDocument,r=($(q),a.contentWindow),s=AS.resourceManager;b?AS.offlineManager.read(c,{success:function(b){a.contentWindow.document.open("text/html","replace"),a.contentWindow.document.write(b),a.contentWindow.document.close(),f()},error:function(a){}}):f()},initialiseIframe:function(a){g(a)},disposeIframe:function(a){var b=$(a),c=$(a.contentDocument);a.contentDocument&&a.contentDocument.body&&(a.contentDocument.body.innerHTML=""),Modernizr.touch&&f(a.contentDocument,a),c.off(),b.off()}};var o=function(){function a(a){for(var b,d=c.length,e=!1,f=0;d>f;f++)if(b=$(a.target).closest("[data-widget="+c[f]+"]"),b&&b.length>0){e=!0;break}return!("touchmove"===a.type&&e)}function b(a,b){var c=b.contentWindow;return c.PR?c.PR.appCanScroll:!0}var c=["SLIDESHOW","SCROLLZONE","IMAGE360","PICTUREZOOM"];return function(c,d){var e=a(c,d),f=b(c,d);return e&&f}}(),p=function(a){var b="PICTUREZOOM",c=$(a.target).closest("[data-widget="+b+"]").length;return"touchmove"===a.type&&c>0}}(),function(){"use strict";AS.PlatformBridge={handlers:{changePage:"changePageHandler",navigateTo:"navigateToHandler",articleById:"articleByIdHandler",http:"webLinkHandler",https:"webLinkHandler",mailto:"mailToHandler",notification:"notificationHandler",alert:"alertHandler",geolocation:"geolocationHandler",localResource:"openFileHandler",video:"videoHandler",openImage:"openImageHandler",audio:"globalAudioHandler",reporting:"reportingHandler",internal:"internalHandler",screenshot:"screenshotHandler",savestate:"savestateHandler",resetstate:"resetstateHandler",jstap:"jsTapHandler",layer:"popupHandler"},widgetViews:{geolocationView:null,videoView:null,imageView:null},videoStats:{mediaStart:null,mediaStop:null},request:function(a,b){function c(a,b,c){for(var d=a.split(b);d.length>c;)d[c-1]=[d[c-1],d.splice(c,1)].join(b);return d}var d,e,f;return d=-1===a.indexOf("mailto:")?c(a,"://",2):c(a,":",2),2!==d.length&&"screenshot"!==d[0]?void 0:(e=d[0],f=d[1],void(this.handlers[e]&&this[this.handlers[e]].call(this,f,e,b)))},screenshotHandler:function(a){AS.message.trigger(AS.message.NOTIFICATION_SHOW,"screenshot-unavilable".toLocaleString())},internalHandler:function(a){if("string"!=typeof a)return!1;switch(a.toUpperCase()){case"ISSUES":return AS.message.trigger(AS.message.GOTO_STORE),!0;default:return!1}},reportingHandler:function(a){if("string"!=typeof a)return!1;try{if(a=JSON.parse(decodeURIComponent(a)),a.widget){var b=null!==a.widget.match("video"),c=null!==a.widget.match("audio");if(b||c){var d,e,f=(a.widget,a.action),g=a.path,h=1e3;if("play"===f)return this.videoStats.mediaStop=null,void(this.videoStats.mediaStart=(new Date).getTime());if(a={eventCategory:b?AS.Analytics.categories.VIDEO:AS.Analytics.categories.AUDIO,eventAction:g},"pause"===f){if(null===this.videoStats.mediaStart)return;this.videoStats.mediaStop=(new Date).getTime(),d=this.videoStats.mediaStop-this.videoStats.mediaStart,d>h&&(e=g,_.extend(a,{eventLabel:e,eventValue:d}),this.videoStats.mediaStop=null,this.videoStats.mediaStart=null)}}}return a.eventLabel=[AS.Session.getCurrentIssueId(),AS.Session.getCurrentArticleId(),a.label].join("/"),AS.message.trigger(AS.message.TRACK_EVENT,a),!0}catch(i){}},changePageHandler:function(a){if("string"!=typeof a)return!1;switch(a.toUpperCase()){case"NEXT":return AS.message.trigger(AS.message.PAGE_NAVIGATE_NEXT),!0;case"PREVIOUS":return AS.message.trigger(AS.message.PAGE_NAVIGATE_PREVIOUS),!0;default:return!1}},navigateToHandler:function(a){if("string"!=typeof a)return!1;try{if(a=JSON.parse(decodeURI(a)),a.articleId&&a.index){var b=AS.Session.getCurrentVariant().get("articles")[a.articleId],c=a.linkAnchor||null;
"undefined"!=typeof b&&AS.message.trigger(AS.message.PAGE_NAVIGATE,{page:Number(b)+Number(a.index),anchor:c})}else a.index&&AS.message.trigger(AS.message.PAGE_NAVIGATE,{page:Number(a.index)});return!0}catch(d){}},geolocationHandler:function(a){var b=a.match(/-?\d+?.\d+/g),c=b[0],d=b[1];return AS.StateModel.get("isConnected")===!1&&AS.config.get("app.enableOffline")?void AS.message.trigger(AS.message.ALERT,"notification-offline-content-unavailable".toLocaleString()):(AS.message.trigger(AS.message.SHOW_GEOLOCATION,c,d),void(AS.extensions.check("Geolocation")&&this._trackEvent(AS.Analytics.categories.GEOLOCATION,a)))},articleByIdHandler:function(a){var b=AS.Session.getCurrentVariant().get("articles")[decodeURI(a)];"undefined"!=typeof b&&AS.message.trigger(AS.message.PAGE_NAVIGATE,{page:Number(b)})},notificationHandler:function(a){AS.message.trigger(AS.message.NOTIFICATION_SHOW,a.toLocaleString())},alertHandler:function(a){AS.message.trigger(AS.message.ALERT,a.toLocaleString())},webLinkHandler:function(a,b){var c=b+"://"+a;if(AS.StateModel.get("isConnected")===!1&&AS.config.get("app.enableOffline"))return void AS.message.trigger(AS.message.ALERT,"notification-offline-content-unavailable".toLocaleString());if(window.open(c,"_blank"),AS.Session.getCurrentIssue()){var d=AS.Session.getCurrentIssueId(),e=AS.Session.getCurrentArticleId(),f=d+"/"+e;AS.message.trigger(AS.message.TRACK_EVENT,{eventCategory:AS.Analytics.categories.EXTERNAL_LINK,eventAction:a,eventLabel:f})}},mailToHandler:function(a){window.location.href="mailto:"+a,this._trackEvent(AS.Analytics.categories.EMAIL_LINK,a)},openFileHandler:function(a,b,c){var d=this.getAbsolutePath(a,c);AS.util.CURRENT_FRAMEWORK===AS.frameworks.GSA?this.notifyFramework("openFileHandler",a):window.open(d),this._trackEvent(AS.Analytics.categories.LOCAL_LINK,a)},videoHandler:function(a,b,c){var d;d=AS.StateModel.get("isConnected")&&!AS.config.get("app.enableOffline")?this.getAbsolutePath(a,c):a,AS.message.trigger(AS.message.SHOW_VIDEO,d),this._trackEvent(AS.Analytics.categories.VIDEO,a)},openImageHandler:function(a,b,c){var d=this.getAbsolutePath(a,c);AS.message.trigger(AS.message.SHOW_ZOOMABLE_IMAGE,d),this._trackEvent(AS.Analytics.categories.ZOOMABLE_IMAGE,a)},getAbsolutePath:function(a,b){return-1!==a.indexOf("data:")||-1!==a.indexOf("://")?a:b?b.replace(/\/(?:.(?!\/))+$/,"/"+a):a},notifyFramework:function(a,b){var c={};return c[AS.frameworks.GSA]=function(){return window.external.notify('{"type" : "'+a+'", "data" : "'+b+'" }'),!0},c._default=function(){return!1},_.contains(_.keys(c),AS.util.CURRENT_FRAMEWORK)?c[AS.util.CURRENT_FRAMEWORK]():c._default()},globalAudioHandler:function(a,b,c){var d=this.getAbsolutePath(a,c);AS.message.trigger(AS.message.PLAY_GLOBAL_AUDIO,{url:d}),this._trackEvent(AS.Analytics.categories.AUDIO,a)},savestateHandler:function(a){AS.Session.saveStateForCurrentPage(a)},resetstateHandler:function(){AS.Session.resetStateForCurrentPage()},jsTapHandler:function(){var a=50;AS.Session.canTap=!1,_.delay(function(){AS.Session.canTap=!0,AS.message.trigger(AS.message.JS_TAP)},a)},popupHandler:function(a){this._trackEvent(AS.Analytics.categories.POPUP,a)},_trackEvent:function(a,b){if(AS.Session.getCurrentIssue()){var c=AS.Session.getCurrentIssueId(),d=AS.Session.getCurrentArticleId(),e=c+"/"+d;AS.message.trigger(AS.message.TRACK_EVENT,{eventCategory:a,eventAction:b,eventLabel:e})}}}}(),function(){"use strict";AS.config({app:{config:"reader-config.json",title:"App Studio",animConfig:"webreader/anim-config.json",fullScreenTooltip:{showDelay:1e3,hideDelay:5e3},auth:{authToken:"ASauth",authRoot:"",subscribeUrl:"",issue:"",passwordRequestUrl:"",launchLogin:!1,loginModalDelay:1e3,publicationCode:""},loading:{image:"webreader/images/loading-logo.png",backgroundColor:"#ffffff",color:"#333333"},params:{logLevel:-1},frameworkMode:"browser",workerBasePath:"webreader/scripts/workers",enableCookies:!0,enableOffline:!1,enablePromoted:!0,enableExternal:!0,mobileOnly:!1,backgroundLoading:!1,images:{favicon:"webreader/images/favicon.png"}},pageFitView:{enable:!0,defaultMode:"autofit",maxScaleForAutoFit:4},pageLoading:{imageSize:36},animation:{loaderView:{fadeDuration:1500,fadeEasing:"easeOutSine"},issue:{pageMoveDuration:600,pageMoveEasing:"easeOutSine",arrowFadeDuration:150,touch:{pageMoveDuration:300}},toolbar:{fadeDuration:1e3,fadeEasing:"easeOutSine",touch:{fadeDuration:300}},store:{},zoom:{scaleDuration:200}},features:{tableOfContents:!0,toolbar:!0,scrubber:!0,storeAccessibility:!0,variantSwitching:!0,socialSharing:!0,globalAudioPlayer:!0,pageNavigation:!0,fullScreen:!0,pageFitButton:!0,spreadToggleButton:!0,rememberPageAfterVariantSwitch:!0},scrubber:{filmStrip:!0},filmStrip:{mouseHoverNavigation:!1},socialSharing:{options:{facebookShare:!0,twitterShare:!0,emailShare:!0,linkedinShare:!0}},pageNavigation:{showArrowsForMobile:!0,showArrowsForDesktop:!0},spreadView:{showLandscapeFacing:{mobile:!1}},widgets:{video:{mediaElementPluginPath:"video-player/",mediaElementJSFile:"video-player/mediaelement-and-player.js",mediaElementCSSFile:"video-player/mediaelementplayer.css",mediaElementControls:["playpause","progress","tracks","volume"],mediaElementControlsAlwaysShow:!1}},meta:[{name:"msapplication-TileColor",content:"#f0f0f0"},{name:"msapplication-TileImage",content:"webreader/images/apple-touch-icon.png"}],icons:{appleTouchIcon:{href:"webreader/images/apple-touch-icon.png",rel:"apple-touch-icon"},appleTouchIcon76x76:{href:"webreader/images/apple-touch-icon-76x76.png",size:"76x76",rel:"apple-touch-icon"},appleTouchIcon120x120:{href:"webreader/images/apple-touch-icon-120x120.png",size:"120x120",rel:"apple-touch-icon"},appleTouchIcon144x144:{href:"webreader/images/apple-touch-icon-144x144.png",size:"144x144",rel:"apple-touch-icon"},appleTouchIcon152x152:{href:"webreader/images/apple-touch-icon-152x152.png",size:"152x152",rel:"apple-touch-icon"},appleTouchIcon180x180:{href:"webreader/images/apple-touch-icon-180x180.png",size:"180x180",rel:"apple-touch-icon"},appleTouchIcon192x192:{href:"webreader/images/apple-touch-icon-192x192.png",size:"192x192",rel:"icon"}},loading:{appleTouchStartupImage640x920:{href:"webreader/images/apple-touch-startup-image-640x920.png",width:"320px",height:"480px",rel:"apple-touch-startup-image",pixelDensity:"2"},appleTouchStartupImage640x1096:{href:"webreader/images/apple-touch-startup-image-640x1096.png",width:"320px",height:"568px",rel:"apple-touch-startup-image",pixelDensity:"2"},appleTouchStartupImage768x1004:{href:"webreader/images/apple-touch-startup-image-768x1004.png",width:"768px",height:"1024px",rel:"apple-touch-startup-image",orientation:"portrait"},appleTouchStartupImage1024x748:{href:"webreader/images/apple-touch-startup-image-1024x748.png",width:"768px",height:"1024px",rel:"apple-touch-startup-image",orientation:"landscape"},appleTouchStartupImage1536x2008:{href:"webreader/images/apple-touch-startup-image-1536x2008.png",width:"768px",height:"1024px",rel:"apple-touch-startup-image",orientation:"portrait",pixelDensity:"2"},appleTouchStartupImage2048x1496:{href:"webreader/images/apple-touch-startup-image-2048x1496.png",width:"768px",height:"1024px",rel:"apple-touch-startup-image",orientation:"landscape",pixelDensity:"2"},appleTouchStartupImage750x1294:{href:"webreader/images/apple-touch-startup-image-750x1294.png",width:"375px",height:"667px",rel:"apple-touch-startup-image",orientation:"portrait"},appleTouchStartupImage1242x2148:{href:"webreader/images/apple-touch-startup-image-1242x2148.png",width:"414",height:"736px",rel:"apple-touch-startup-image",orientation:"portrait"}},dimensions:{portrait:{page:{width:768,height:1004},thumbnail:{width:125,height:163},store:{width:130,height:170,gutter:20,maxCols:6},timeline:{height:256}},landscape:{page:{width:1024,height:748},thumbnail:{width:164,height:120},store:{width:200,height:214,gutter:30},timeline:{height:223}}},toolbar:{height:48,items:[{title:"Store",cssClass:"store",svgData:'<svg xmlns="http://www.w3.org/2000/svg" width="26.083" height="24.167" viewBox="0 0 26.083 24.167"><g ><path d="M22.148 7.49l-.032-.018c-.05-.03-.103-.06-.16-.083v-.01L14.263 3c-.183-.046-.383-.078-.605-.078-.207 0-.394.028-.568.07l-8.042 4.58c-.088.08-.14.175-.14.277 0 .096.045.185.125.265l7.962 4.843c.42.163.533.163.662.163.12 0 .354 0 .697-.17l7.93-4.823c.08-.08.124-.168.124-.263 0-.144-.1-.27-.26-.374zM22.148 11.496l-.032-.02c-.05-.03-.103-.058-.16-.083v-.008l-.897-.51-6.705 4.076c-.344.17-.578.17-.697.17-.13 0-.24 0-.662-.162l-6.718-4.085-1.23.7c-.087.084-.14.177-.14.278 0 .098.046.19.126.27l7.962 4.84c.42.165.533.165.662.165.12 0 .354 0 .697-.17l7.93-4.826c.08-.08.124-.168.124-.264-.002-.14-.1-.267-.262-.37zM22.148 15.29l-.032-.018c-.05-.03-.103-.058-.16-.083v-.01l-.897-.51-6.705 4.077c-.344.17-.578.17-.697.17-.13 0-.24 0-.662-.164l-6.72-4.083-1.228.7c-.088.083-.14.176-.14.278 0 .097.045.187.125.267l7.962 4.842c.42.165.533.165.662.165.12 0 .354 0 .697-.17l7.93-4.825c.08-.08.124-.17.124-.264 0-.142-.1-.27-.26-.373z"/></g></svg>',tooltip:"store",buttonAction:AS.message.GOTO_STORE,allowedFrameworks:["browser"],allowedBrowsers:["mobile","desktop"]},{title:"Contents",cssClass:"tocButton",svgData:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" enable-background="new 0 0 24 24"><path d="M4.9 5v2.2c0 .1 0 .2-.1.3H2.4c-.1 0-.2 0-.3-.1 0-.1-.1-.2-.1-.3V5c0-.1 0-.2.1-.3.1-.1.2-.1.3-.1h2.2c.1 0 .2 0 .3.1V5zm0 4.3v2.2c0 .1 0 .2-.1.3s-.2.1-.3.1H2.4c-.1 0-.2 0-.3-.1 0-.2-.1-.3-.1-.4V9.3c0-.1 0-.2.1-.3.1 0 .2-.1.3-.1h2.2c.1 0 .2 0 .3.1v.3zm0 4.3v2.2c0 .1 0 .2-.1.3s-.2.1-.3.1H2.4c-.1 0-.2 0-.3-.1 0-.2-.1-.3-.1-.4v-2.2c0-.1 0-.2.1-.3s.2-.1.3-.1h2.2c.1 0 .2 0 .3.1s0 .3 0 .4zm0 4.3V20c0 .1 0 .2-.1.3s-.2.1-.3.1H2.4c-.1 0-.2 0-.3-.1 0-.1-.1-.2-.1-.3v-2.2c0-.1 0-.2.1-.3.1-.1.2-.1.3-.1h2.2c.1 0 .2 0 .3.1s0 .3 0 .4zM22.1 5v2.2c0 .1 0 .2-.1.3-.1.1-.2.1-.3.1h-15c-.1 0-.2 0-.3-.1 0-.2-.1-.3-.1-.4V5c0-.1 0-.2.1-.3.1-.1.2-.1.3-.1h15.1c.1 0 .2 0 .3.1V5zm0 4.3v2.2c0 .1 0 .2-.1.3s-.2.1-.3.1h-15c-.1 0-.2 0-.3-.1s-.1-.2-.1-.3V9.3c0-.1 0-.2.1-.3.1 0 .2-.1.3-.1h15.1c.1 0 .2 0 .3.1v.3zm0 4.3v2.2c0 .1 0 .2-.1.3s-.2.1-.3.1h-15c-.1 0-.2 0-.3-.1s-.1-.2-.1-.3v-2.2c0-.1 0-.2.1-.3s.2-.1.3-.1h15.1c.1 0 .2 0 .3.1v.3zm0 4.3V20c0 .1 0 .2-.1.3-.1.1-.2.1-.3.1h-15c-.1 0-.2 0-.3-.1s-.1-.2-.1-.3v-2.2c0-.1 0-.2.1-.3s.2-.1.3-.1h15.1c.1 0 .2 0 .3.1v.4z"/></svg>',tooltip:"table-of-contents",buttonAction:AS.message.TOC_TOGGLE,allowedFrameworks:["browser","GSA"],allowedBrowsers:["mobile","desktop"]},{title:"NavigatorView",tooltip:"scrubber-bar",view:"AS.NavigatorView",allowedFrameworks:["browser","GSA"],allowedBrowsers:["mobile","desktop"]},{title:"PageFitView",cssClass:"pagefitview",svgData:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" enable-background="new 0 0 24 24"><path class="widthFit" d="M2.7.7v22.5h18.6V.7H2.7zm17.6 21.5H3.7V1.7h16.6v20.5zm-3.7-9.4h-2.9v-1.6h2.9V9.1l3.4 2.8-3.4 2.9v-2zm-9.3 2L3.9 12l3.4-2.8v2h2.9v1.5H7.3v2.1z"/><path class="autoFit" d="M2.7.7v22.5h18.6V.7H2.7zm17.6 21.5H3.7V1.7h16.6v20.5zm-7.5-5.4h2.1l-2.8 3.4-2.9-3.4h2v-2.9h1.6v2.9zm-1.6-9.5H9.1L12 3.8l2.9 3.5h-2v2.8H11.2V7.3zm2.5 3.9h2.9V9.1l3.4 2.8-3.4 2.9v-2h-2.9v-1.6zm-6.4 3.6L3.9 12l3.4-2.8v2h2.9v1.5H7.3v2.1z"/></svg>',tooltip:"fit-page-to-window",buttonAction:AS.message.TOGGLE_PAGE_FIT_MODE,view:"AS.PageFitView",allowedFrameworks:["browser"],allowedBrowsers:["mobile","desktop"]},{title:"Spread View",cssClass:"spreadview",svgData:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" enable-background="new 0 0 24 24"><path d="M20.3 22.7H3.8V1.2h16.4v21.5zm-15.6-1h14.6V2.2H4.7v19.5z" class="singlepagebutton"/><g class="facingpagesbutton"><path d="M23.2 22.7h-12V1.2h12v21.5zm-11-1h10.1V2.2H12.2v19.5zM.9 7V1.2h11.9v21.5H.9V7zm10.9-4.8h-10v19.4h10V2.2z"/></g></svg>',tooltip:"single-view",buttonAction:AS.message.SPREAD_VIEW_TOGGLE,view:"AS.SpreadView",allowedFrameworks:["browser"],allowedBrowsers:["mobile","desktop"]},{title:"Share",svgData:'<svg xmlns="http://www.w3.org/2000/svg" width="26.083" height="24.167" viewBox="0 0 26.083 24.167"><path  d="M19.115 14.63c-.843 0-1.598.36-2.132.933l-7.13-3.23c.02-.117.04-.233.04-.358 0-.133-.022-.258-.04-.387l7.076-3.05c.535.608 1.31 1 2.185 1 1.615 0 2.926-1.31 2.926-2.927 0-1.613-1.31-2.923-2.925-2.923-1.613 0-2.926 1.31-2.926 2.924 0 .14.02.275.042.408l-7.066 3.047C8.63 9.447 7.848 9.05 6.97 9.05c-1.618 0-2.93 1.31-2.93 2.925 0 1.617 1.312 2.925 2.93 2.925.922 0 1.735-.438 2.27-1.106l7.01 3.176c-.04.19-.06.384-.06.586 0 1.615 1.31 2.926 2.926 2.926 1.617 0 2.926-1.31 2.926-2.926 0-1.618-1.31-2.927-2.927-2.927z"/></svg>',cssClass:"sharing",tooltip:"social-sharing",buttonAction:AS.message.SHARE,view:"AS.SharingView",allowedFrameworks:["browser","GSA"],allowedBrowsers:["desktop"]},{title:"Audio",cssClass:"audio",svgData:'<svg xmlns="http://www.w3.org/2000/svg" width="26.083" height="24.167" viewBox="0 0 26.083 24.167"><path  d="M23.152 12.742l-.312 4.47c-.035.517-.486.91-1.004.873l-1.525-.107c-.52-.036-.91-.485-.872-1.004l.312-4.47c.03-.42.332-.743.72-.837-.282-3.464-3.187-6.196-6.722-6.196-3.53 0-6.43 2.725-6.72 6.18.458.033.837.382.872.855l.312 4.47c.035.518-.355.968-.875 1.005l-1.525.107c-.518.036-.97-.357-1.004-.874l-.312-4.47c-.027-.397.195-.75.533-.912.204-4.644 4.022-8.35 8.718-8.35 4.682 0 8.49 3.684 8.717 8.308.418.118.72.5.687.954zm-4.56 1.93c0 2.656-2.154 4.81-4.81 4.81-2.655 0-4.806-2.154-4.806-4.81 0-2.654 2.15-4.808 4.807-4.808 2.655 0 4.81 2.154 4.81 4.81zm-2.358 0l-3.924-2.267v4.535l3.924-2.267z"/></svg>',tooltip:"audio-player",buttonAction:AS.message.TOGGLE_GLOBAL_AUDIO,allowedFrameworks:["browser","GSA"],allowedBrowsers:["desktop"]},{title:"Window",cssClass:"windowmode",svgData:'<svg xmlns="http://www.w3.org/2000/svg" width="26.083" height="24.167" viewBox="0 0 26.083 24.167"><g ><path d="M16.402 6.052l-3.26 3.26 2.322 2.32 3.26-3.258 2.45 2.45.515-7.74-7.74.517zM6.656 15.795l3.26-3.26 2.323 2.323-3.26 3.26 2.45 2.45-7.74.516.515-7.74z"/></g></svg>',tooltip:"tooltip-fullscreen-enter",buttonAction:AS.message.TOGGLE_FULL_SCREEN,allowedFrameworks:["browser"],allowedBrowsers:["desktop"]}]},toc:{tocWidth:290,showImage:!0,showDescription:!0,tocBanner:!0},tocBanner:{height:48},offline:{dbName:"appstudio"},analytics:{GoogleAnalyticsInternal:{trackingId:"UA-15261962-27",enhancedLinkAttribution:!1,anonymizeIp:!0}}})}(),function(){"use strict";function a(a){AS.Session.getCurrentIssue()&&_.extend(a,{dimension2:AS.Session.getCurrentIssue().getCurrentArticle().type,dimension3:AS.Session.getCurrentPage().get("section").name,dimension4:AS.Session.getCurrentPageIndex().toString()}),AS.Session.authenticated&&_.extend(a,{dimension5:AS.Session.userid})}AS.message.on(AS.message.APPLICATION_START,function(){var a=new AS.structs.Set,b=AS.config.get("analytics.GoogleAnalyticsInternal");if(a.add(b.trackingId),AS.config.has(AS.Analytics.GADelegate.configKey)){var c=AS.config.get(AS.Analytics.GADelegate.configKey),d=c.trackingId;"string"==typeof d&&d.length>0&&a.add(c.trackingId);var e=c.enhancedLinkAttribution,f=c.anonymizeIp;void 0!==e&&(b.enhancedLinkAttribution=c.enhancedLinkAttribution),void 0!==f&&(b.anonymizeIp=c.anonymizeIp)}b.trackingId=a.getValues(),AS.config.get("analytics").GoogleAnalytics=b,AS.Analytics.registerDelegate(AS.Analytics.GADelegate),AS.Analytics.initialize()}),AS.Analytics={categories:{APPLICATION:"Application",ISSUE:"Issue",BOOKMARK:"Bookmark",EXTERNAL_LINK:"ExternalLink",SHARE:"Share",VIDEO:"PlayVideo",AUDIO:"PlayAudio",EMAIL_LINK:"EmailLink",FLIP:"Flip",ZOOMABLE_IMAGE:"ZoomableImage",GEOLOCATION:"Geolocation",POPUP:"Popup",LOCAL_LINK:"LocalLink",USER_ID:"User Id",CUSTOM_VARIABLE:"Custom Variable"},actions:{VIEW:"View",FULLSCREEN:"Fullscreen",ADD:"Add",INTERACT:"Interact",EMAIL:"Email",TWITTER:"Twitter",FACEBOOK:"Facebook",LINKEDIN:"LinkedIn",PLAYDURATION:"PlayDuration",AUTHENTICATED:"AUTHENTICATED",UNAUTHENTICATED:"UNAUTHENTICATED",USER_TRACKING:"User Tracking"},initialized:!1,delegates:[],initialize:function(){_.bindAll(this),this.initialized=!0,AS.message.on(AS.message.ONLINE,this.onlineChange),AS.message.on(AS.message.OFFLINE,this.onlineChange),this.setupEvents()},onlineChange:function(){this.setupEvents(),this.initDelegates()},setupEvents:function(){var a=AS.resourceManager.isOnline?"on":"off";AS.message[a](AS.message.TRACK_EVENT,this.trackEvent),AS.message[a](AS.message.TRACK_PAGE,this.trackPageView),AS.message[a](AS.message.UNAUTHENTICATED,this.stopTrackingUser),AS.message[a](AS.message.AUTHENTICATED,this.startTrackingUser)},initDelegates:function(){this.forEach(function(a){a.initialize()})},registerDelegate:function(a){this.delegates.push(a),a.configKey&&(a.config=AS.config.get(a.configKey)),a.initialize()},trackEvent:function(b){this.initialized&&(a(b),this.forEach(function(a){a.hasOwnProperty("trackEvent")&&a.trackEvent(b)}))},startTrackingUser:function(a,b){this.initialized&&this.forEach(function(c){c.hasOwnProperty("startTrackingUser")&&c.startTrackingUser(a,b)})},stopTrackingUser:function(a,b){this.initialized&&this.forEach(function(c){c.hasOwnProperty("stopTrackingUser")&&c.stopTrackingUser(a,b)})},trackPageView:function(a){this.initialized&&this.forEach(function(b){b.hasOwnProperty("trackPageView")&&b.trackPageView(a)})},resetTracking:function(a){this.initialized&&this.forEach(function(b){b.hasOwnProperty("resetTracking")&&b.resetTracking(a)})},forEach:function(a){this.delegates.forEach(a)}},AS.Analytics.GADelegate={configKey:"analytics.GoogleAnalytics",trackerNames:[],config:void 0,initialize:function(){if(!this.isInitialized()&&AS.resourceManager.isOnline){var a=(window._gaq=window._gaq||[],this),b=this.config.trackingId;!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),_.each(b,function(b){var c=b.toAlphaNumericString();ga("create",b,{name:c}),a.config.enhancedLinkAttribution===!0&&ga(c+".require","linkid","linkid.js"),a.config.anonymizeIp===!0&&ga(c+".set","anonymizeIp",!0),a.trackerNames.push(c)})}},trackEvent:function(a){this.isInitialized()&&_.each(this.trackerNames,function(b){ga(b+".send","event",a)})},startTrackingUser:function(a,b){var c=b&&b.userid?b.userid:"";""!==c&&this.dispatchUserIdTrackingEvent(AS.Analytics.actions.AUTHENTICATED,c)},stopTrackingUser:function(a,b){var c=b&&b.userid?b.userid:"";""!==c&&this.dispatchUserIdTrackingEvent(AS.Analytics.actions.UNAUTHENTICATED,c)},dispatchUserIdTrackingEvent:function(a,b){this.isInitialized()&&(ga("set","dimension5",a+":"+b),this.trackEvent({eventCategory:AS.Analytics.categories.CUSTOM_VARIABLE,eventAction:AS.Analytics.actions.USER_TRACKING,eventLabel:"-"}))},trackPageView:function(a){this.isInitialized()&&_.each(this.trackerNames,function(b){ga(b+".send","pageview",a)})},resetTracking:function(a){this.isInitialized()&&(window["ga-disable-"+AS.config.get("analytics")]=a)},isInitialized:function(){return"undefined"!=typeof ga}}}(),function(){"use strict";AS.PublicationModel=Backbone.Model.extend({idAttribute:"name",parse:function(a){var b;for(b in a)"issues"!==b&&a.hasOwnProperty(b)&&this.set(b,a[b],{silent:!0});var c=new AS.IssueSummaryCollection(a.issues),d=this;this.set("issues",c,{silent:!0}),c.forEach(function(a){a.set("publication",d)}),this.setUserAccess(!AS.AuthProxy.enabled||AS.Session.authenticated),this.storeLayout()},initialize:function(){this.urlRoot=AS.config.get("publication.urlRoot"),this.url=this.urlRoot+AS.config.get("publication.configFilename")},storeLayout:function(){var a=this.get("issues");a.length>0&&a.at(0).set("type","promoted")},setUserAccess:function(a,b){this.get("issues").forEach(function(c){var d=c.get("isFree")||a&&(!b||b.indexOf(c.get("actualId"))>=0);c.set("viewable",d)})},hasSubscriptionIssues:function(){for(var a=this.get("issues"),b=0;b<a.length;b++)if(!a.at(b).get("isFree"))return!0;return!1}})}(),function(){"use strict";var a=Backbone.Model.extend({defaults:{isConnected:!0,isZoomMode:!1,isSpreadMode:!0,activeItem:void 0,ispageNavigateViaAction:!1,isWidthFitMode:void 0,isVarientChanged:!1},initialize:function(){var a=this;_.bindAll(this),AS.message.on(AS.message.OFFLINE,a.offline),AS.message.on(AS.message.ONLINE,a.online),AS.message.on(AS.message.GOTO_STORE,a.resetModel)},offline:function(){this.set("isConnected",!1)},online:function(){this.set("isConnected",!0)},setZoomState:function(a){this.set("isZoomMode",a)},isZoomMode:function(){return this.get("isZoomMode")},setSpreadMode:function(a){this.set("isSpreadMode",a)},isSpreadMode:function(){return this.get("isSpreadMode")},setPageNavigateViaAction:function(a){this.set("ispageNavigateViaAction",a)},isPageNavigateViaAction:function(){return this.get("ispageNavigateViaAction")},setActiveToolbarItem:function(a){var b=this.get("activeToolbarItem");a&&b&&a===b?this.set("activeToolbarItem",void 0):(b&&AS.message.trigger(b),this.set("activeToolbarItem",a))},resetActiveToolbarItem:function(){this.setActiveToolbarItem(void 0)},setWidthFitMode:function(a){this.set("isWidthFitMode",a)},isWidthFitMode:function(){return this.get("isWidthFitMode")},setVarientChanged:function(a){this.set("isVarientChanged",a)},isVarientChanged:function(){return this.get("isVarientChanged")},resetVarientChanged:function(){this.set("isVarientChanged",!1)},resetModel:function(){this.setActiveToolbarItem(void 0),this.resetVarientChanged()}});AS.StateModel=new a}(),function(){"use strict";AS.PageModel=Backbone.Model.extend({defaults:function(){return{isLoading:!1,isLoaded:!1,article:void 0,variant:void 0,index:void 0,url:void 0,anchorPoint:null,responsive:!1}},url:function(){return this.resolveUrl(this.get("url"))},thumbnailUrl:function(){return this.resolveUrl(this.get("thumbnail"))},resolveUrl:function(a){return this.get("issue").urlRoot()+"/"+a},load:function(){this.set("isLoaded",!1),this.trigger(AS.PageModel.LOAD_START)},index:function(){return this.collection.indexOf(this)},loadComplete:function(){this.set("isLoaded",!0),this.set("isLoading",!1),this.set("isActive",!1),this.trigger(AS.PageModel.LOAD_COMPLETE),AS.message.trigger(AS.message.PAGE_LOADED,this.index())}}),_.extend(AS.PageModel,{LOAD_START:"page:loadStart",LOAD_COMPLETE:"page:loadComplete"})}(),function(){"use strict";AS.VariantModel=Backbone.Model.extend({defaults:{currentPageIndex:0,orientation:"landscape",pages:[],fontSize:"16",tocPages:[],width:void 0,height:void 0,facing:!1},initialize:function(a){var b=[],c={},d=this,e=0,f=[],g=a.width||AS.util.getDefaultWidthForPage(a.orientation),h=a.height||AS.util.getDefaulHeightForPage(a.orientation);this.facing=a.facing,a.pages.forEach(function(g){var h=g.section,i=b[b.length-1];h||(h={name:"contents",colour:"#999999",pages:[]}),i&&i.name===h.name||(b.push(h),h.pages=[],i=h),g.section=i,g.issue=a.issue,g.variant=d,g.index=e,g.properties&&g.properties.responsive&&("true"===g.properties.responsive||g.properties.responsive===!0)&&(g.responsive=!0),e++,i.pages.push(g),c[h.name]||(c[h.name]={name:h.name,colour:h.colour,pages:[]}),c[h.name].pages.push(g),g.article&&g.article.type&&"toc"===g.article.type.toLowerCase()&&f.push(g)}),this.attributes.tocPages=f,a.pages=a.pages.filter(function(a){return a.article&&a.article.type&&"toc"===a.article.type.toLowerCase()?!1:!0}),this.set({pages:new AS.PageCollection(a.pages),sections:b,singleSections:c,dimensions:AS.config.get("dimensions."+a.orientation),width:g,height:h})}})}(),function(){"use strict";function a(a,d){var f,g=d.at(0),h=window.innerWidth,i=window.innerHeight;if(AS.util.isTouch()){var j=AS.util.getCurrentScreenDimensions();h=j.width,i=j.height}f=d.filter(function(b){return b.get("orientation")===a}),0===f.length&&(a="portrait"===a?"landscape":"portrait",f=d.filter(function(b){return b.get("orientation")===a})),AS.StateModel.isSpreadMode()&&"portrait"!==AS.orientation.get()||(f=c(f)),AS.StateModel.isSpreadMode()&&"landscape"===AS.orientation.get()&&b(f).length&&(f=b(f)),"landscape"===a&&AS.util.isTouch()&&f[0]&&f[0].facing&&(h=2*i);var k=e(f,i,h);return k?k:g}function b(a){for(var b=[],c=0,d=a.length;d>c;c++)a[c].get("facing")&&b.push(a[c]);return b}function c(a){for(var b=[],c=0,d=a.length;d>c;c++)a[c].get("facing")===!1&&b.push(a[c]);return b}function d(a){for(var b={},c=a.length-1;c>=0;c--){var d=a[c],e=d.get("width"),f=d.get("height"),g={};e&&f&&(b[e]&&(g=b[e]),g[f]=d,b[e]=g)}return b}function e(a,b,c){var e,f=AS.constant.MULTI_VARIANT_WIDTH_TOLERANCE,g=d(a),h=Object.keys(g);if(a[0].get("facing")&&(f=0),h.length>0){var i=AS.util.getNearestValueWithScaleFactor(h,c,f),j=0,k=g[i],l=Object.keys(k);j=AS.util.getNearestValue(l,b),e=k[j]}return e}AS.IssueModel=Backbone.Model.extend({defaults:{scrolling:!1},offline:!1,url:function(){return this.urlRoot()+"/issue.json"},fetch:function(){function a(a){b.offline=a,b.constructor.__super__.fetch.apply(b,c)}var b=this,c=arguments;this.offlineCheck(a)},urlRoot:function(){var a=this.get("summary"),b="/";return a&&(b=AS.util.RETINA&&a.has("retinaBundle")?a.get("retinaBundle"):a.get("bundle"),b=b.replace(".zip","")),b=AS.util.stripTrailingSlash(b)},transformVariantsForFacingPages:function(a){for(var b,c=this,d=0;d<a.length;++d){var e=a[d];if("landscape"===e.orientation){if(!this.isFacingVariant(a[d]))return a;b=!0}}var f,g=[];return b?(!AS.util.isTouch()||AS.util.isTouch()&&AS.ConfigUtil.isLandscapeFacingEnabledForMobile())&&(f=a.filter(function(a){return"landscape"===a.orientation&&c.isFacingVariant(a)})):f=a.filter(function(a){return c.isFacingVariant(a)}),f&&f.forEach(function(a){var b=Object.assign({},a);b.facing=!0,b.width=a.width?a.width:AS.util.getDefaultWidthForPage(b.orientation),b.width=2*b.width,g.push(b)}),g.length?a.concat(g):a},isFacingVariant:function(a){for(var b,c=0;c<a.pages.length;c++)if(a.pages[c].pagePosition){b=!0;break}return b},parse:function(a){var b=this,c=this.get("summary"),d=AS.orientation.value();if(a=JSON.parse(decodeURIComponent(JSON.stringify(a))),a.id||(a.id=c.get("actualId")),!a.id)throw new Error("Issue ID not specified for issue '"+a.name+"'.");return a.actualId=a.id,a.id=AS.util.parseIssueId(a.id),AS.orientation.locked()&&(a.variants=a.variants.filter(function(a){return a.orientation===d})),a.variants=this.transformVariantsForFacingPages(a.variants),a.contents=new AS.PageCollection(a.contents),a.variants.forEach(function(c){c.issue=b,c.articles={};var d=0;c.pages.forEach(function(b,e){var f=b.contents[0].href,g=f.substr(1);try{b.article=a.contents.get(g).toJSON(),"toc"!==b.article.type.toLowerCase()&&("undefined"==typeof c.articles[b.article.id]&&(c.articles[b.article.id]=d),++d)}catch(h){throw new Error("Unmapped page in contents array: "+f)}})}),a.variants=new AS.VariantCollection(a.variants),a.variants.map(function(a){a.get("pages").length||a.destroy()}),a.currentVariant=a.variants.length>0&&a.variants.at(0),this.loaded=!0,a},setCurrentVariant:function(a){a&&(this.set("currentVariant",a),AS.message.trigger(AS.message.VARIANT_CHANGE,a.get("orientation")))},closestVariant:function(b){return a(b,this.get("variants"))},getPageById:function(a){var b;return this.get("variants").forEach(function(c){b=b||c.get("pages").get(a)}),b},getCurrentPage:function(){var a=this.get("currentVariant"),b=a.get("currentPageIndex"),c=a.get("pages").at(b);return c},getCurrentArticle:function(){var a=this.getCurrentPage();return a?a.get("article"):void 0},isValid:function(){var a,b=this.get("currentVariant");return b?(a=b.get("pages"),a&&a.length>0):!1},toJSON:function(){var a=Backbone.Model.prototype.toJSON.apply(this);return a.isFree=this.get("isFree")||!1,a.isOffline=this.offline,a},offlineCheck:function(a){var b,c,d;d=this.get("publication")?this.get("publication").id:AS.router.publicationModel.id,b=d+"-"+this.get("summary").id,AS.offlineManager.read(b,{success:function(b){c=!1,b&&(c=!0),"function"==typeof a&&a(c)},error:function(b){"function"==typeof a&&a(!1)}})}})}(),function(){"use strict";AS.IssueSummaryModel=Backbone.Model.extend({defaults:{imageSrc:""},masterKeys:["bundle","retinaBundle","tabletIssuePath","media:thumbnail","thumbnails","media:content","previews"],set:function(a,b){return"object"==typeof a&&(_.each(this.masterKeys,function(b){if(a.hasOwnProperty(b)){var c=a[b];if("object"==typeof c)for(var d in c)c.hasOwnProperty(d)&&(c[d]=this.convertURL(c[d]));else a[b]=this.convertURL(a[b])}},this),a.publishedDate=moment(a.publishedDate).toDate(),a.actualId=a.id,a.id=AS.util.parseIssueId(a.id),a.type="normal",a.pubtitle=AS.config.get("publication.title"),a.orientation=AS.orientation.value(),a.promo="store-promo".toLocaleString()),Backbone.Model.prototype.set.apply(this,arguments)},convertURL:function(a){return a.search(/http/)>=0?a:(this.urlRoot=AS.config.get("publication.urlRoot"),a=AS.util.stripLeadingSlash(a),this.urlRoot+a)},toJSON:function(){var a=Backbone.Model.prototype.toJSON.apply(this);return a.isFree=this.get("isFree")||!1,a}})}(),function(){"use strict";AS.ToolbarItemModel=Backbone.Model.extend({defaults:{title:"",cssClass:"",svgData:"",tooltip:"",buttonAction:"",view:null,allowedFrameworks:[],isMore:void 0}})}(),function(){"use strict";AS.IssueSummaryCollection=Backbone.Collection.extend({model:AS.IssueSummaryModel,comparator:function(a){return-a.get("publishedDate")}})}(),function(){"use strict";AS.VariantCollection=Backbone.Collection.extend({model:AS.VariantModel,getByOrientation:function(a){return this.filter(function(b){return b.get("orientation")===a})[0]}})}(),function(){"use strict";AS.PageCollection=Backbone.Collection.extend({model:AS.PageModel})}(),function(){"use strict";AS.ToolbarItemCollection=Backbone.Collection.extend({model:AS.ToolbarItemModel})}(),function(){"use strict";AS.PageLoadController=function(){_.bindAll(this),this.inProgress=!1},_.extend(AS.PageLoadController.prototype,{queue:void 0,currentPageIndex:0,inProgress:!1,$iframe:void 0,nextTimeoutId:0,initQueue:function(a){this.model=a,this.inProgress=!1,this.queue=this.model.get("pages").clone(),this.queue.comparator=this.loadSequenceComparator},start:function(a){this.inProgress||(this.startIndex=void 0,this.bringToFront("undefined"==typeof a?0:a),this.inProgress=!0,this.currentPageIndex=0)},pause:function(){this.inProgress&&(clearTimeout(this.nextTimeoutId),this.cancelCurrentLoadingPage(),this.inProgress=!1)},resume:function(){this.inProgress||(this.inProgress=!0,this.next())},shift:function(a){clearTimeout(this.nextTimeoutId),this.queue&&(this.pause(),this.bringToFront(a),this.resume())},cancelCurrentLoadingPage:function(){clearTimeout(this.nextTimeoutId),this.currentLoadingPage&&this.currentLoadingPage.off(AS.PageModel.LOAD_COMPLETE,this.pageLoadComplete)},bringToFront:function(a){a!==this.startIndex&&(this.startIndex=a,this.currentPageIndex=0,this.queue&&this.queue.sort())},next:function(){return clearTimeout(this.nextTimeoutId),this.queue&&this.currentPageIndex!==this.queue.length?(this.currentLoadingPage=this.queue.at(this.currentPageIndex),void(this.currentLoadingPage?(this.currentLoadingPage.on(AS.PageModel.LOAD_COMPLETE,this.pageLoadComplete),this.currentLoadingPage.load()):this.pageLoadComplete())):void this.pause()},loadSequenceComparator:function(a,b){var c=this.model.get("pages"),d=c.indexOf(a),e=c.indexOf(b),f=Math.abs(this.startIndex-d),g=Math.abs(this.startIndex-e+.5);return f-g},pageLoadComplete:function(){this.cancelCurrentLoadingPage(),this.currentPageIndex++,this.inProgress&&(this.nextTimeoutId=setTimeout(this.next,100))}})}(),function(){"use strict";var a=AS.util.iframeCount(),b=Math.floor(a/2);AS.PageListViewController=function(a){_.bindAll(this),this.pageListView=a,this.pages=[],this.frames=[],this.unusedFrames=[],this.currentPage=void 0},AS.PageListViewController.prototype={pages:void 0,frames:void 0,unusedFrames:void 0,currentPage:void 0,pageListView:void 0,setFrameCount:function(a){var b;if(this.releaseAllFrames(),this.frames.length>a)for(;this.frames.length>a;)this.frames.pop().dispose();else for(;this.frames.length<a;)b=new AS.PageFrameView,this.frames.push(b),this.unusedFrames.push(b);
},addPage:function(a,b){void 0===b?this.pages.push(a):this.pages[b]=a},getPageAt:function(a){return this.pages[a]},releaseFrame:function(a){a.release(),-1===this.unusedFrames.indexOf(a)&&this.unusedFrames.push(a)},assignFrame:function(a){if(a.frameView)return a.validate(),a.frameView;var b=this.unusedFrames.shift(),c=this;return b&&a.attachFrameView(b),this.frames=this.frames.sort(this.framesComparator),_.each(this.frames,function(a){a.$el.attr("data-index",c.frames.indexOf(a))}),b},pageForFrame:function(a){var b;return _.each(this.pages,function(c){c.frameView===a&&(b=c)}),b},framesComparator:function(a,b){var c=this.pageForFrame(a),d=this.pageForFrame(b),e=c?c.pageIndex:0,f=d?d.pageIndex:0;return e-f},assignAllFrames:function(a){var c,d,e=this,f=Math.max(a-b,0),g=Math.min(a+b,this.pages.length-1);for(c=0;f>c;c++)d=this.pages[c],d.frameView&&this.releaseFrame(d.frameView);for(c=g+1;c<this.pages.length;c++)d=this.pages[c],d.frameView&&this.releaseFrame(d.frameView);for(_.each(this.frames,function(a){var b=a.pageIndex();-1!==b&&(f>b||b>g)&&e.releaseFrame(a)}),c=f;g>=c;c++)this.assignFrame(this.pages[c])},releaseAllFrames:function(){this.pages.forEach(function(a){a.releaseFrameView()}),this.frames.forEach(this.releaseFrame)},getCurrentPage:function(){return this.currentPage},setCurrentPage:function(a){this.currentPage=a,a&&this.assignAllFrames(this.getCurrentPageIndex())},getCurrentPageIndex:function(){return this.getCurrentPage().pageIndex},setCurrentPageIndex:function(a){return this.setCurrentPage(this.pages[a]),this.currentPage},updatePageVisibility:function(a){_.each(this.pages,function(b){b.updateVisibility(a)})},disposePages:function(){_.each(this.pages,function(a){a.dispose()}),this.pages=[]},disposeUnusedPages:function(){for(var a=0;this.pages.length>this.pageListView.collection.length;)this.pages.pop().dispose(),a++}}}(),function(){"use strict";var a="ASlaunch";AS.AppController=function(){_.bindAll(this),this.pageLoadController=new AS.PageLoadController,this.audioController=new AS.AudioPlayerController,AS.message.on(AS.message.ISSUE_LOADED,this.issueLoaded),AS.message.on(AS.message.ISSUE_UNLOADED,this.issueUnloaded),AS.message.on(AS.message.PUBLICATION_LOADED,this.onPublicationLoaded),AS.message.on(AS.message.VARIANT_CHANGE,this.variantChanged),AS.message.on(AS.message.PAGE_INITIALISED,this.pageNavigate),AS.message.on(AS.message.TOGGLE_FULL_SCREEN,this.toggleFullScreen),AS.message.on(AS.message.SHOW_GEOLOCATION,this.onShowGeolocation),AS.message.on(AS.message.SHOW_VIDEO,this.onShowVideo),AS.message.on(AS.message.SHOW_ZOOMABLE_IMAGE,this.onShowZoomableImage),this.orientationSetup()},_.extend(AS.AppController.prototype,{widgetViews:{geolocationView:null,videoView:null,imageView:null},issueLoaded:function(a){this.model=a,this.audioController.start()},startQueue:function(){var a=this.model.get("currentVariant");this.pageLoadController.initQueue(a),this.pageLoadController.start(a.get("currentPageIndex"))},variantChanged:function(){this.pageLoadController.pause(),_.delay(this.startQueue)},issueUnloaded:function(){this.pageLoadController.pause(),this.audioController.stop()},pageNavigate:function(a){this.pageLoadController.shift(a)},toggleFullScreen:function(a){var b=AS.util.isFullScreen();b?(AS.util.exitFullScreen(),AS.message.trigger(AS.message.FULL_SCREEN_EXIT)):(AS.util.requestFullScreen(a),AS.message.trigger(AS.message.FULL_SCREEN_ENTER))},onShowGeolocation:function(a,b){return AS.extensions.check("Geolocation")?(this.widgetViews.geolocationView||(this.widgetViews.geolocationView=new AS.GeolocationView(this.getPageDimensions())),this.widgetViews.geolocationView.render(),void this.widgetViews.geolocationView.openGeolocation(a,b)):void AS.message.trigger(AS.message.NOTIFICATION_SHOW,"geolocation-unavailable".toLocaleString())},onShowVideo:function(a){this.widgetViews.videoView||(this.widgetViews.videoView=new AS.PopupVideoView(this.getPageDimensions())),this.widgetViews.videoView.render(),this.widgetViews.videoView.initVideo(a)},onShowZoomableImage:function(a){this.widgetViews.imageView||(this.widgetViews.imageView=new AS.ZoomableImageView(this.getPageDimensions())),this.widgetViews.imageView.render(),this.widgetViews.imageView.initImage(a)},getPageDimensions:function(){if(this.model){var a=this.model.get("currentVariant"),b=a.get("dimensions").page;return b}},orientationSetup:function(a){AS.orientation.checkFeature()&&(AS.orientation.setup(),$(window).on("orientationchange",function(a){AS.message.trigger(AS.message.ORIENTATION_CHANGE,AS.orientation.get(a))}))},onPublicationLoaded:function(){AS.cookies.get(a)||_.defer(function(){AS.message.trigger(AS.message.FIRST_LAUNCH)}),AS.cookies.set(a,!0,2592e3,"/")}})}(),function(){"use strict";AS.AudioTrack=Backbone.Model.extend({defaults:{playing:!1,audioUrl:"",currentDuration:"0",totalDuration:"0",updateScrubber:!0,trackNumber:0,totalTracks:0},togglePlay:function(){this.set("playing",!this.get("playing"))}}),AS.AudioTrackCollection=Backbone.Collection.extend({model:AS.AudioTrack}),AS.AudioPlayerController=function(a){"undefined"==typeof a&&(a=!0),_.bindAll(this),a&&this.initialize()},_.extend(AS.AudioPlayerController.prototype,{$audioEl:void 0,id:"ASGlobalAudioPlayer",audioController:void 0,useMediaElement:!1,mediaElement:void 0,mediaElementSetup:!1,mediaElementInstantPlay:!1,audioQueue:new AS.AudioTrackCollection,currentAudioTrack:0,initialize:function(){this.mediaElementCheck(),this.injectAudioElement(),AS.message.on(AS.message.PLAY_GLOBAL_AUDIO,this.addAudioTrack),AS.message.on(AS.message.PREV_GLOBAL_AUDIO,this.prevTrack),AS.message.on(AS.message.NEXT_GLOBAL_AUDIO,this.nextTrack),AS.message.on("audio:displayTracks",this.displayTracks)},mediaElementCheck:function(){Modernizr.touch||AS.browser.ie?this.useMediaElement=!1:this.useMediaElement=!0},addAudioTrack:function(a){if(this.audioQueue.length<1||this.audioQueue.at(0).get("audioUrl")!==a.url){var b=new AS.AudioTrack({audioUrl:a.url});this.audioQueue.add(b,{at:0}),this.playAudio(b)}else this.audioQueue.at(0).togglePlay()},injectAudioElement:function(){return this.$audioEl?this.$audioEl:(this.$audioEl=$("<audio>",{id:this.id}),this.$audioEl.on("timeupdate",this.updateTime),this.$audioEl.on("loadeddata",this.loadedmetadata),$("body").append(this.$audioEl),void(this.audioControl=this.$audioEl[0]))},setupMediaElement:function(){var a=this;this.mediaElementSetup||(this.mediaElement=new MediaElement(this.id,{enablePluginDebug:!1,pluginPath:AS.router.readerURL+"video-player/",success:function(b,c){a.mediaElementSetup=!0,a.mediaElementInstantPlay&&(a.mediaElementInstantPlay=!1,b.play())},error:function(a){var b="audio-missing";/\.(ASND|WAV|AIFF|MP3|ogg|oga|AIF|AIFC)$/i.test(a.getAttribute("src"))&&(b="audio-flash"),AS.message.trigger(AS.message.NOTIFICATION_SHOW,b.toLocaleString())}}))},changeAudioController:function(){this.audioControl=this.mediaElement},playAudio:function(a){if("undefined"==typeof a)return void this.audioQueue.at(this.currentAudioTrack).set("playing",!0);var b=a.get("audioUrl");a.set("trackNumber",this.currentAudioTrack),a.set("totalTracks",this.audioQueue.length),this.view.setModel(a),"string"==typeof b&&(this.mediaElementSetup?(this.audioControl=this.mediaElement,this.audioControl.setSrc(b)):this.$audioEl.attr("src",b)),this.useMediaElement&&!this.mediaElementSetup&&(this.setupMediaElement(),this.changeAudioController()),this.audioQueue.at(this.currentAudioTrack).set("playing",!0),a.on("change:playing",this.toggleAudio),AS.message.on(AS.message.UPDATE_GLOBAL_AUDIO,this.updateAudioTime),this.useMediaElement?this.mediaElementSetup?this.audioControl.play():this.mediaElementInstantPlay=!0:this.audioControl.play()},pauseAudio:function(){this.audioControl.pause(),this.audioQueue.at(this.currentAudioTrack).set("playing",!1)},toggleAudio:function(){this.audioControl.paused?this.audioControl.play():this.audioControl.pause()},updateTime:function(a){var b=a.target.currentTime;try{this.audioQueue.at(this.currentAudioTrack).set("currentDuration",b)}catch(c){}},updateAudioTime:_.throttle(function(){this.audioControl.currentTime=this.audioQueue.at(this.currentAudioTrack).get("currentDuration")},1e3),loadedmetadata:function(a){var b=a.target.duration;this.audioQueue.at(this.currentAudioTrack).set("totalDuration",b)},nextTrack:function(){this.currentAudioTrack>0&&(this.currentAudioTrack=this.currentAudioTrack-1,this.playAudio(this.audioQueue.at(this.currentAudioTrack)))},prevTrack:function(){this.currentAudioTrack<this.audioQueue.length-1&&(this.currentAudioTrack=this.currentAudioTrack+1,this.playAudio(this.audioQueue.at(this.currentAudioTrack)))},displayTracks:function(){_.each(this.audioQueue.models,function(a){},this)},start:function(){try{this.view&&this.stop(),this.audioQueue.reset({silent:!0})}catch(a){}this.view=new AS.AudioView({model:new AS.AudioTrack}),$("body").append(this.view.render().el),this.view.hideView()},stop:function(){this.$audioEl.attr("src",""),this.view&&this.view.dispose()}})}(),function(){"use strict";AS.View=function(){Backbone.View.apply(this,arguments),this._setupWiring()},AS.View.extend=Backbone.View.extend,_.extend(AS.View.prototype,Backbone.View.prototype,{renderedOnce:!1,render:function(){var a=this.renderTemplate();if(a){var b=$(a),c=b.get(0).attributes;c=_.object(_.pluck(c,"name"),_.pluck(c,"value")),this.renderedOnce?(this.$el.html(b.html()),this.$el.attr(c)):this.setElement(b)}return this.renderedOnce=!0,this},renderTemplate:function(){var a;return this.template&&("string"==typeof this.template&&(this.template=AS.View.resolveTemplate(this.template)),"function"==typeof this.template&&(a=this.template(this.toJSON()))),a},toJSON:function(){return this.model?this.model.toJSON():null}}),AS.View.resolveTemplate=function(a){return"undefined"!=typeof window.JST?window.JST[a]:_.template($("#"+a).html())},AS.config.mixin(AS.View.prototype),AS.SingletonView=function(){AS.View.apply(this,arguments),this._setupWiring()},AS.SingletonView.extend=AS.View.extend,AS.SingletonView.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},_.extend(AS.SingletonView.prototype,AS.View.prototype),AS.config.mixin(AS.SingletonView.prototype)}(),function(){"use strict";AS.util.vendorPrefixedEvent("transitionEnd"),AS.PopupView=AS.View.extend({events:Modernizr.touch?{"focus input":"onInputFocus","touchend a":"onAnchorClick","touchmove .popup-back":"onTouchmove","touchmove .popup-content":"onTouchmove"}:{"click .popup-back":"close","click .popup-content":"contentClick"},initialize:function(){_.bindAll(this),AS.message.on(AS.message.RESIZE,this.resize)},render:function(){return AS.View.prototype.render.call(this),this.$content=this.$(".popup-content"),this},resize:function(){var a=-10;this.$content.children().each(function(){a+=this.offsetHeight}),this.$content.animate({height:a+"px","margin-top":-Math.round(a/2)+"px"})},open:function(a){this.$el.css("display","").addClass("popup"),_.delay(_.bind(function(){this.$(".popup-content").css({"margin-left":-(this.$content.width()/2)+"px","margin-top":-(this.$content.height()/2)+"px"}),this.$el.addClass("popup-open")},this)),$(document).on("keyup",this.keydownHandler)},close:function(a){this.$el.removeClass("popup-open"),setTimeout(this.closeEnd,300),$(document).off("keyup",this.keydownHandler)},closeEnd:function(a){this.$el.css("display","none"),AS.browser.ios&&AS.util.iosDismissKeyboard()},contentClick:function(a){a.stopPropagation()},keydownHandler:function(a){27===a.which&&this.close(null,!0)},onInputFocus:function(a){},onAnchorClick:function(a){AS.browser.ios&&($(a.currentTarget).click(),a.preventDefault())},onTouchmove:function(a){a.preventDefault(),a.stopPropagation()}})}(),function(){"use strict";AS.AppView=AS.View.extend({tagName:"div",id:"app-view",className:"appview",modalView:null,popupVideo:null,currentView:void 0,events:{},viewportHeightFix:function(){var a=window.innerHeight;this.height!==a&&(this.$el.height(a),this.height=a,this.currentView&&this.currentView.layout&&this.currentView.layout())},initialize:function(){_.bindAll(this),this.height=window.innerHeight,AS.browser.android&&(_.extend(this.events,{touchend:"viewportHeightFix"}),this.delegateEvents(),this.viewportHeightFix(),AS.message.on(AS.message.ORIENTATION_CHANGE,_.debounce(this.viewportHeightFix.bind(this),250))),AS.orientation.desktop()&&$(window).on("resize",this.windowResize),AS.browser.iphone&&$(document).on("visibilitychange",this.visibilityChange),$(document).on(AS.util.vendorPrefixedEvent("fullscreenchange").toLowerCase(),this.fullScreenChange),AS.message.on(AS.message.SHOW_VIDEO,this.onShowVideo),AS.message.on(AS.message.ISSUE_LOADED,this.issueLoaded),AS.message.on(AS.message.VARIANT_CHANGE,this.variantChanged),AS.message.on(AS.message.SHOW_IN_POPUP,this.onShowInPopup),this.setupTouchHead(),this.setMetaTags()},visibilityChange:function(){document.hidden||AS.message.trigger(AS.message.VISIBILITY_CHANGE)},render:function(){return this.$el.toggleClass("full-screen-supported",AS.util.FULL_SCREEN_SUPPORTED),AS.message.trigger(AS.message.TRACK_PAGE,{page:window.location.href}),this},initView:function(a,b,c){function d(a,b){var c=$("<style />");c.attr("id","store"),c.attr("type","text/css"),c.html(a),$("head").append(c),_.defer(b)}function e(a,b){$.ajax({url:a.stylesheet,dataType:"text",async:!0,success:function(c){d(c,function(){a.stylesheetLoaded=!0,b()})}})}function f(a,b){function c(){a.$el.hide(),$("body").removeClass(a.id+"-view"),$("html").removeClass(a.id+"-html"),b()}0===a.el.style.opacity||"0"===a.el.style.opacity?_.defer(c):a.$el.animate({opacity:"0"},{duration:350,complete:c}),a.offScreen&&a.offScreen()}function g(a){return a.stylesheetLoaded||a.renderedOnce?(a.$el.show(),i.currentView=a,$("html").addClass(a.id+"-html"),$("body").addClass(a.id+"-view"),void _.defer(function(){a.update&&a.update(),"function"==typeof c&&c(),a.$el.animate({opacity:1},{duration:350,complete:function(){a.onScreen&&a.onScreen()}})})):h(a,g)}function h(a,b){function c(){var c=a.render().el;c.parentElement||i.$el.append(c),b&&b(a)}return!a.stylesheet||a.stylesheetLoaded?c():void e(a,c)}var i=this;this.currentView!==a?this.currentView?(f(this.currentView,function(){g(a)}),h(a)):g(a):b?(h(a),g(a)):"function"==typeof c&&c()},issueLoaded:function(a){var b=a.get("currentVariant"),c=b.get("orientation");this.variantChanged(c),AS.message.trigger(AS.message.TRACK_EVENT,{eventCategory:AS.Analytics.categories.ISSUE,eventAction:AS.Analytics.actions.VIEW,eventLabel:a.get("actualId")})},variantChanged:function(a){this.$el.removeClass().addClass(a)},windowResize:function(){AS.message.trigger(AS.message.RESIZE)},onShowInPopup:function(a){this.modalView||(this.modalView=new AS.ModalView,this.modalView.render(a))},setupTouchHead:function(){Modernizr.touch||AS.config.get("app.mobileOnly")?(this.setTouchIcons(),this.setTouchAppTitle(),this.setTouchLoadScreens(),this.applyTouchClass()):this.applyNoTouchClass()},setTouchAppTitle:function(){$("head").append('<meta name="apple-mobile-web-app-title" content="'+AS.config.get("publication.title")+'">')},setTouchIcons:function(){var a,b=AS.config.get("icons"),c=AS.config.get("userIcons"),d={};c=_.pick(c,function(a){return"string"==typeof a.href&&a.href.length}),_.merge(d,b,c),d&&($("head link[rel=apple-touch-icon]").remove(),_.each(d,function(b,c){a=$("<link></link>"),a.attr("href",b.href).attr("rel",b.rel),b.size&&a.attr("sizes",b.size),$("head").append(a)}))},setTouchLoadScreens:function(){var a,b,c=AS.config.get("loading"),d=AS.config.get("userLoading"),e={};d=_.pick(d,function(a){return"string"==typeof a.href&&a.href.length}),_.merge(e,c,d),e&&_.each(e,function(c,d){b="",a=$("<link></link>"),a.attr("href",c.href).attr("rel",c.rel),c.width&&(b+="(device-width: "+c.width+")"),c.height&&(b+=" and (device-height: "+c.height+")"),c.orientation&&(b+=" and (orientation: "+c.orientation+")"),c.pixelDensity&&(b+=" and (-webkit-device-pixel-ratio: "+c.pixelDensity+")"),a.attr("media",b),$("head").append(a)})},setMetaTags:function(){var a,b=AS.config.get("meta");b&&_.each(b,function(b,c){a=$("<meta />",b),$("head").append(a)})},applyTouchClass:function(){$("html").addClass("touch").removeClass("no-touch")},applyNoTouchClass:function(){$("html").addClass("no-touch").removeClass("touch")}})}(),function(){"use strict";AS.OfflineModel=Backbone.Model.extend({defaults:{offlineTitle:"offline-title".toLocaleString(),offlineText:"offline-text".toLocaleString(),loaderColor:AS.config.get("app.loading.backgroundColor"),loaderFontColor:AS.config.get("app.loading.color")}}),AS.OfflineView=AS.View.extend({template:"nooffline-tmpl",model:new AS.OfflineModel,initialize:function(){_.bindAll(this)},render:function(){AS.View.prototype.render.call(this);var a=AS.config.get("app.loading");return this.$("#loading-image").on("load",function(){$(this).parent().css({"margin-top":-this.height/2,"margin-left":-this.width/2})}).attr("src",a.image),this}})}(),function(){"use strict";AS.IssueView=AS.View.extend({id:"issue",injectId:"IssueView",rendered:!1,stylesheet:"webreader/stylesheets/issue.css",$pagelistview:void 0,dimensions:null,debounceLayout:void 0,initialize:function(){_.bindAll(this),this.debounceLayout=_.debounce(this.layout,250),AS.message.on(AS.message.TOGGLE_PAGE_FIT_MODE,_.debounce(this.toggleFitMode,200))},render:function(){var a=this,b=this.model.get("currentVariant");return this.dimensions=b.get("dimensions"),this.rendered?(this.children.forEach(function(b){b.model=a.model,b.render()}),this.$pagelistview=this.$el.find("#pagelistview"),this.layout(),this):(AS.View.prototype.render.call(this),this.children=this.components.map(function(b){return b({model:a.model})}),this.children.forEach(function(b){a.$el.append(b.render().$el)}),this.rendered=!0,this.$pagelistview=this.$el.find("#pagelistview"),this.layout(),this)},layout:function(a){function b(){r.layoutChanged(j),r.$pagelistview[0].removeEventListener("transitionend",b)}var c=window.innerHeight,d=window.innerWidth,e=AS.config.get("animation.issue"),f=parseInt(AS.Session.getCurrentPage().toJSON().properties.height,10),g=(this.dimensions.timeline.height,c),h=AS.ConfigUtil.getMaxPageScale(),i=g,j=1,k="top left",l={},m=parseInt(AS.Session.getCurrentVariant().get("height"),10),n=AS.Session.getCurrentPage().get("responsive");f=f?f:this.dimensions.page.height,f>m&&(f=m);var o=parseInt(AS.Session.getCurrentPage().toJSON().properties.width,10);if(n&&(o=d),AS.util.getCurrentScreenDimensions(),isNaN(o)?o=AS.util.getDefaultWidthForPage(AS.Session.getCurrentVariant().get("orientation")):AS.util.canShowFacingPage()&&(o=2*o),AS.ConfigUtil.isFitModeEnabled())if(n)AS.message.trigger(AS.message.PAGE_FIT_MODE_HIDE,n);else{var p,q;void 0===AS.StateModel.isWidthFitMode()&&AS.StateModel.setWidthFitMode(AS.ConfigUtil.isWidthFitModeEnabled()),p=d/o,q=Math.min(d/o,g/f),h&&(q=q>h?h:q),AS.message.trigger(AS.message.PAGE_FIT_MODE_HIDE,p===q),j=AS.StateModel.isWidthFitMode()?p:q,o*=j,i/=j}else n||(o=Math.min(d,o)),AS.message.trigger(AS.message.PAGE_FIT_MODE_HIDE,!0);_.extend(l,{height:i,width:o}),a=a||e.pagelistview.transtionDuration,_.extend(l,AS.util.CSSTransformString({scale:j,duration:a,origin:k}));var r=this;this.$pagelistview[0].addEventListener("transitionend",b,!1),this.$pagelistview.css(l)},toggleFitMode:function(){AS.StateModel.setWidthFitMode(!AS.StateModel.isWidthFitMode()),AS.message.trigger(AS.message.PAGE_FIT_DID_LAYOUT),this.layout(1)},layoutChanged:function(a){var b=AS.config.get("pageLoading.imageSize")/a;this.$(".page").css({"background-size":b}),_.delay(function(){AS.message.trigger(AS.message.REFRESH_SCROLL_PAGEVIEW)},AS.config.get("animation.issue.pageMoveDuration"))},offScreen:function(){this.children.forEach(function(a){a.offScreen&&a.offScreen()}),AS.orientation.desktop()?AS.message.off(AS.message.RESIZE,this.debounceLayout):AS.orientation.locked()&&AS.message.off(AS.message.ORIENTATION_CHANGE,this.debounceLayout),AS.message.off(AS.message.ISSUE_LAYOUT,this.layout),AS.browser.iphone&&AS.message.off(AS.message.VISIBILITY_CHANGE,this.debounceLayout)},onScreen:function(){this.children.forEach(function(a){a.onScreen&&a.onScreen()}),AS.orientation.desktop()?AS.message.on(AS.message.RESIZE,this.debounceLayout):AS.orientation.locked()&&AS.message.on(AS.message.ORIENTATION_CHANGE,this.debounceLayout),AS.message.on(AS.message.ISSUE_LAYOUT,this.layout),AS.browser.iphone&&AS.message.on(AS.message.VISIBILITY_CHANGE,this.debounceLayout)}})}(),function(){"use strict";var a=500,b="show",c="hide";AS.LoaderModel=Backbone.Model.extend({defaults:function(){return AS.config.get("app.loading")}}),AS.LoaderView=AS.View.extend({template:"loader-tmpl",isShowing:!1,loaded:!1,orientationChange:!1,iframeCount:AS.util.iframeCount(),iframeLoaded:0,animationTime:1e3,animationEase:null,showScreen:function(){return"loader-show"},showLoader:function(){return this.showScreen()+" loader-loading"},showRotate:function(){return this.showScreen()+" loader-rotate"},showComplete:function(){return"loader-complete"},showHide:function(){return"loader-hide"},initialize:function(){_.bindAll(this);var a=AS.config.get("app.loading");this.model=new AS.LoaderModel,this.model.set(a),this.animationTime=AS.config.get("animation.loaderView.fadeDuration"),this.animationEase=AS.config.get("animation.loaderView.fadeEasing"),a&&(this.template="loadercustom-tmpl"),this.render()},attachEvents:function(){AS.message.on(AS.message.PAGE_LOADED,this.hide),AS.message.on(AS.message.ISSUE_LOADING_ERROR,this.hide),AS.message.on(AS.message.STORE,this.hideLoader),AS.message.on(AS.message.CLOSE_LOADING,this.hideLoader)},removeEvents:function(){AS.message.off(AS.message.PAGE_LOADED,this.hide),AS.message.off(AS.message.ISSUE_LOADING_ERROR,this.hide),AS.message.off(AS.message.STORE,this.hideLoader),AS.message.off(AS.message.CLOSE_LOADING,this.hideLoader)},loadIssue:function(a,b,c,d){this.$el.removeClass();var e=this;this.loadingIndex=c?c:1,this.showTheLoader(function(){e.attachEvents(),AS.message.trigger(AS.message.LOADING_OPEN,{issueId:a,variant:b,pageNumber:c,articleId:d})})},showTheLoader:function(a){this.$el.find(".message").hide(),this.$el.find(".loading").show(),this.$el.removeClass("loader-display-none"),this.$el.addClass(this.showLoader()).css("opacity",0),this.animateTheLoader(b,a)},animateTheLoader:function(a,c){this.$el.animate({opacity:a===b?1:0},this.animationTime,this.animationEase,c)},hide:function(b){this.iframeLoaded+=1,b+=1,this.orientationChange||parseInt(b,10)!==parseInt(this.loadingIndex,10)||(this.$el.addClass(this.showComplete()),_.delay(this.hideLoader,a),this.loadingIndex=void 0)},render:function(){if(this.rendered)return this;AS.View.prototype.render.call(this),this.rendered=!0;var a=AS.config.get("app.loading"),b=this,c=new Image;return c.src=a.image,c.onload=function(){b.$("#loading-image").attr("src",a.image).parent().css({"margin-top":-this.height/2,"margin-left":-this.width/2}),b.$("#loading-text").css({"margin-top":this.height/2})},this},hideLoader:_.debounce(function(){var a=this;this.animateTheLoader(c,function(){a.removeEvents(),a.$el.removeClass(),a.$el.addClass("loader-display-none"),a.$el.find(".message").hide()}),this.loadingIndex=void 0},a)})}(),function(){"use strict";var a=AS.util.vendorPrefixedEvent("transitionEnd"),b=["#9d261d","#f89406","#b4b4b4","#00adef","#46a546"];AS.NotificationModel=Backbone.Model.extend({defaults:{homeScreen:"home-screen".toLocaleString(),logLevel:AS.NOTIFICATION_LEVEL.INFO,currentMsg:""}}),AS.NotificationView=AS.View.extend({template:"notification-tmpl",model:new AS.NotificationModel,$message:void 0,$messageBar:void 0,currentMsg:"",$iosHome:void 0,standalone:!1,showing:!1,options:{userDismiss:!1,timer:5e3,level:AS.NOTIFICATION_LEVEL.INFO},events:{"click .close":"hide"},initialize:function(){_.bindAll(this),this.render(),window.navigator.standalone&&(this.standalone=!0),AS.message.on(AS.message.NOTIFICATION_SHOW,this.show),AS.message.on(AS.message.NOTIFICATION_HIDE,this.hide),this.model.on("change:currentMsg",this.setCurrentMessage)},render:function(){return AS.View.prototype.render.call(this),this.$message=this.$(".inner-message"),this.$messageBar=this.$("#messageBar"),this},hide:function(){this.model.set("currentMsg","")},show:function(a,b){function c(b,c){"function"==typeof e[c]&&e[c](b,a)}var d=_.extend(_.clone(this.options),b||{}),e=this.handleOption(this);d.level>this.model.get("logLevel")||(_.forEach(d,c),this.model.set("currentMsg",a))},setCurrentMessage:function(b,c){if(!c)return this.$message.html(""),void this.$messageBar.removeClass("active");if(!b.previous("currentMsg"))return this.$message.html(c),void this.$messageBar.addClass("active");var d=function(a){this.currentMsg=c,this.$message.html(c),this.$message.removeClass("change")};this.$message.one(a,_.bind(d,this)).addClass("change")},handleOption:function(a){var b=a;return{userDismiss:function(a){b.showClose(a)},timer:function(a,c){b.startHideTimer(a,c)},level:function(a){b.levelColour(a)}}},showClose:function(a){this.$(".close").toggleClass("hide",!a)},startHideTimer:function(a,b){var c=function(){return this.model.get("currentMsg")===b?this.$el.is(":hover")?void this.$el.one("mouseleave",_.bind(function(){AS.message.trigger(AS.message.NOTIFICATION_HIDE)},this)):void AS.message.trigger(AS.message.NOTIFICATION_HIDE):void 0};_.delay(_.bind(c,this),a||5e3)},levelColour:function(a){return"undefined"!=typeof b[a-1]?void this.$messageBar.css({background:b[a-1]}):void this.$messageBar.css({background:"#b4b4b4"})}})}(),function(){"use strict";AS.ModalView=AS.View.extend({backgroundModal:null,isOpen:!1,gutter:120,pageDimensions:null,events:Modernizr.touch?{"touchstart .dummyContainer":"onModalClick_"}:{"click .dummyContainer":"onModalClick_"},initialize:function(a){_.bindAll(this),this.pageDimensions=a},render:function(a){return this.renderedOnce||AS.View.prototype.render.call(this),$("body").append(this.el),AS.orientation.desktop()&&$(document).on("keyup",this.keydownHandler),this.delegateEvents(this.events),this},keydownHandler:function(a){27===a.which&&(this.removeView(),$(document).off("keyup",this.keydownHandler))},removeView:function(){$(this.el).remove(),AS.message.trigger(AS.message.CLOSE_POPUP),this.isOpen=!1},onModalClick_:function(a){this.isValidTarget(a.target)&&this.removeView()},isValidTarget:function(a){return $(a).hasClass("dummyContainer")||$(a).hasClass("popupHolder")}})}(),function(){"use strict";AS.IE9IframeView=AS.View.extend({template:AS.View.resolveTemplate("ie9iframe-tmpl"),initialize:function(){},render:function(){return $(this.el).html(this.template()),this}})}(),function(){"use strict";var a=Modernizr.touch;AS.TTipView=AS.View.extend({template:"ttip-tmpl",defaults:{ttipAlign:"middle",ttipContent:"There is no content for this widget",ttipWidth:"",ttipSide:"top",ttipHeight:"",ttipDistance:10,ttipTextAlign:"center"},initialize:function(){_.bindAll(this),a=Modernizr.touch||AS.config.get("app.mobileOnly"),a||($("body").delegate("[data-ttip-content]","mouseenter",this.showttip),this.render())},render:function(){return AS.View.prototype.render.call(this),this.$el.hide(),this},showttip:function(a){var b=$(a.currentTarget),c=b.data(),d=this.mergeDefaults(c),e=b.offset(),f={left:e.left,top:e.top,height:b.outerHeight(),width:b.outerWidth(),windowHeight:$(window).height(),windowWidth:$(window).width(),offset:d.ttipDistance};this.$el.hide(),this.removeAttr(),this.$el.find("span").html(d.ttipContent),this.$el.css({width:d.ttipWidth,height:d.ttipHeight}),this.$el.addClass(this.setArrowPosition(d.ttipSide)),this.$el.addClass(this.setArrowAlign(d.ttipAlign)),this.$el.addClass(this.setTextAlign(d.ttipTextAlign)),this.$el.css(this.setPosition(d.ttipSide,d.ttipAlign,f)),this.$el.show(),b.on("mouseleave.ttip click.ttip",this.mouseOut)},setPosition:function(a,b,c){var d,e,f;switch(a){case"bottom":d={top:parseInt(c.top,10)+parseInt(c.height,10)+parseInt(c.offset,10)+"px"},"right"===b?d.right=parseInt(c.windowWidth,10)-parseInt(c.width,10)-parseInt(c.left,10)+"px":"left"===b?d.left=parseInt(c.left,10):(d.left=parseInt(c.left,10)+parseInt(c.width,10)/2,d["margin-left"]="-"+this.$el.outerWidth()/2+"px");break;case"top":if(d={bottom:parseInt(c.windowHeight,10)-parseInt(c.top,10)+parseInt(c.offset,10)+"px"},"right"===b)d.right=parseInt(c.windowWidth,10)-parseInt(c.width,10)-parseInt(c.left,10)+"px";else if("left"===b)d.left=parseInt(c.left,10);else{if(e=d.left=parseInt(c.left,10)+parseInt(c.width,10)/2,f=parseInt(this.$el.outerWidth()/2,10),f>e){f=e;var g=c.left+c.width/2+"px";this.$(".arrow").css({left:g}),this.$(".inner-arrow").css({left:g})}else this.$(".arrow").css({left:""}),this.$(".inner-arrow").css({left:""});d["margin-left"]="-"+f+"px"}break;case"left":d={right:parseInt(c.windowWidth,10)-parseInt(c.left,10)+parseInt(c.offset,10)+"px",top:parseInt(c.top,10)+parseInt(c.height-this.$el.outerHeight(),10)/2+"px"};break;case"right":d={left:parseInt(c.left,10)+parseInt(c.width,10)+parseInt(c.offset,10)+"px",top:parseInt(c.top,10)+parseInt(c.height-this.$el.outerHeight(),10)/2+"px"}}return d},setArrowPosition:function(a){var b;switch(a){case"bottom":b="arrow-top";break;case"top":b="arrow-bottom";break;case"left":b="arrow-right";break;case"right":b="arrow-left"}return b},setArrowAlign:function(a){var b;switch(a){case"right":b="arrow-align-right";break;case"left":b="arrow-align-left";break;case"middle":b="arrow-align-middle"}return b},setTextAlign:function(a){var b;switch(a){case"left":b="ttip-text-align-left";break;case"center":b="ttip-text-align-center";break;case"right":b="ttip-text-align-right"}return b},removeAttr:function(){this.$el.attr("style",""),this.$el.attr("class","")},mouseOut:function(a){this.$el.hide(),$(a.currentTarget).off(".ttip")},mergeDefaults:function(a){var b={},c=this.defaults;for(var d in c)b[d]=c[d];for(var e in a)b[e]=a[e];return b}})}(),function(){"use strict";var a="ASreturn",b="AScreds";AS.AuthToken=Backbone.Model.extend({defaults:function(){return{publication:void 0,username:void 0,password:void 0,authenticated:!1,authenticationError:void 0,authenticating:!1,availableIssues:[],userid:""}},initialize:function(a){_.bindAll(this),this.set("config",AS.config.get("app.auth"))},credentials:function(a){return"undefined"==typeof a?{username:this.get("username"),password:this.get("password")}:void this.set(a)},beginAuthentication:function(){this.set({authenticated:!1,authenticationError:void 0,authenticating:!0})},endAuthentication:function(a,b){var c=!!a;this.set({authenticated:!c,authenticationError:a,authenticating:!1}),c||AS.message.trigger(AS.message.AUTHENTICATED,b,{username:this.get("username"),password:this.get("password"),userid:this.get("userid")})},reset:function(a){var b=_.extend(this.defaults(),a||{});this.set(b)}});var c=function(){function b(a){var b=_.template(a,{redirect:window.location});return b}return{preAuthenticate:function(){!this.enabled||AS.cookies.get(this.config.authToken)?(AS.cookies.set(this.config.authToken,"true",31536e3,"/"),AS.cookies.get(a)&&(AS.util.changeLocation(window.location+AS.cookies.get(a)),AS.cookies.remove(a)),AS.message.trigger(AS.message.PRE_AUTHENTICATED),AS.message.trigger(AS.message.AUTHENTICATED)):(AS.cookies.set(a,window.location.hash,9e5),AS.util.changeLocation(b(this.endpoint)))}}}(),d=function(){function a(a,b){return btoa([a,b].join(":"))}function c(a){var b=atob(a).split(":");return{username:b[0],password:b[1]}}var d;return{extractDataFromPub:function(a){return a.get("issues").map(function(a){return{issueId:a.get("actualId"),publishedDate:a.get("publishedDate")}})},request:function(c,d,e){var f=d.get("publication"),g=d.credentials(),h=this.publicationCode||f.id,i=[this.endpoint,h,c].join("/"),j=a(g.username,g.password),k={issues:this.extractDataFromPub(f)};if(AS.util.isIE9()){var l=function(a){var c=JSON.parse(a.data),d={};if(c.error)return e(c.error);try{d=JSON.parse(c.responseText)}catch(f){}return 200!==c.status?e("Server returned status of : "+c.status):200!==d.status&&"undefined"!=typeof d.status?e("Server responded with : "+d.message+" ("+d.status+")"):(c.issues||(c={
issues:c}),AS.cookies.set(b,j,2592e3,"/"),void e(null,c))};window.addEventListener("message",l,!1);var m={target:i,data:JSON.stringify(k),auth:j},n=document.getElementById("ie9Frame");_.defer(_.bind(function(){n.contentWindow.postMessage(JSON.stringify(m),"*")},this))}else $.ajax({type:"POST",async:!0,crossDomain:!0,url:i,dataType:"json",data:JSON.stringify(k),contentType:"application/json",headers:{Authorization:"Basic "+j},success:function(a,c){if(a.status>=401){var d=a.messageHTML||a.message;return void e(d||"login-auth-fail".toLocaleString())}a.issues||(a={issues:a}),AS.cookies.set(b,j,2592e3,"/"),e(null,a)},error:function(a,b){var c;try{c=a.responseText?JSON.parse(a.responseText):void 0}catch(d){c={message:d}}(0===a.status||a.status>=404)&&(b="login-timeout".toLocaleString()),e(c&&c.message?c.message:b)}})},authenticate:function(a){function b(b,c){if(b)return a.endAuthentication(b);var d=c.issues?c.issues:c,e=AS.Session.getCurrentIssueId(),f=[],g=!1,h=null;if(c.user&&a.set("userid",c.user),f=_.filter(d,function(a){return 200===a.status}),f=_.pluck(f,"issue"),g=_.contains(f,e),e&&!g){var i=_.where(d,{issue:e})[0],j=i.messageHTML||i.message;h=i?j:"The issue is not available with the credentials provided"}a.set("availableIssues",d),a.endAuthentication(h,f)}return a.beginAuthentication(),AS.StateModel.get("isConnected")?void this.request("authorise",a,b):a.endAuthentication({msg:"Unable to connect to server"})},preAuthenticate:function(){d=AS.cookies.get(b),d&&(d=c(d),AS.message.on(AS.message.PUBLICATION_LOADED,this.publicationLoaded,this)),_.defer(function(){AS.message.trigger(AS.message.PRE_AUTHENTICATED)})},publicationLoaded:function(a){if(d){var b=new AS.AuthToken({publication:a});b.credentials(d),this.authenticate(b)}}}}(),e={publication:c,issue:d};AS.AuthProxy={enabled:!0,endpoint:void 0,level:"publication",enabledLevels:{publication:!0,issue:!0,none:!1,"":!1},requiresAuthentication:!0,initialize:function(a){_.bindAll(this),this.config=a,this.endpoint=this.config.authRoot,this.level=this.config.level,this.publicationCode=this.config.publicationCode,this.enabled=this.enabledLevels[this.level],this.requiresAuthentication=this.enabled&&"issue"===this.level;var b=e[this.level];if(_.extend(this,b),this.enabled){var c=this;AS.message.on(AS.message.PRE_AUTHENTICATE,function(){c.preAuthenticate()}),AS.message.on(AS.message.AUTHENTICATE,function(a){c.authenticate(a)}),AS.message.on(AS.message.UNAUTHENTICATE,function(){c.unauthenticate()})}},preAuthenticate:void 0,authenticate:void 0,unauthenticate:function(){AS.cookies.remove(b),AS.message.trigger(AS.message.UNAUTHENTICATED,null,{userid:AS.Session.getCurrentUserId()})}},AS.message.on(AS.message.APPLICATION_START,function(){AS.AuthProxy.initialize(AS.config.get("app.auth"))})}(),function(){"use strict";AS.GeolocationView=AS.ModalView.extend({template:"geolocation-tmpl",mapCanvas:void 0,initialize:function(a){_.bindAll(this),AS.ModalView.prototype.initialize.call(this,a)},render:function(){return this.isOpen||(AS.ModalView.prototype.render.call(this),this.$(".popupHolder").css({width:this.pageDimensions.width-this.gutter,height:this.pageDimensions.height-this.gutter}),this.mapCanvas=this.$("#mapCanvas").get(0),this.isOpen=!0),this},openGeolocation:function(a,b){this.createMap(a,b)},createMap:function(a,b){var c={center:new google.maps.LatLng(a,b),zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP},d=new google.maps.Map(this.mapCanvas,c);new google.maps.Marker({position:new google.maps.LatLng(a,b),map:d})}})}(),function(){"use strict";AS.PopupVideoView=AS.ModalView.extend({template:"popupvideo-tmpl",videoEl:null,mediaElementPluginPath:"webreader/video-player/",initialize:function(a){_.bindAll(this),AS.ModalView.prototype.initialize.call(this,a)},render:function(){return AS.ModalView.prototype.render.call(this),this.$(".popupHolder").css({width:"100%",height:"100%"}),this.videoEl=this.$("video")[0],this},setupMediaElement:function(){var a=this,b=1920,c=1080,d=this.calculateVideoScale(b,c);this.mediaElementSetup||(this.mediaElement=new MediaElement("modelvideo",{enablePluginDebug:!1,pluginPath:AS.router.readerURL+"video-player/",defaultVideoWidth:b*d,defaultVideoHeight:c*d,success:function(b,c){$("#"+b.id).css({position:"fixed",right:0,left:0,top:0,bottom:"48px","background-color":"#000000",margin:"auto"}),a.mediaElementSetup=!0,b.play(),a.$("video").removeClass("hide").addClass("show")},error:function(a){var b="video-missing";/\.(FLV|MP4|M4A|MOV|MP4V|3GP|3G2)$/i.test(a.getAttribute("src"))&&(b="video-flash"),AS.message.trigger(AS.message.NOTIFICATION_SHOW,b.toLocaleString())}}))},initVideo:function(a){this.$("video").attr("src",a),this.$("video").removeClass("show").addClass("hide"),$(".pv-close").on("click",this.onModalClick_),AS.message.on(AS.message.RESIZE,this.setMargin),AS.browser.firefox||this.$("video").attr("autoplay","true"),AS.browser.firefox?this.setupMediaElement():$(this.videoEl).on("loadedmetadata",this.onLoadedMetadata)},onLoadedMetadata:function(){$(this.videoEl).off("loadedmetadata",this.onLoadedMetadata),this.$("video").css({top:0,left:0,right:0,bottom:0,height:"auto",width:"auto",margin:"auto",position:"absolute"}),this.sizeVideoToDocument(),this.$("video").removeClass("hide").addClass("show")},sizeVideoToDocument:function(){var a=0===document.body.clientWidth?window.innerWidth:document.body.clientWidth,b=0===document.body.clientHeight?window.innerHeight:document.body.clientHeight,c=a-this.gutter,d=b-this.gutter,e=d/c,f=this.videoEl.videoHeight/this.videoEl.videoWidth,g=e>f?!0:!1;g?this.$("video").css("width",c+"px"):this.$("video").css("height",d+"px")},calculateVideoScale:function(a,b){var c=document.body.clientWidth,d=document.body.clientHeight,e=(c-this.gutter)/a,f=(d-this.gutter)/b,g=f>e?e:f;return g},setMargin:function(){var a=this.$("video"),b=40,c=((0===document.body.clientWidth?window.innerWidth:document.body.clientWidth)-a.width())/2;c>b?a.css("margin","auto"):a.css("margin",b+"px")},onModalClick_:function(a){this.isValidTarget(a.target)&&(this.videoEl.pause&&this.videoEl.pause(),this.videoEl.src="",AS.ModalView.prototype.onModalClick_.call(this,a),this.$("video").removeClass("show").addClass("hide"),AS.message.off(AS.message.RESIZE,this.setMargin))}})}(),function(){"use strict";var a=.95;AS.ZoomableImageView=AS.ModalView.extend({template:"zoomableimage-tmpl",imageEl:void 0,zoomWidgetEl:void 0,_scrollInstance:void 0,initialize:function(a){_.bindAll(this),AS.ModalView.prototype.initialize.call(this,a)},render:function(){return AS.ModalView.prototype.render.call(this),this.$(".popupHolder").css({margin:50*(1-a)+"%"}),this.imageEl=this.$("img"),this.$spinner=this.$(".spinner"),this.zoomWidgetEl=this.$(".zoom-widget"),this.imageEl.on("load",this.onImageLoad_),$(".zw-close").on("click",this.removeView),this},initImage:function(a){this.$spinner.show(),this.imageEl[0].src=a},onImageLoad_:function(a){var b=this.zoomWidgetEl.width(),c=this.zoomWidgetEl.height(),d=this.imageEl.width(),e=this.imageEl.height(),f=b/d,g=c/e;f>g?this.imageEl.addClass("height-fit"):this.imageEl.addClass("width-fit"),this.imageEl.off("load",this.onImageLoad_),this.$spinner.hide(),this._scrollInstance=new IScroll(".zoom-widget",{zoom:!0,zoomMax:100,scrollX:!0,scrollY:!0,mouseWheel:!0,wheelAction:"zoom",HWCompositing:!1})},removeView:function(){this._scrollInstance&&this._scrollInstance.destroy(),this.imageEl[0].src="",this.imageEl.hasClass("width-fit")&&this.imageEl.removeClass("width-fit"),this.imageEl.hasClass("height-fit")&&this.imageEl.removeClass("height-fit"),this.$el.detach(),AS.message.trigger(AS.message.CLOSE_POPUP),this.isOpen=!1},onModalClick_:function(a){this.isValidTarget(a.target)&&this.removeView()}})}(),function(){"use strict";AS.StoreFootView=AS.View.extend({events:{click:"click"},initialize:function(){_.bindAll(this,"render");var a=AS.config.get("buildTime").split("_").join(" ");this.template="storefooter-tmpl",this.model=new Backbone.Model({version:AS.config.get("version"),buildNumber:AS.config.get("buildNumber"),branch:AS.config.get("branch"),timestamp:moment(a).format("ddd MMM Do YYYY, h:mm:ss a")}),this.model.bind("change",this.render)},click:function(a){if(a.shiftKey){var b=AS.config.get("gitcommit"),c="https://github.com/mobileiq/appstudio-html5-core/commit/"+b;window.open(c,"_blank")}}})}(),function(){"use strict";AS.StoreHeadView=AS.View.extend({offline:!1,libraryPressed:!1,events:{"click #fullscr":"toggleFullScreen","click #login-button":"login","click #logout-button":"logout","click #btnLibrary":"onLibraryPress","click #get-app":"getApp"},initialize:function(){_.bindAll(this),this.offline=AS.config.get("app.enableOffline")?!0:!1,this.template="storeheader-tmpl";var a="";AS.router.connection||(a="active"),this.model=new Backbone.Model(_.extend(AS.config.get("publication"),{greeting:"greeting".toLocaleString(),subscribeUrl:AS.config.get("app.auth.subscribeUrl"),username:"",offline:this.offline,isConnected:AS.StateModel.get("isConnected"),activeClass:a})),this.model.bind("change",this.render),this.listenTo(AS.StateModel,"change:isConnected",this.updateConnection),AS.Session.authenticated&&this.onAuthenticated(null,AS.Session.authCredentials),AS.message.on(AS.message.FULL_SCREEN_ENTER,this.fullScreenEnter),AS.message.on(AS.message.FULL_SCREEN_EXIT,this.fullScreenExit),AS.message.on(AS.message.AUTHENTICATED,this.onAuthenticated),AS.message.on(AS.message.UNAUTHENTICATED,this.onAuthenticated),AS.message.on(AS.message.NOTIFICATION_SHOW,this.onNotifyShow),AS.message.on(AS.message.NOTIFICATION_HIDE,this.onNotifyHide)},render:function(){var a=!!AS.util.supportsFullScreen();return AS.View.prototype.render.call(this),this.$fullScreenButton=this.$("#fullscr"),this.$fullScreenButton.attr("data-ttip-content",this.getTooltipEnterMessage()),this.$fullScreenButton.toggle(a),this.offline&&(this.$libraryButton=this.$("#btnLibrary"),AS.StateModel.get("isConnected")?this.$libraryButton.attr("data-ttip-content","Setup offline access to issues."):this.$libraryButton.attr("data-ttip-content","You are viewing the offline library")),this.updateConnection(),this.updateSmartBannerButton(),this},updateConnection:function(a){this.model.set("isConnected",AS.StateModel.get("isConnected")),this.toggleLibrary(a)},getTooltipEnterMessage:function(){return"fullscreen".toLocaleString()},getTooltipExitMessage:function(){return"fullscreen-exit".toLocaleString()},toggleFullScreen:function(){if(AS.util.isIE10()){var a=AS.util.isFullScreen()?"fullscreen-alert-exit":"fullscreen-alert-enter",b=a.toLocaleString();AS.message.trigger(AS.message.ALERT,b)}else AS.message.trigger(AS.message.TOGGLE_FULL_SCREEN)},fullScreenEnter:function(){this.$("#fullscr").data("ttipContent",this.getTooltipExitMessage()),this.$("#fullscr").html('<svg xmlns="http://www.w3.org/2000/svg" width="26.083" height="24.167" viewBox="0 0 26.083 24.167"><g ><path d="M18.61 8.277L21.69 5.2l-2.194-2.194-3.078 3.08-2.314-2.315-.488 7.312 7.31-.49zM8.962 17.93l-3.08 3.077-2.193-2.193 3.08-3.078-2.317-2.317 7.312-.487-.49 7.31z"/></g></svg>'),AS.message.trigger(AS.message.TRACK_EVENT,{eventCategory:AS.Analytics.categories.APPLICATION,eventAction:AS.Analytics.actions.FULLSCREEN,eventLabel:document.title})},fullScreenExit:function(){this.$("#fullscr").data("ttipContent",this.getTooltipEnterMessage()),this.$("#fullscr").html('<svg xmlns="http://www.w3.org/2000/svg" width="26.083" height="24.167" viewBox="0 0 26.083 24.167"><g ><path d="M16.402 6.052l-3.26 3.26 2.322 2.32 3.26-3.258 2.45 2.45.515-7.74-7.74.517zM6.656 15.795l3.26-3.26 2.323 2.323-3.26 3.26 2.45 2.45-7.74.516.515-7.74z"/></g></svg>')},login:function(){AS.message.trigger(AS.message.STORE_LOGIN_OPEN)},logout:function(){AS.message.trigger(AS.message.UNAUTHENTICATE)},onAuthenticated:function(a,b){this.model.set("username",b&&b.username?b.username:""),_.debounce(this.render)},matchButtonSizes:function(){var a,b=this.$("#login-button, #subscribe-button");b.width("auto"),a=b.map(function(){return+$(this).css("width").replace("px","")}).get(),b.css({width:Math.max.apply(Math,a)})},onLibraryPress:function(a){AS.router.connection&&(this.libraryPressed=!this.libraryPressed,this.toggleLibrary(a))},toggleLibrary:function(a){this.$("#btnLibrary").toggleClass("active",this.libraryPressed||!AS.StateModel.get("isConnected")),AS.message.trigger(AS.message.OFFLINE_OPTIONS_STATUS_CHANGE,{libraryPressed:this.libraryPressed})},onNotifyShow:function(a){this.$(".store-tools").css({top:"51px"})},onNotifyHide:function(a){this.$(".store-tools").css({top:"15px"})},getApp:function(){var a=AS.config.get("smartBanner");a&&(AS.browser.ios&&a.ios.enabled?AS.util.isValidBundleId(a.ios.id)?$.ajax({dataType:"jsonp",url:"https://itunes.apple.com/lookup?bundleId="+a.ios.id,success:function(a,b,c){a.resultCount?location.href=a.results[0].trackViewUrl:void 0},error:function(a,b,c){}}):AS.util.isValidUrl(a.ios.id)?location.href=a.ios.id:void 0:AS.browser.android&&a.android.enabled&&(AS.util.isValidBundleId(a.android.id)?location.href="https://play.google.com/store/apps/details?id="+a.android.id:AS.util.isValidUrl(a.android.id)?location.href=a.android.id:void 0))},updateSmartBannerButton:function(){var a=AS.config.get("smartBanner");(!a||AS.browser.ios&&!a.ios.enabled||AS.browser.kindle&&!a.kindle.enabled||AS.browser.android&&!a.android.enabled)&&this.$("#get-app").remove()}})}(),function(){"use strict";AS.StoreBannerView=AS.View.extend({initialize:function(){_.bindAll(this,"render"),this.template="storebanner-tmpl",this.model=new Backbone.Model({bannerHeight:AS.config.get("app.banner.height"),bannerSrc:this.getBannerSrc()})},getBannerSrc:function(){var a=AS.config.get("app.banner.source");return-1!==a.indexOf(".zip")&&(a=a.replace(".zip","/index.html")),a}})}(),function(){"use strict";AS.StoreNavView=AS.View.extend({storeNavTemplate:AS.View.resolveTemplate("storenav-tmpl"),tagName:"nav",initialize:function(){_.bindAll(this,"render"),this.model=new Backbone.Model({items:["Store","Library"]}),this.template="storenav-tmpl",this.model.bind("change",this.render)}})}(),function(){"use strict";AS.StoreGridView=AS.View.extend({template:"storeissuecontainer-tmpl",numIssues:0,loadedCounter:0,issueViews:null,promotedView:null,loading:!1,rendered:!1,hasScrollBarRefresh:!1,promotedIssueEnabled:null,$list:null,$more:null,$window:$(window),initialize:function(){this.promotedIssueEnabled=AS.config.get("app.enablePromoted"),this.hasBanner=AS.config.get("app.banner.enabled"),this.bannerLocation=AS.config.get("app.banner.source"),_.bindAll(this),this.issueViews=[],this.numIssues=this.model.get("issues").length,this.appendLoadEvents()},render:function(){return this.rendered?void 0:(AS.View.prototype.render.call(this),this.rendered=!0,this.$list=this.$("#issueContainer"),this.$promoted=this.$("#promotedIssue"),this.$banner=this.$("#externalBanner"),this.promotedIssueEnabled||this.$promoted.remove(),this.renderBanner(),this.$more=this.$("#more"),AS.util.isIE9()&&_.delay(this.ie9AnimateSpinner,250),this)},renderBanner:function(){return this.hasBanner&&""!==this.bannerLocaction?(this.bannerView=new AS.StoreBannerView,void this.loadBanner(this.bannerView.model.get("bannerSrc"),this.displayBanner,this.removeBanner)):this.removeBanner()},displayBanner:function(){this.$banner.append(this.bannerView.render().el)},loadBanner:function(a,b,c){$.ajax({url:a,type:"GET",cache:!1,success:b,error:c})},removeBanner:function(){return this.$banner.remove()},update:function(){_.each(this.issueViews,function(a){a.update()}),this.promotedView&&this.promotedView.update()},ie9AnimateSpinner:function(){this.loadedCounter!==this.numIssues&&AS.util.animateRotate({el:$("#more")[0],targetDegrees:360,duration:1e3,callback:this.ie9AnimateSpinner})},appendLoadEvents:function(){this.on("loadMore",this.onLoadMore),this.$window.on("scroll",this.onWindowScroll),this.$window.on("resize",this.onWindowScroll)},destroyLoadEvents:function(){this.off("loadMore",this.onLoadMore),this.$window.off("scroll",this.onWindowScroll),this.$window.off("resize",this.onWindowScroll)},onWindowScroll:function(a){this.getLoadMoreVisible()&&this.trigger("loadMore")},onLoadMore:function(a){if(!this.loading){window.innerHeight<$("#app-view").innerHeight()&&!this.hasScrollBarRefresh&&(this.hasScrollBarRefresh=!0,this.restrictLinesOnViews()),this.loading=!0;var b=this.model.get("issues");if(b.length>this.loadedCounter){var c=b.at(this.loadedCounter);c.set("subscribeUrl",AS.config.get("app").auth.subscribeUrl),this.promotedIssueEnabled&&null===this.promotedView?this.appendPromoted(new AS.StorePromotionView({model:c})):this.appendIssue(new AS.StoreGridIssueView({model:c}))}else this.onThumbLoaded(null)}},restrictLinesOnViews:function(){this.promotedView&&this.promotedView.restrictLines(),_.each(this.issueViews,function(a){a.restrictLines()})},onThumbLoaded:function(a){this.loadedCounter=this.loadedCounter+1,this.loading=!1,(0===this.numIssues||this.loadedCounter===this.numIssues)&&(this.$more.hide(),this.destroyLoadEvents()),this.getLoadMoreVisible()&&this.trigger("loadMore")},appendIssue:function(a){this.issueViews.push(a),this.$list.append(a.render().el),a.loadThumb(this.onThumbLoaded)},appendPromoted:function(a){this.promotedView=a,this.$promoted.append(a.render().el),a.loadThumb(this.onThumbLoaded)},getLoadMoreVisible:function(){return 0===this.issueViews.length?!0:this.$window.scrollTop()+this.$window.innerHeight()>this.issueViews[this.issueViews.length-1].el.offsetTop}})}(),function(){"use strict";AS.StoreGridIssueView=AS.View.extend({currentCallback:null,template:"storeissue-tmpl",initialize:function(){_.bindAll(this),this.addEvents()},render:function(){return AS.View.prototype.render.call(this),this},update:function(){this.restrictLines()},loadThumb:function(a){var b=this;if(a=this.storeCallback(a),!this.getImage().src)return a(new Error("Thumbnail not specified for "+this.model.get("id"))),void this.$("img ").css("opacity",0);this.restrictLines();var c=function(){var c=b.$("img"),d=b.getImage(),e=d.src,f=d.orientation,g=b.el.querySelector(".thumb");b.setThumbnailClass(g,f),b.attachLoadEvents(a,c,e),c.attr("src",e)};AS.util.isTouch()?_.delay(c,250):_.delay(c,0)},setThumbnailClass:function(a,b){a.classList.contains("portrait")&&a.classList.remove("portrait"),a.classList.contains("landscape")&&a.classList.remove("landscape"),b&&b===AS.constant.ORIENTATION.PORTRAIT?a.classList.add("portrait"):a.classList.add("landscape")},storeCallback:function(a){return a===_.noop&&null!==this.currentCallback?this.currentCallback:(this.currentCallback=a,this.currentCallback)},forgetCallback:function(){this.currentCallback=null},attachLoadEvents:function(a,b,c){b.on("load",{callback:a,image:b,src:c},this.onThumbLoaded),b.on("error",{callback:a,image:b,src:c},this.onThumbLoaded)},destroyLoadEvents:function(a){a.off("load",this.onThumbLoaded),a.off("error",this.onThumbLoaded)},addEvents:function(){AS.message.on(AS.message.RESIZE,this.restrictLines),AS.message.on(AS.message.ORIENTATION_CHANGE,this.onOrientationChange),this.model.on("change:viewable",this.onViewableChange)},removeEvents:function(){AS.message.off(AS.message.RESIZE,this.restrictLines),AS.message.off(AS.message.ORIENTATION_CHANGE,this.onOrientationChange),this.model.off("change:viewable",this.onViewableChange)},onThumbLoaded:function(a){return this.destroyLoadEvents(a.data.image),"error"===a.type?(a.data.callback(new Error("Thumbnail load error for "+this.model.get("id")+" SRC: "+a.data.src)),void $(a.data.image).css("opacity",0)):(this.fadeContentIn(a.data.image),a.data.callback(),void this.forgetCallback())},onViewableChange:function(){this.model.set("imageSrc",this.getImage().src),this.render(),this.update()},fadeContentIn:function(a){$(a).animate({opacity:1},{duration:300})},onOrientationChange:function(a){this.loadThumb(_.noop)},getImage:function(){var a,b=this.model.get("thumbnails"),c=AS.orientation.value(),d={landscape:["ln_450","landscape"],portrait:["pt_456","portrait"]};return a=b[_.find(d[c],function(a){return b[a]})],a||(c=c===AS.constant.ORIENTATION.LANDSCAPE?AS.constant.ORIENTATION.PORTRAIT:AS.constant.ORIENTATION.LANDSCAPE,a=b[_.find(d[c],function(a){return b[a]})]),{src:a,orientation:c}},restrictLines:function(){AS.util.restrictTextByLines(this.$(".h2"),2)}})}(),function(){"use strict";AS.StorePromotionView=AS.StoreGridIssueView.extend({className:"promotion",template:"storepromotion-tmpl",restrictLines:function(){AS.util.restrictTextByLines(this.$(".info h2"),2),AS.util.restrictTextByLines(this.$(".info p"),6)},loadThumb:function(a){var b=this;return a=this.storeCallback(a),this.getImage().src?void _.delay(function(){var c=b.$("img"),d=b.getImage(),e=d.src,f=d.orientation,g=b.el.querySelector(".thumb");b.setThumbnailClass(g,f),b.attachLoadEvents(a,c,e),c.attr("src",e),b.$(".background-container").css("background-image","url("+e+")")},AS.util.isTouch()?250:0):void a(new Error("Thumbnail not specified for "+this.model.get("id")))},onThumbLoaded:function(a){var b=null,c="show";this.destroyLoadEvents(a.data.image),this.restrictLines(),"error"===a.type&&(b=new Error("Thumbnail load error for "+this.model.get("id")+" SRC: "+a.data.src),c="hide"),$(a.data.image)[c](),this.fadeContentIn(".issue-info"),a.data.callback(b),this.forgetCallback()},render:function(){return AS.View.prototype.render.call(this),this.loadThumb(_.noop),this}})}(),function(){"use strict";var a=AS.config.get("app.auth.loginModalDelay");AS.util.vendorPrefixedEvent("transitionEnd"),AS.StoreView=AS.View.extend({id:"store",className:"container",stylesheet:"webreader/stylesheets/store.css",initialize:function(){_.bindAll(this),this.$el.addClass(AS.orientation.value()),AS.message.on(AS.message.FIRST_LAUNCH,this.onFirstLaunch),AS.message.on(AS.message.OFFLINE_OPTIONS_STATUS_CHANGE,this.offlineShowHide),AS.message.on(AS.message.ORIENTATION_CHANGE,this.onOrientationChange)},render:function(){return this.rendered?(this.update(),this):(this.$el.empty(),this.headView=new AS.StoreHeadView,this.gridView=new AS.StoreGridView({model:this.model}),this.footView=new AS.StoreFootView,this.$el.append(this.headView.render().el),this.$el.append(this.gridView.render().el),this.$el.append(this.footView.render().el),this.$el.css({opacity:0}),AS.config.get("app.enableOffline")?this.$el.find(".offline-download-btn").show():this.$el.find(".offline-download-btn").hide(),this.rendered=!0,this)},update:function(){this.gridView.trigger("loadMore"),this.gridView.update(),this.offlineShowHide({libraryPressed:!1})},onFirstLaunch:function(){!AS.Session.authenticated&&AS.config.get("app.auth.launchLogin")&&_.delay(function(){AS.message.trigger(AS.message.STORE_LOGIN_OPEN)},a)},onOrientationChange:function(a){this.$el.removeClass("landscape portrait").addClass(a)},offlineShowHide:function(a){a.libraryPressed===!1&&AS.StateModel.get("isConnected")?this.$(".issue").removeClass("noFlow"):this.$(".issue:not(.library-issue)").addClass("noFlow")}})}(),function(){"use strict";var a=AS.util.vendorPrefixedEvent("transitionEnd");AS.MasterLoginView=AS.PopupView.extend({$highlight:null,model:new AS.AuthToken,events:_.extend({},AS.PopupView.prototype.events),initialize:function(){AS.PopupView.prototype.initialize.apply(this),this.model.on("change:authenticationError",this.authenticationError),this.model.on("change:authenticating",this.authenticatingChange),this.model.on("change:authenticated",this.authenticatedChange),AS.message.on(AS.message.LOGIN_CLOSE,this.close)},render:function(){return AS.PopupView.prototype.render.call(this),this.rendered||(this.rendered=!0,$(document.body).append(this.el)),this},submit:function(a){a.preventDefault(),this.$(".error-message").removeClass("show");var b=this.$("#usernamefield"),c=this.$("#passwordfield"),d={username:b.val(),password:c.val()};b.removeClass("error").removeAttr("data-ttip-content"),c.removeClass("error").removeAttr("data-ttip-content"),d.username?d.password?(this.model.credentials(d),AS.message.trigger(AS.message.AUTHENTICATE,this.model)):this.showFieldError(c,"invalid-password".toLocaleString()):this.showFieldError(b,"invalid-username".toLocaleString())},emptyFields:function(){this.$("#usernamefield").val(""),this.$("#passwordfield").val("")},showFieldError:function(a,b){a.addClass("error"),AS.util.isIE9()?this.$(".error-message").addClass("show").html(b):(a.attr("placeholder",b),_.defer(_.bind(function(){this.highlightError(a)},this)))},highlightError:function(b){var c=this.$highlight||b.clone(),d=function(){c.addClass("noTransition").removeClass("flash").remove()};this.$highlight=c,c.appendTo(b.parent()),c.attr("placeholder",b.attr("placeholder")),c.css({position:"absolute",top:b.position().top,left:b.position().left}),_.defer(function(){c.removeClass("noTransition").addClass("flash")}),c.on(a,function(){d()})},open:function(){this.rendered||this.render(),this.emptyFields(),this.model.reset({publication:AS.Session.getPublication()}),AS.PopupView.prototype.open.call(this),AS.util.isIE9()?setTimeout(function(){this.$("#usernamefield").placeholder(),this.$("#passwordfield").placeholder()},1):$("#usernamefield").focus()},close:function(){this.reset(),AS.PopupView.prototype.close.call(this),AS.util.isIE9()&&(this.rendered=!1)},keydownHandler:function(a){27===a.which&&this.close()},reset:function(){return this.$(".error-message").html("").removeClass("show"),this},authenticatingChange:function(){this.$el.toggleClass("waiting",this.model.get("authenticating")),this.model.get("authenticating")&&this.$("#login").html("login-waiting".toConfiguredLocaleString())},authenticatedChange:function(){this.model.get("authenticated")&&(this.$("#login").html("login".toConfiguredLocaleString()),this.close())},authenticationError:function(){var a=this.model.get("authenticationError");a&&(this.$(".error-message").addClass("show").html(a),this.$("#login").html("login".toConfiguredLocaleString()))},resize:function(a){return this}}),_.extend(AS.MasterLoginView,AS.SingletonView)}(),function(){"use strict";AS.StoreLoginView=AS.MasterLoginView.extend({template:"storelogin-tmpl",events:_.extend({"submit #login-form":"submit","click #login":"submit","click #cancel":"close"},AS.MasterLoginView.prototype.events)}),AS.message.on(AS.message.STORE_LOGIN_OPEN,function(){AS.StoreLoginView.getInstance().reset().open()})}(),function(){"use strict";AS.IssueLoginView=AS.MasterLoginView.extend({template:"issuelogin-tmpl",events:_.extend({"click  #cancel":"cancel","submit #login-form":"submit","reset  #login-form":"close"},AS.MasterLoginView.prototype.events),authenticatedChange:function(){this.model.get("authenticated")&&this.close(null,!0)},authenticationError:function(){var a=this.model.get("authenticationError");a&&this.$(".error-message").addClass("show").html(a),this.$("input[type=submit]").attr("value","login".toConfiguredLocaleString())},close:function(a,b){return b?(this.reset(),AS.PopupView.prototype.close.call(this),this):this},cancel:function(a){a.preventDefault(),this.reset(),AS.router.gotoStore()},keydownHandler:function(a){27===a.which&&this.cancel(a)}}),AS.message.on(AS.message.ISSUE_LOGIN_OPEN,function(){AS.message.trigger(AS.message.CLOSE_LOADING),AS.IssueLoginView.getInstance().reset().open()}),AS.message.on(AS.message.STORE,function(){AS.IssueLoginView.getInstance().close(null,!0)})}(),function(){"use strict";var a=AS.util.vendorPrefixedEvent("transitionEnd");AS.TooltipView=AS.View.extend({options:null,$parent:null,template:"",defaults:{orientation:"bottom",margin:0,userInteraction:!0},initialize:function(a,b,c){var d;this.options={},this.$parent=a,this.template="tooltip-tmpl",_.bindAll(this),this.model=b?new Backbone.Model(b):new Backbone.Model({content:"This tooltip has not been initialised with a model"}),AS.View.prototype.render.call(this);for(d in this.defaults)this.options[d]=this.defaults[d];c&&this.setOptions(c),this.options.userInteraction&&this.$parent.on("mouseover",this.checkShow)},render:function(){return this.rendered?this.$content.text(this.model.get("content")):(AS.View.prototype.render.call(this),this.$content=this.$(".tooltip-content"),this.rendered=!0),this},setOptions:function(a){var b;for(b in a)this.options[b]=a[b]},checkShow:function(a){if(this.$parent[0]===a.target){var b=!1;this.$parent.children().each(function(){this===a.relatedTarget&&(b=!0)}),b||this.show()}},show:function(){this.$parent.append(this.render().el),this.positionTooltip(),this.$el.removeClass("transparent"),this.options.userInteraction&&this.$parent.on("mouseout",this.checkHide)},checkHide:function(a){if(this.$parent[0]===a.target){var b=!1;this.$parent.children().each(function(){this===a.relatedTarget&&(b=!0)}),b||this.hide()}var c=!1;this.$parent.children().each(function(){this===a.target&&this.parentNode!==a.relatedTarget&&(c=!0)}),c&&this.hide()},hide:function(){this.$el.on(a,this._hideEndTransition),this.$el.addClass("transparent")},_hideEndTransition:function(){this.$el.off(a,this._hideEndTransition),this.$el.remove(),this.options.userInteraction&&this.$parent.on("mouseover",this.checkShow)},positionTooltip:function(){var a=this.el,b=this.el.parentNode;this.$el.addClass("tooltip-temp");var c=a.querySelector(".arrow"),d=0,e=0,f=a.offsetWidth,g=a.offsetHeight,h=b.offsetWidth,i=b.offsetHeight;switch(this.$el.removeClass("tooltip-temp"),this.options.orientation){case"top":$(c).removeClass().addClass("arrow arrow-bottom"),d=h/2-f/2,e=-g-c.offsetHeight-this.options.margin;break;case"right":$(c).removeClass().addClass("arrow arrow-left"),d=h+c.offsetWidth+this.options.margin,e=-(g/2)+i/2;break;case"bottom":$(c).removeClass().addClass("arrow arrow-top"),d=h/2-f/2,e=c.offsetHeight+i+this.options.margin;break;case"left":$(c).removeClass().addClass("arrow arrow-right"),d=-f-c.offsetWidth-this.options.margin,e=-(g/2)+i/2;break;case"default":throw new Error("Tooltip orientation is not set")}("auto"===this.$el.css("left")||"0px"===this.$el.css("left"))&&this.$el.css("left",d+"px"),("auto"===this.$el.css("top")||"0px"===this.$el.css("top"))&&this.$el.css("top",e+"px"),"moz"===AS.util.VENDOR_PREFIX&&(this.$el.css("left",d+"px"),this.$el.css("top",e+"px"),"fullscr"===b.id&&this.$el.css("left","-125px"))},removeEvents:function(){this.$parent.off("mouseover",this.checkShow),this.$parent.off("mouseover",this.checkHide),this.$parent.off("mouseout",this.checkShow),this.$parent.off("mouseout",this.checkHide),this.$parent.off(a,this._hideEndTransition)},reset:function(){this.removeEvents(),this.options.userInteraction&&this.$parent.on("mouseover",this.checkShow)},remove:function(){this.removeEvents(),this.$el.remove()},dispose:function(){this.remove()}})}(),function(a,b){"use strict";function c(a){this.pinchEnabled=!1,this.frame=a,this.frameWindow=a.contentWindow,this.element=a.contentDocument.body,this.iScroll=void 0,a.contentWindow.onZoom?(this._init(this.element),this.pinchEnabled=!0):void 0}c.prototype={resetScale:function(){this.pinchEnabled&&this._resetZoomState()},_init:function(a){this.iScroll=new IScroll(a,{zoom:!0,scrollY:!0,scrollX:!0,bounce:!1,momentum:!0,checkDOMChanges:!0,preventDefault:!1,wrapperAsScroller:!0}),this.iScroll.on("zoom",this._onZoomStart.bind(this)),this.iScroll.on("zoomEnd",this._onZoomEnd.bind(this)),b.browser.ios&&(this.iScroll.on("scrollStart",function(){this.translateZ=" translateZ(0)"}),this.iScroll.on("scrollEnd",this.repaintWithoutHardwareAccleration.bind(this)))},_resetZoomState:function(){_.delay(_.bind(function(){this.refreshIScroll()},this)),b.StateModel.setZoomState(!1),this.frameWindow.onZoom&&this.frameWindow.onZoom(!1)},_onZoomEnd:function(){this.iScroll.scale<=1?this._resetZoomState():b.browser.ios&&this.iScroll.scale<4&&this.repaintWithoutHardwareAccleration()},repaintWithoutHardwareAccleration:function(){this.iScroll.translateZ=" ",this.iScroll.scrollBy(0,0)},_onZoomStart:function(){1===this.iScroll.scale||b.StateModel.isZoomMode()||(this.frameWindow.onZoom(!0),b.StateModel.setZoomState(!0),this.iScroll.translateZ=" translateZ(0)")},refreshIScroll:function(){this.pinchEnabled&&(this.iScroll&&(this.iScroll.zoom(1),this.iScroll.refresh()),b.StateModel.setZoomState(!1));
},currentScale:function(){var a=1;return this.pinchEnabled&&this.iScroll&&(a=this.iScroll.scale),a}},b.PinchZoom=c}(window,AS),function(){"use strict";AS.PageFrameView=Backbone.View.extend({tagName:"iframe",loaded:!1,offline:!1,iScroll:void 0,initialize:function(a){_.bindAll(this),this.updateConnection()},addEvents:function(){this.listenTo(AS.StateModel,"change:isConnected",this.updateConnection)},removeEvents:function(){this.stopListening(AS.StateModel)},updateConnection:function(a){try{this.window().isOnline(AS.StateModel.get("isConnected"))}catch(b){}},render:function(){return this.$el.attr("data-webapp","true").attr("data-autoplay","false").attr("scrolling","no"),this},load:function(a,b){this.url=a,this.offline=b,this.url=this.url.replace("//","/").replace(":/","://"),this.loaded=!1;var c=AS.util.queryString(a)||{};a=[AS.util.stripURL(this.url),$.param(_.extend(c,AS.config.get("app.params")||{}))].join("?"),this.locationMatch(a)||(this.loaded=!1,this.location(a),this.$el.one("load",this.iframeLoaded))},pageIndex:function(){if(this.el.parentElement){var a=$(this.pageView());return parseInt(a.attr("data-index"),10)}return-1},pageView:function(){return this.$el.parents(".page").get(0)},isContentLoaded:function(){var a=this.el.contentDocument;return a&&""!==a.innerHTML?"complete"===this.el.contentDocument.readyState:!1},window:function(){return this.el.contentWindow},location:function(a){return"undefined"==typeof a?String(this.window().location):(this.offline?this.window().location.replace("about:blank"):this.window().location.replace(a),void this.$el.attr("data-src",a))},locationMatch:function(a){var b=this.location();return b.indexOf(a)===b.length-a.length},iframeLoaded:function(){AS.ContentAdaptor.processIframe(this.el,this.offline,this.url),this.prepareOffScreen(),this.offline?this.$el.one("load",this.watchForWidgets):this.watchForWidgets();var a=this.el.contentDocument.body;AS.util.isTouch()&&a&&(this.pinchZoom=new AS.PinchZoom(this.el))},resetZoom:function(a){this.pinchZoom&&this.pinchZoom.resetScale()},accept:function(a){a.visit(this)},getDocumentHead:function(){return this.isContentLoaded()?this.el.contentDocument.documentElement:void 0},getPageWidth:function(){return this.width||$(this.el).width()},getBoundingClientRect:function(){return this.el.parentElement.getBoundingClientRect()},addiScrollInjection:function(a){var b=this.window(),c=this;this.iScroll=a,b.scrollTo=function(b,d){var e,f,g=c.pinchZoom?c.pinchZoom.currentScale():1;a.maxScrollY&&0!==a.maxScrollY&&(d=Math.min(-a.maxScrollY,d)),e=d*g,f=e-d,_.defer(function(){a.scrollTo(0,-d,0),c.setScrollY(d),c.pinchZoom&&c.pinchZoom.iScroll&&g>1&&c.pinchZoom.iScroll.scrollTo(0,-f)})}},addScrollInjection:function(a){var b=this.window(),c=this;b.scrollTo=function(b,d){a.scrollTop=d,a.scrollLeft=b;var e,f,g=c.pinchZoom?c.pinchZoom.currentScale():1;e=d*g,f=e-d,_.defer(function(){c.pinchZoom&&c.pinchZoom.iScroll&&g>1&&c.pinchZoom.iScroll.scrollTo(0,-f)})}},watchForWidgets:function(){var a=this.window();try{a.isOnline(AS.StateModel.get("isConnected"))}catch(b){}try{if(a.PR.Core.initialized)return this.iframeInitialised()}catch(b){}this.iframeInitTimeoutId=setTimeout(this.iframeInitialised,1e3);try{a.radio(a.PR.Event.PR_INITIALIZED).subscribe(this.iframeInitialised)}catch(b){}},iframeInitialised:function(){var a=this.window();clearTimeout(this.iframeInitTimeoutId);try{a.radio(a.PR.Event.PR_INITIALIZED).unsubscribe(this.iframeInitialised),AS.ContentAdaptor.initialiseIframe(this.el)}catch(b){}this.loaded=!0,this.trigger(AS.PageFrameView.LOADED)},fixHeight:function(a){(isNaN(this.height)||a)&&this.el.contentDocument.body&&(this.height=$(this.el.contentDocument.body).height()),this.$el.height(this.height)},fixWidth:function(a){isNaN(a)?isNaN(this.width)&&this.el.contentDocument.body&&(this.width=this.el.contentDocument.body.scrollWidth):this.width=a},onScreen:function(){if(this.loaded){var a=this.window();if(this.el.contentDocument&&a.onScreen)try{var b=parseFloat(AS.config.get("animation.loaderView.fadeDuration"),10);b=isNaN(b)?1e3:3*b,_.delay(a.onScreen,b),_.delay(this.focus,b+100),this.updateConnection(),this.addEvents(),this.trigger(AS.PageFrameView.ONSCREEN),_.delay(_.bind(function(){this.pinchZoom&&this.pinchZoom.refreshIScroll()},this))}catch(c){}AS.message.on(AS.message.PICTURE_ZOOM_SCALE,this.zoomOnWidget),AS.message.on(AS.message.DOUBLE_TAP,this.resetZoom)}},zoomOnWidget:function(){return this.pinchZoom&&this.pinchZoom.iScroll&&this.pinchZoom.iScroll.scale>1?void AS.StateModel.setZoomState(!0):void AS.StateModel.setZoomState(!1)},prepareOffScreen:function(){if(!AS.browser.ios){if(this.$el.css({"overflow-x":"hidden","overflow-y":"hidden"}),!this.el.contentDocument)throw new Error("No contentDocument. Uh-oh.");$(this.el.contentDocument.body).css({"overflow-x":"hidden","overflow-y":"hidden"})}},offScreen:function(){var a=this.window();if(a&&a.offScreen)try{a.offScreen(),this.removeEvents()}catch(b){}this.pinchZoom&&this.pinchZoom.resetScale(),AS.message.off(AS.message.PICTURE_ZOOM_SCALE,this.zoomOnWidget),AS.message.off(AS.message.DOUBLE_TAP,this.resetZoom)},refresh:function(a){var b=this;this.loaded=!1,this.window().location.reload(),this.$el.one("load",function(){b.on(AS.PageFrameView.LOADED,b.onScreen),b.iframeLoaded(),"function"==typeof a&&a()})},focus:function(){this.$el.focus()},dispose:function(){this.removeEvents(),AS.ContentAdaptor.disposeIframe(this.$el.get(0)),this.$el.remove().empty()},release:function(){this.trigger(AS.PageFrameView.RELEASE),this.dispose()},setScrollY:function(a){this.window().scrollY=Math.abs(a)}},{LOADED:"pageframeview:loaded",ONSCREEN:"pageframeview:onscreen",RELEASE:"pageframeview:release"})}(),function(){"use strict";var a=AS.util.iframeCount();AS.PageView=AS.View.extend({template:"issuepage-tmpl",pageWidth:void 0,frameView:void 0,loaded:!1,pageHeight:1024,isPageResponsive:!1,events:{},initialize:function(a){_.bindAll(this),a&&(this.pageWidth=a.pageWidth,this.pageIndex=a.pageIndex,a.model&&this.setModel(a.model))},setModel:function(a){this.model&&this.model.off(AS.PageModel.LOAD_START,this.modelLoad),this.model=a,this.model.on(AS.PageModel.LOAD_START,this.modelLoad)},modelLoad:function(){this.frameView&&!this.load()&&this.model.loadComplete()},load:function(){var a=this.model.url();if(this.isPageResponsive=this.model.get("responsive"),this.loaded||this.frameView.$el&&this.frameView.locationMatch(a))return this.loaded=!0,this.$el.addClass("loaded"),!1;this.loaded=!1,this.model.set("isLoading",!0),this.$el.removeClass("loaded"),this.frameView.el.style.cssText="";var b=parseInt(this.model.get("properties").width,10);this.isPageResponsive?this.pageWidth=$(window).width():isNaN(b)?this.pageWidth="portrait"===AS.Session.getCurrentVariant().get("orientation")?768:1024:this.pageWidth=b,AS.util.getCurrentScreenDimensions(),this.$el.css("width",this.pageWidth),this.isPageResponsive?this.$el.find(".page-content").css("width","100%"):this.$el.find(".page-content").css("width",this.pageWidth),this.frameView.$el.css("width",this.pageWidth);var c=parseInt(this.model.get("properties").height,10);return isNaN(c)||(this.pageHeight=c),this.frameView.$el.css("height",this.pageHeight),this.frameView.on(AS.PageFrameView.LOADED,this.iframeLoaded),this.frameView.on(AS.PageFrameView.ONSCREEN,this.iframeOnScreen),this.frameView.load(a,this.model.get("offline")),!0},iframeOnScreen:function(){this.jumpToAnchor()},jumpToAnchor:function(){var a=this.model.get("anchorPoint"),b=this.frameView.window();try{a&&b.PR.Bridge.navigateToElement(a)}catch(c){}this.model.set("anchorPoint",null)},iframeLoaded:function(){if(this.frameView.off(AS.PageFrameView.LOADED,this.iframeLoaded),AS.browser.android){var a=this.pageScroller();this.frameView.addScrollInjection(a)}else this.frameView.addiScrollInjection(this.iScroll);this.loaded=!0,this.model.loadComplete(),this.isCurrent()?_.delay(this.onScreen):_.delay(this.prepareOffScreen),this.setMargin(),this.$el.addClass("loaded"),AS.message.on(AS.message.RESIZE,this.setMargin),AS.message.on(AS.message.PAGE_FIT_DID_LAYOUT,this.setMargin)},getOnScreenDelay:function(){var a=parseFloat(AS.config.get("animation.loaderView.fadeDuration"),10);return a=isNaN(a)?1e3:3*a},pageScroller:function(){return this.$content[0]},render:function(){var a=this,b=this.model.thumbnailUrl();return this.rendered||(AS.View.prototype.render.call(this),this.$content=this.$(".page-content"),AS.browser.android||(this.iScroll=new IScroll(this.el,{scrollX:!0,scrollY:!0,scrollbars:!0,interactiveScrollbars:!0,bounce:!1,momentum:!0,mouseWheel:!0,checkDOMChanges:!1})),this.rendered=!0),AS.resourceManager.loadResource(b,{success:this.applyBackgroundImageToIframe,error:function(c){a.applyBackgroundImageToIframe(b)}}),this},applyBackgroundImageToIframe:function(a){this.loaded||this.$el.removeClass("loaded").css({"background-image":"url('webreader/images/spinner.gif')","background-position":"center","background-repeat":"no-repeat","background-size":AS.config.get("pageLoading.imageSize")+"px",width:this.pageWidth+"px"})},attachFrameView:function(a){this.frameView=a,this.frameView.on(AS.PageFrameView.RELEASE,this.releaseFrameView),this.frameView.height=parseInt(this.model.get("properties").height,10),this.$content.append(this.frameView.render().$el)},releaseFrameView:function(){this.frameView&&(this.frameView.off(AS.PageFrameView.LOADED,this.iframeLoaded),this.frameView.off(AS.PageFrameView.ONSCREEN,this.iframeOnScreen),this.frameView.off(AS.PageFrameView.RELEASE,this.releaseFrameView),this.frameView=null),this.model&&this.model.set("isLoading",!1),this.loaded=!1,this.$el.removeClass("loaded")},dispose:function(){this.frameView&&this.releaseFrameView(),AS.message.off(AS.message.RESIZE,this.setMargin),AS.message.off(AS.message.PAGE_FIT_DID_LAYOUT,this.setMargin),this.model=void 0,this.$el.remove().empty()},validate:function(){this.frameView?this.frameView.isContentLoaded()&&!this.loaded&&this.frameView.iframeInitialised():this.$el.removeClass("loaded")},isCurrent:function(){return this.$el.hasClass("current")},updateVisibility:function(b){var c,d=parseInt(this.$el.attr("data-x"),10),e=this.pageWidth*(a/2+1);return c=d>b-e&&b+e>d,this.$el.toggleClass("active",c),c},focus:function(){this.frameView&&this.frameView.focus()},fixHeight:function(){this.frameView&&(this.frameView.fixHeight(this.model.get("responsive")),this.frameView.height&&(this.pageHeight=this.frameView.height,AS.browser.android||this.$content.height(this.frameView.height)))},setFrameHeight:function(a){this.frameView&&this.frameView.$el.height(a)},onScreen:function(){if(this.loaded){var a=this.model.get("issue").get("actualId"),b=this.model.get("section").name,c=this.model.get("article").id,d=this.model.index(),e="/Article/",f=this.model.get("article").title;-1!==f.toLowerCase().indexOf("advert")&&(e="/Advert/"),AS.message.on(AS.message.REFRESH_PAGE,this.refresh),this.frameView&&this.frameView.onScreen(),this.$el.addClass("loaded"),this.isPageResponsive&&this.setFrameHeight(50),this.fixHeight(),this.frameView&&this.frameView.fixWidth(this.pageWidth),AS.ConfigUtil.isFitModeEnabled()||this.isPageResponsive||this.updateDimension(),_.delay(_.bind(function(){AS.message.trigger(AS.message.TRACK_PAGE,{page:a+e+b+"/"+c+"/"+d}),this.iScroll&&(this.iScroll.options.scrollY=!0,this.iScroll.options.scrollX=!0,this.iScroll.enable()),this.updateScrolling()},this),AS.config.get("animation.issue.pageMoveDuration")),AS.message.on(AS.message.REFRESH_SCROLL_PAGEVIEW,this.updateScrolling),this.delegateEvents()}},setMargin:function(){var a="";if(this.frameView&&!this.$el.hasClass("responsive")){var b=AS.util.getPageScaleFactor(this.pageHeight,this.pageWidth)*this.frameView.$el.height();Math.round(b)>window.innerHeight&&(a=0),this.$content&&(this.$content.css("margin",a),this.frameView.$el.css("margin",a))}},updateDimension:function(){this.$el.css("width",Math.min(window.innerWidth,this.pageWidth)),this.$el.css("height",Math.min(window.innerHeight,this.pageHeight))},refresh:function(a){"undefined"!=typeof a&&a!==this.pageIndex||!this.frameView||(this.frameView.refresh(),_.delay(this.updateScrolling,0))},updateScrolling:function(){this.iScroll&&(AS.browser.mac&&AS.browser.safari&&(this.iScroll.translateZ=" ",this.iScroll.scrollBy(0,0)),this.iScroll.refresh())},prepareOffScreen:function(){AS.message.off(AS.message.REFRESH_PAGE,this.refresh),AS.message.off(AS.message.REFRESH_SCROLL_PAGEVIEW,this.updateScrolling),this.iScroll&&(this.iScroll.options.scrollY=!1,this.iScroll.disable(),_.delay(this.updateScrolling,0)),this.frameView&&this.frameView.prepareOffScreen()},offScreen:function(){this.scrollTo(0,0),this.frameView&&this.frameView.offScreen(),this.undelegateEvents()},pageDelta:function(a){this.trigger(AS.PageView.PAGE_DELTA,a)},mouseDown:function(a){AS.message.trigger(AS.message.PAGE_FOCUSED,this.model)},click:function(a){AS.message.trigger(AS.message.PAGE_NAVIGATE,{page:this.model.index()})},scroll:function(a){this.trigger(AS.PageView.SCROLL,a)},keyUp:function(a){if(a=a.originalEvent||a,this.isCurrent()&&this.iScroll){var b=this.$el.height();AS.util.checkEventKeyCode(a,"up")?this.scrollTo(Math.min(this.iScroll.y+b,0)):AS.util.checkEventKeyCode(a,"down")&&this.scrollTo(Math.max(this.iScroll.y-b,this.iScroll.maxScrollY))}},scrollTo:function(a){if(this.iScroll)this.iScroll.scrollTo(0,a,400);else if(AS.browser.android){var b=this.pageScroller();b&&(b.scrollTop=a)}}},{PAGE_DELTA:"pageview:delta",SCROLL:"pageview:scroll"})}(),function(){"use strict";var a=(AS.util.vendorPrefixedStyle("transform"),AS.util.vendorPrefixedStyle("transition"),AS.util.vendorPrefixedEvent("transitionEnd"),AS.util.GPU_ENABLED),b=Modernizr.touch,c=AS.util.isIE10(),d=(9===AS.util.getInternetExplorerVersion(),AS.util.iframeCount()),e=7,f=!0,g=AS.config.get("app.auth.loginDelay");(b||c)&&(f=!1),AS.PageListView=AS.View.extend({template:"pagelistview-tmpl",pageWidth:1024,$pagelist:void 0,pageViewClass:AS.PageView,collection:void 0,rendered:!1,animationTime:1e3,animationTouchTime:1e3,animationEase:null,isAnimating:!1,arrowFadeTime:300,tapTimer:void 0,fadeOpacity:0,touchMove:function(a){(a.originalEvent||a).preventDefault()},currentTranslationOffset:0,initialize:function(){_.bindAll(this),this.controller=new AS.PageListViewController(this);var a=AS.config.get("animation.issue");this.animationTime=a.pageMoveDuration,this.animationTouchTime=a.touch.pageMoveDuration,this.animationEase=a.pageMoveEasing,this.arrowFadeTime=a.arrowFadeDuration,b?this.events={tap:"tap"}:this.events={click:"tap"},AS.message.on(AS.message.JS_TAP,this.jsTap),this.enableEvents(),this._pageToDebounced=_.debounce(_.bind(this.pageToHandler,this),500,!0),AS.orientation.desktop()?(this._resizeDebouncedTrailing=_.debounce(_.bind(this.onWindowResize,this),300,!1),AS.message.on(AS.message.RESIZE,this._resizeDebouncedTrailing)):AS.message.on(AS.message.ORIENTATION_CHANGE,this.orientationChange)},orientationChange:function(){var a=AS.Session.getCurrentPage()?AS.Session.getCurrentPage().get("responsive"):!1;a&&this.onWindowResize()},onWindowResize:function(){var a=this;this.$(".current").removeClass("current").addClass("noncurrent"),this.$(".facingpage").removeClass("facingpage");var b=this.model.get("currentVariant").get("currentPageIndex"),c=this.controller.pages[b];c.model.get("article"),c.$el.removeClass("noncurrent").addClass("current");var d=this.makeFacingPageCurrent(b);d?(this.fadeOverlay(d,1),b=Math.min(c.pageIndex,d.pageIndex)):(d=this.getFacingPage(b))&&this.fadeOverlay(d,this.fadeOpacity),AS.message.trigger(AS.message.FACING_PAGE_DISPLAY,AS.util.canShowFacingPage()),this.animateToThePage(b),_.defer(function(){a.toggleArrows(b,a.model.get("currentVariant").get("pages").length)},this.animationTime+this.arrowFadeTime);var e=AS.Session.getCurrentPage()?AS.Session.getCurrentPage().get("responsive"):!1,f=$(window).width();if(this.$(".page.responsive").width(f),this.$(".page.responsive iframe").width(f),e){var g=this.collection.length*f,h=this.$pagelist.width();g>h&&this.$pagelist.width(g),c.setFrameHeight(50),c.fixHeight()}AS.ConfigUtil.isFitModeEnabled()||e||c.updateDimension(),_.delay(c.updateScrolling,350)},forceLogin:function(a){this.disableEvents(),this.animateToThePage(a),this.makePageCurrent(a),AS.message.once(AS.message.AUTHENTICATED,_.bind(function(){this.onAuth({page:a})},this)),_.delay(function(){AS.message.trigger(AS.message.ISSUE_LOGIN_OPEN)},g),AS.message.once(AS.message.STORE,this.enableEvents)},onAuth:function(a){this.model.get("summary").set("viewable",!0),this.enableEvents(),this.render(),this.pageTo(a)},enableEvents:function(){AS.message.off(AS.message.STORE,this.enableEvents),AS.message.on(AS.message.PAGE_NAVIGATE,this.pageTo),AS.message.on(AS.message.PAGE_NAVIGATE_NEXT,this.pageRight),AS.message.on(AS.message.PAGE_NAVIGATE_PREVIOUS,this.pageLeft),AS.config.get("features.pageNavigation")&&($(window).on("keyup",this.keyUp),_.extend(this.events,{"click .left-arrow":"pageLeft","click .right-arrow":"pageRight",swipeleft:"pageSwipeRight",swiperight:"pageSwipeLeft",touchmove:"touchMove","scroll .page":"pageScroll","keyup .page":"pageKeyUp"})),this.delegateEvents()},disableEvents:function(){AS.config.get("features.pageNavigation")&&$(window).off("keyup",this.keyUp),AS.message.off(AS.message.PAGE_NAVIGATE,this.pageTo),AS.message.off(AS.message.PAGE_NAVIGATE_NEXT,this.pageRight),AS.message.off(AS.message.PAGE_NAVIGATE_PREVIOUS,this.pageLeft),this.undelegateEvents()},render:function(){var b,e,f=this.model.get("currentVariant"),g=0,h=0,i=d,j=this;this.rendered||(AS.View.prototype.render.call(this),this.$pagelist=this.$("#pagelist").toggleClass("gpu",a).toggleClass("ie10",c),this.rendered=!0),this.offline=AS.router.offline,this.$pagelist.empty(),this.collection=f.get("pages"),this.pageWidth=0;try{_.each(f.get("pages").models,function(a){var b=parseInt(a.get("properties").width,10);isNaN(b)||(j.pageWidth=Math.max(j.pageWidth,b))})}catch(k){}for((isNaN(this.pageWidth)||0===this.pageWidth)&&(this.pageWidth=f.get("dimensions").page.width),h=0;h<this.collection.length;h++)b=this.getOrCreatePageViewAt(h),b.$el.css("left",g+"px").attr("data-x",g).attr("data-index",h),b.$el.hasClass("responsive")&&b.$el.removeClass("responsive"),b.$el.addClass("noncurrent"),b.$el.addClass("faded"),b.$el.css("opacity",this.fadeOpacity),e=this.pageWidth,b.model.get("responsive")&&(e=b.pageWidth,b.$el.height("100%"),b.$el.addClass("responsive")),g+=e;return this.controller.disposeUnusedPages(),this.controller.setFrameCount(i),this.controller.setCurrentPageIndex(null),this.$pagelist.width(g),this},pageListTransitionEnd:function(a){if(!a||(a=a.originalEvent||a,-1!==a.propertyName.indexOf("transform")||"left"===a.propertyName)){var b=this.model.get("currentVariant"),c=b.get("currentPageIndex"),d=this.controller.getCurrentPage();d&&this.controller.getCurrentPageIndex()===c||(this.controller.setCurrentPageIndex(c),_.each(this.controller.pages,function(a){a.isCurrent()?(a.onScreen(),(AS.util.isIE10()||AS.util.isIE9())&&a.fixHeight()):a.offScreen()}),AS.message.trigger(AS.message.PAGE_INITIALISED,c))}},pageTo:function(a){this._pageToDebounced(a)},pageToHandler:function(a){var b=a.page;if(this.isValidPage(b)){var c=this.controller.pages[b];this.pageWidth=c.pageWidth;var d=this.model.get("currentVariant");if((isNaN(this.pageWidth)||0===this.pageWidth)&&(this.pageWidth=d.get("dimensions").page.width),!this.model.get("summary").get("viewable"))return this.forceLogin(b);var e=(this.collection.length,this.controller.getCurrentPage());if(d.get("pages").models[b].set("anchorPoint",a.anchor),e===c&&a.anchor)return void e.jumpToAnchor();this.setupNewPage(a,e),this.toggleArrows(b,d.get("pages").length),this.animateToThePage(b,e)}},isValidPage:function(a){var b=(this.model.get("currentVariant"),this.collection.length),c=this.controller.getCurrentPage();return c&&(0>a||a>b-1)?!1:!0},setupNewPage:function(a,b){var c,d=this.model.get("currentVariant"),e=a.page;this.$(".current").removeClass("current").addClass("noncurrent"),this.$(".facingpage").removeClass("facingpage"),d.set({currentPageIndex:e,currentArticleID:this.getArticleByPage(e)}),c=this.makePageCurrent(e,b),c&&!b&&this.pageListTransitionEnd()},isPageLeftOfSpine:function(a){var b=this.controller.pages[a];return"leftofspine"===b.model.get("pagePosition").toLowerCase()},isPageRightOfSpine:function(a){var b=this.controller.pages[a];return"rightofspine"===b.model.get("pagePosition").toLowerCase()},getSpreadID:function(a){var b=this.controller.pages[a];return b.model.get("spreadId")},hasSpineInformation:function(a){var b=this.controller.pages[a];return b.model.has("spreadId")&&b.model.has("pagePosition")},getFacingPage:function(a){if(this.hasSpineInformation(a)){var b=(this.controller.pages[a],null),c=this.controller.pages.length;if(this.isPageRightOfSpine(a)&&a-1>=0){var d=this.controller.pages[a-1];d.model,this.hasSpineInformation(a-1)&&this.getSpreadID(a-1)===this.getSpreadID(a)&&this.isPageLeftOfSpine(a-1)&&(b=d)}else if(this.isPageLeftOfSpine(a)&&c>a+1){var e=this.controller.pages[a+1];e.model,this.hasSpineInformation(a+1)&&this.getSpreadID(a+1)===this.getSpreadID(a)&&this.isPageRightOfSpine(a+1)&&(b=e)}return b}return null},makeFacingPageCurrent:function(a){if(AS.util.canShowFacingPage()){if(this.hasSpineInformation(a)){var b=this.controller.pages[a];b.$el.addClass("facingpage")}var c=this.getFacingPage(a);return c&&c.$el.removeClass("noncurrent").addClass("current facingpage"),c}return null},makePageCurrent:function(a){var b=this.controller.pages[a];return b.model.get("article"),b.$el.removeClass("noncurrent").addClass("current"),this.updatePageVisibilityLoop(),this._updatePageOpacity(b),AS.message.trigger(AS.message.FACING_PAGE_DISPLAY,AS.util.canShowFacingPage()),b},_updatePageOpacity:function(a){for(var b=a.pageIndex,c=this.makeFacingPageCurrent(b),d=b-e>0?b-e:0,f=b+e<this.controller.pages.length?b+e:this.controller.pages.length;f>d;++d){var g=!0,h=this.controller.pages[d];a&&a===h&&(g=!1),g&&c&&c===h&&(g=!1),g?this.removeOldPage(h):this.fadeOverlay(h,1)}},removeOldPage:function(a){this.fadeOverlay(a,this.fadeOpacity),a.prepareOffScreen()},toggleArrows:function(a,b){for(var c=a,d=a-1;d>=0&&this.controller.pages[d].isCurrent();--d)c--;this.$(".left-arrow").toggle(c>0);var e=a;for(d=a;b>d&&this.controller.pages[d].isCurrent();++d)e++;this.$(".right-arrow").toggle(b>e)},fadeOverlay:function(a,b){var c=this;$(a.el).stop(!1).removeClass("faded").animate({opacity:b},{duration:this.animationTime,complete:function(){b===c.fadeOpacity&&$(a.el).addClass("faded")}})},controlPageVisibilityScan:function(a){this.isAnimating=a,this.updatePageVisibilityLoop()},updatePageVisibilityLoop:function(){var a=Math.abs(f?this.getComputedOffset():this.currentTranslationOffset);this.controller.updatePageVisibility(a),this.isAnimating===!0&&AS.util.requestAnimationFrame(this.updatePageVisibilityLoop)},getDeltaForPage:function(a){var b=this.hasSpineInformation(a);return b&&this.isPageRightOfSpine(a)?this.pageWidth:b&&this.isPageLeftOfSpine(a)?0:Math.round(this.pageWidth/2)},animateToThePage:function(a,b){var c=-parseInt(this.controller.pages[a].$el.attr("data-x"),10),d=this;AS.util.canShowFacingPage()&&(c+=this.getDeltaForPage(a)),this.currentTranslationOffset=c,f&&this.controlPageVisibilityScan(!0);var e=function(){"undefined"!=typeof b&&d.pageListTransitionEnd(),AS.message.trigger(AS.message.ISSUE_LAYOUT),d.controlPageVisibilityScan(!1)};if(this.getComputedOffset()!==c){var g=this.$pagelist[0],h=function(){g.removeEventListener("transitionend",h),e()};g.addEventListener("transitionend",h,!1),$(g).css({transform:"translateX("+c+"px)"})}else _.defer(e,this.arrowFadeTime)},pageDelta:function(a){for(var b=this.model.get("currentVariant"),c=this.controller.pages.length,d=a,e=b.get("currentPageIndex"),f=e+d;f>=0&&c>f&&this.controller.pages[e+d].isCurrent();++f)d+=a;var g=e+d;0>g||g>=c||(AS.StateModel.setPageNavigateViaAction(!0),AS.message.trigger(AS.message.PAGE_NAVIGATE,{page:g}))},pageLeft:function(a){this.onPageLeftRight(a),this.pageDelta(-1)},pageRight:function(a){this.onPageLeftRight(a),this.pageDelta(1)},onPageLeftRight:function(a){a&&(a.stopPropagation(),a.preventDefault()),AS.message.trigger(AS.message.JS_TAP)},pageSwipeLeft:function(){AS.StateModel.isZoomMode()||this.pageDelta(-1)},pageSwipeRight:function(){AS.StateModel.isZoomMode()||this.pageDelta(1)},offScreen:function(){var a=this.controller.getCurrentPage();a&&a.offScreen(),this.controller.releaseAllFrames()},keyUp:function(a){a=a.originalEvent||a,AS.util.checkEventKeyCode(a,"left")?(a.preventDefault(),this.pageLeft(a)):AS.util.checkEventKeyCode(a,"right")&&(a.preventDefault(),this.pageRight(a))},tap:function(a){if(AS.util.isTouch()){var b=a.timeStamp,c=b-this.lastTimeStamp;if(this.lastTimeStamp&&c>0&&c<AS.constant.DOUBLE_TAP_THRESHOLD_DURATION)clearTimeout(this.tapTimer),AS.message.trigger(AS.message.DOUBLE_TAP);else{var d=this;this.tapTimer=setTimeout(function(){d.toggleNavBars()},AS.constant.DOUBLE_TAP_THRESHOLD_DURATION)}this.lastTimeStamp=b}else this.toggleNavBars()},jsTap:function(){clearTimeout(this.tapTimer)},toggleNavBars:function(){AS.Session.canTap&&AS.message.trigger(AS.message.TOGGLE_NAV_BARS)},delegatePageEvent:function(a,b){var c=$(a.currentTarget).attr("data-index"),d=this.controller.pages[c];"undefined"!=typeof d&&d[b].apply(d,arguments)},pageScroll:function(a){this.delegatePageEvent(a,"scroll")},pageKeyUp:function(a){this.delegatePageEvent(a,"keyUp")},getComputedOffset:function(){var b=this.$pagelist.get(0).style,c=0;if(a){var d=b.transform;c=d&&"none"!==d?parseInt(d.split("(")[1].split(")")[0],10):0}else c=parseInt(b.left,10);return c},getOrCreatePageViewAt:function(a){var b,c;b=this.collection.at(a),b.set("offline",this.model.offline),this.controller.pages.length-1<a?(c=new this.pageViewClass({model:b}),c.on(AS.PageView.PAGE_DELTA,this.pageDelta),c.on(AS.PageView.SCROLL,this.scrollPage),this.controller.addPage(c)):(c=this.controller.getPageAt(a),c.setModel(b)),c.pageIndex=a;var d=parseInt(c.model.get("properties").width,10);return c.model.get("responsive")?c.pageWidth=$(window).width():c.pageWidth=Math.min(isNaN(d)?0:d,this.pageWidth),this.$pagelist.append(c.render().$el),c},getArticleByPage:function(a){var b,c=this.model.get("currentVariant").get("pages");return c.forEach(function(c,d){d===a&&(b=c.get("article").id)}),b}})}(),function(){"use strict";AS.BaseScrubberView=AS.View.extend({presentationModel:void 0,getPages:function(){return this.model.get("currentVariant").get("pages")},getSections:function(){return this.model.get("currentVariant").get("sections")}})}(),function(){"use strict";AS.ScrubberThumbnail=AS.View.extend({template:"scrubberthumbnail-tmpl",config:{thumbWidth:48,thumHeight:48},initialize:function(a){_.bindAll(this,"loaded","updateOfflineImage"),a&&a.model&&this.setModel(a.model),a&&a.config&&_.extend(this.config,a.config)},toJSON:function(){var a=this.model.get("issue").urlRoot()+"/"+this.model.get("thumbnail");return AS.resourceManager.isOnline||AS.resourceManager.loadResource(a,{success:this.updateOfflineImage,error:function(b){sef.updateOfflineImage(a)}}),_.extend(this.model.toJSON(),{index:this.model.index(),thumbnail:a})},updateOfflineImage:function(a,b){this.$("img").attr("src",a)},render:function(){var a=this;return AS.View.prototype.render.call(this),this.$("img").width(this.config.thumbWidth).height(this.config.thumbHeight).one("load",function(){var b=a.$("img")[0].naturalWidth,c=a.$("img")[0].naturalHeight,d=a.config.thumbWidth*c/b;isNaN(d)||a.$("img").css("height",d),a.$el.addClass("thumb-loaded")}),this.model.get("isLoaded")&&this.loaded(),this},setModel:function(a){this.model&&this.model.off(AS.PageModel.LOAD_COMPLETE,this.loaded),this.model=a,this.model.get("isLoaded")||this.model.on(AS.PageModel.LOAD_COMPLETE,this.loaded)},loaded:function(){this.model.off(AS.PageModel.LOAD_COMPLETE,this.loaded),this.$el.addClass("loaded")},dispose:function(){this.model&&this.model.off(AS.PageModel.LOAD_COMPLETE,this.loaded),this.model=void 0,this.off(),this.$el.off().remove()}})}(),function(){"use strict";AS.util.vendorPrefixedStyle("transform"),AS.ScrubberTimeline=AS.View.extend({thumbnailClass:AS.ScrubberThumbnail,thumbnailGroupTemplate:AS.View.resolveTemplate("scrubberthumbnailgroup-tmpl"),currentPageIndex:0,state:void 0,template:"scrubbertimeline-tmpl",presentationModel:void 0,lockTimeline:!1,eventsDesktop:{mousemove:"mouseMove",mouseout:"mouseLeave",mousedown:"click"},eventsTouch:{tap:"click",touchstart:"touchStart",touchmove:"stopPropagation",touchend:"touchEnd"},eventsFakeTouch:{click:"click",mousedown:"touchStart",mousemove:"stopPropagation",mouseup:"touchEnd"},events:null,config:{THUMBNAIL_SECTION_MARGIN:40,THUMBNAIL_MARGIN:10,TIMELINE_MIN_SPEED:4,TIMELINE_MAX_SPEED:1200,TIMELINE_END_TOLERANCE:150,CSS_TRANSFORM_PROPERTY:AS.util.vendorPrefixedStyle("transform"),thumbWidth:"",thumbHeight:"",totalMargin:"",xMargin:0},initialize:function(a){_.bindAll(this),this.events=function(){return Modernizr.touch?this.eventsTouch:AS.config.get("app.mobileOnly")?this.eventsFakeTouch:this.eventsDesktop},this.setState(AS.ScrubberTimeline.HIDDEN),this.thumbnails=[],AS.message.on(AS.message.SHOW_TIMELINE,this.show),AS.message.on(AS.message.HIDE_TIMELINE,this.hide),AS.message.on(AS.message.FORCE_SHOW_TIMELINE,this.forceShow),AS.message.on(AS.message.FORCE_HIDE_TIMELINE,this.forceHide),AS.message.on(AS.message.NAVIGATION_SCRUB,this.scrollTo),this.model.get("presentationModel")&&(this.presentationModel=this.model.get("presentationModel"),this.presentationModel.on("change:timelineVisible",this.toggle),this.presentationModel.on("change:setPosition",this.scrollToPresentationModel),Modernizr.touch||AS.config.get("app.mobileOnly")?this.presentationModel.on("change:scrubberVisible",this.toggleIfOpen):this.presentationModel.on("change:currentScrubPosition",this.scrollToCurrentPosition)),a&&a.config&&_.extend(this.config,a.config)},getSingleSections:function(){return this.model.get("currentVariant").get("singleSections")},render:function(){this.rendered||AS.View.prototype.render.call(this);var a,b,c=this,d=0;for(this.collection=this.model.get("currentVariant").get("pages");this.thumbnails.length;)this.thumbnails.pop().dispose();this.$ul=this.$("#scrubber-timeline-list"),this.$ul.empty(),this.$("#scrubber-timeline-list").css("padding-left",c.config.THUMBNAIL_SECTION_MARGIN/2),d+=c.config.THUMBNAIL_SECTION_MARGIN/2;var e=this.getSingleSections();return"undefined"!=typeof e.contents?!0:!1,this.collection.forEach(function(e,f){a&&a.name===e.get("section").name?d+=c.config.THUMBNAIL_MARGIN:(a=e.get("section"),b="contents"!==e.get("section").name?$(c.thumbnailGroupTemplate(a)):$(c.thumbnailGroupTemplate({colour:"",name:""})),c.$ul.append(b),f>0&&(d+=c.config.THUMBNAIL_SECTION_MARGIN)),c.renderThumbnail(e,f).render().$el.attr("data-x",d).appendTo(b.find("ul.thumbnail-list")),d+=c.config.thumbWidth}),d+=c.config.THUMBNAIL_SECTION_MARGIN/2,this.$ul.width(d),void 0!==this.requestAnimationFrameId||Modernizr.touch||this.animationUpdate(),this.rendered=!0,this},renderThumbnail:function(a,b){var c=new this.thumbnailClass({model:a,index:b,config:{thumbWidth:this.config.thumbWidth,thumbHeight:this.config.thumbHeight}});return this.thumbnails.push(c),c},scrollToPresentationModel:function(a,b){this.scrollTo(b)},scrollToCurrentPosition:function(a,b){this.scrollTo(b,!0)},scrollTo:function(a,b){var c=this;if(a="undefined"==typeof a?this.currentPageIndex:a,!this.isHovered){var d=this.$ul.outerWidth(),e=this.$el.width(),f=this.$(".thumbnail").get(a),g=$(f).attr("data-x"),h=Math.max(0,Math.min(g-(e-this.config.thumbWidth)/2,d-e));this.speed=this.config.TIMELINE_MIN_SPEED,this.targetX=h}b||(this.currentPageIndex=a),this.$(".thumbnail").each(function(b){$(this).toggleClass("hovered",b===a),$(this).toggleClass("current",b===c.currentPageIndex)})},translate:function(a){AS.util.isTouch()?this.el.scrollLeft=this.targetX:this.$ul.css(this.config.CSS_TRANSFORM_PROPERTY,"translate3d( -"+Math.round(a)+"px, 0, 0 )")},isVisible:function(){
return this.$el.hasClass("active")},toggle:function(){this.state===AS.ScrubberTimeline.HIDDEN?this.show(AS.ScrubberTimeline.PERMANENT):this.state===AS.ScrubberTimeline.PERMANENT&&this.hide();var a=this.state!==AS.ScrubberTimeline.HIDDEN;return this.$el.toggleClass("toggle-open",a),a},toggleIfOpen:function(){this.presentationModel.get("timelineVisible")&&this.toggle()},show:function(a){AS.StateModel.setActiveToolbarItem(void 0),this.setState(a||AS.ScrubberTimeline.PERMANENT),this.presentationModel.set("timelineVisible",!0,{silent:!0}),AS.message.trigger(AS.message.TIMELINE_IS_VISIBLE),AS.util.isTouch()&&this.translate()},hide:function(){_.delay(this.doHide,200)},doHide:function(){this.setState(AS.ScrubberTimeline.HIDDEN),this.presentationModel.set("timelineVisible",!1,{silent:!0})},setState:function(a){this.lockTimeline&&(a=AS.ScrubberTimeline.PERMANENT),this.state=a;var b=a>AS.ScrubberTimeline.HIDDEN;this.$el.toggleClass("active",b),AS.browser.ie&&this.$el.height(b?this.$ul.height():0)},thumbnailIndex:function(a){return parseInt(a.attr("data-index"),10)},click:function(a){var b=parseInt($(a.target).parent().attr("data-index"),10);a.stopPropagation(),isNaN(b)||(this.presentationModel.set({timelineVisible:!1,currentScrubPosition:b,setPosition:b}),AS.message.trigger(AS.message.PAGE_NAVIGATE,{page:b}))},mouseMove:function(a){if(AS.config.get("filmStrip.mouseHoverNavigation")){var b=this.$ul.width(),c=this.$el.width(),d=a.pageX-this.config.TIMELINE_END_TOLERANCE-this.config.totalMargin,e=Math.min(1,Math.max(d/(c-2*this.config.TIMELINE_END_TOLERANCE),0)),f=e*(b-c),g=window.innerWidth;isNaN(this.currX)&&(this.currX=0),this.isHovered=!0,this.targetX=f,this.lastMouseX=a.pageX,this.speed=this.config.TIMELINE_MAX_SPEED-Math.min(this.config.TIMELINE_MAX_SPEED,2*Math.max(this.config.TIMELINE_MIN_SPEED,Math.abs(a.pageX/g-.5)*this.config.TIMELINE_MAX_SPEED))}else this.isHovered=!0,this.lastMouseX=a.pageX},stopPropagation:function(a){a.stopPropagation()},touchStart:function(a){"undefined"!=typeof a.originalEvent.changedTouches&&(this.startX=a.originalEvent.changedTouches[0].pageX)},touchEnd:function(a){"undefined"!=typeof a.originalEvent.changedTouches&&Math.abs(this.startX-a.originalEvent.changedTouches[0].pageX)>20&&a.stopPropagation()},animationUpdate:function(){isNaN(this.currX)&&(this.currX=0),this.currX+=(this.targetX-this.currX)/this.speed,this.translate(this.currX);for(var a,b,c=this.$(".thumbnail"),d=this,e=0;e<c.length&&(a=$(c.get(e)),b=a.offset().left,!(b>this.lastMouseX-this.config.thumbWidth-this.config.THUMBNAIL_MARGIN/2));e++);this.isHovered&&(this.hoveredIndex=parseInt(a.attr("data-index"),10),c.removeClass("hovered"),a.addClass("hovered")),this.$(".thumbnail-group").each(function(){var a=$(this),b=a.find(".thumbnail-group-title"),c=b.find(".title"),e=a.offset(),f=e.left,g=0;f<d.config.xMargin&&(g=Math.min(d.config.xMargin-f,a.width()-c.width())),b.css(d.config.CSS_TRANSFORM_PROPERTY,0!==g?"translate3d( "+g+"px, 0, 0 )":"none")}),this.requestAnimationFrameId=AS.util.requestAnimationFrame(this.animationUpdate)},mouseLeave:function(a){this.isHovered=!1,this.speed=this.config.TIMELINE_MIN_SPEED,this.targetX=this.currX,this.$(".thumbnail").removeClass("hovered")},forceShow:function(a){this.lockTimeline=!0,this.show(a),this.setState(AS.ScrubberTimeline.PERMANENT)},forceHide:function(){this.lockTimeline=!1,this.hide()}},{HIDDEN:0,TEMPORARY:1,PERMANENT:2})}(),function(){"use strict";var a,b,c,d=48,e=500;AS.ScrubberView=AS.BaseScrubberView.extend({template:"scrubberview-tmpl",tickTemplate:AS.View.resolveTemplate("scrubbertick-tmpl"),thumbnailPageNos:AS.View.resolveTemplate("scrubberpagenos-tmpl"),pageIndex:0,presentationModel:void 0,pageInit:!1,isTouch:Modernizr.touch,currentTick:null,eventsDesktop:{"mousedown #scrubber-thumb":"thumbDown","click .tick":"tickClick","mouseover .tick":"tickRollOver","mouseout .tick":"tickRollOut","click .home-button":"homeButtonClick"},eventsTouch:{"touchstart #scrubber":"filmStripToggle","tap .home-button":"homeButtonClick"},eventsFakeTouch:{"mousedown #scrubber":"filmStripToggle","click .tick":"tickClickFakeTouch","click .home-button":"homeButtonClick"},events:null,initialize:function(a){AS.BaseScrubberView.prototype.initialize.call(this),_.bindAll(this),this.isTouch=Modernizr.touch||AS.config.get("app.mobileOnly"),this.events=function(){return Modernizr.touch?this.eventsTouch:AS.config.get("app.mobileOnly")?this.eventsFakeTouch:this.eventsDesktop};var b=AS.config.get("animation.issue");this.animationTime=b.pageMoveDuration,this.animationTouchTime=b.touch.pageMoveDuration,this.animationEase=b.pageMoveEasing,AS.message.once(AS.message.PAGE_LOADED,this.setThumbMargin),AS.message.on(AS.message.PAGE_LOADED,this.pageLoaded),AS.message.on(AS.message.RESIZE,this.onResize),this.model.get("presentationModel")&&(this.presentationModel=this.model.get("presentationModel"),this.presentationModel.on("change:setPosition",this.pageToFromModel),Modernizr.touch||AS.config.get("app.mobileOnly")?AS.message.on(AS.message.PAGE_NAVIGATE,this.touchNavigate):this.presentationModel.on("change:timelineVisible",this.toggleThumbActive))},onResize:function(){this.setThumbMargin()},setThumbMargin:function(){this.$thumb.css("margin-left",(this.$(".tick").width()-this.$thumb.width())/2)},filmStripToggle:function(){this.currentTick||this.presentationModel.set({timelineVisible:!this.presentationModel.get("timelineVisible")})},touchNavigate:function(){this.pageInit?this.presentationModel.set({timelineVisible:!1}):this.pageInit=!0},render:function(){this.rendered||(AS.BaseScrubberView.prototype.render.call(this),this.rendered=!0);var d=this.model.get("currentVariant"),e=d.get("dimensions");return c=e.page.width,a=e.thumbnail.width,b=e.thumbnail.height,this.layout(),this},layout:function(){var a,b,c=this.getPages(),e=this.getSections(),f=$(window).width(),g=f,h=g-1*d,i=h/(c.length+e.length-1),j=0,k=100/c.length,l=this;this.$ticks=this.$(".ticks"),this.$ticks.empty(),this.$thumb=this.$("#scrubber-thumb"),c.forEach(function(c,d){b&&b.name===c.get("section").name||(b&&(j+=i),b=c.get("section"),a&&a.addClass("section-last")),a=$(l.tickTemplate(_.extend(c.toJSON(),{index:d}))),a.css({width:k+"%"}),AS.config.get("app.mobileOnly")&&a.css({"pointer-events":"auto"}),a.attr("data-x",k*d),a.attr("data-ttip-content",d+1),l.$ticks.append(a),c.get("isLoaded")&&l.pageLoaded(d),j+=i}),this.$el.css("left","0px"),this.$el.append(this.thumbnailPageNos({currentPagePosition:AS.util.numberZero(1),endPage:AS.util.numberZero(c.length)}))},scrubMin:function(){return 0},scrubMax:function(){return this.scrubWidth()},scrubWidth:function(){return this.$ticks.width()-this.$(".tick").width()},tickX:function(a){return parseInt($(this.$(".tick")[a]).attr("data-x"),10)},pageLoaded:function(a){var b=$(this.$ticks.children().get(a));b.addClass("loaded")},pageToFromModel:function(a,b){this.lockThumb||this.dragging||this.pageTo(b)},pageTo:function(a,b){this.scrubMin(),"undefined"==typeof a&&(a=this.presentationModel.get("setPosition")),this.pageIndex=a,this.$thumb.css({left:this.tickX(a)+"%"}),b||AS.message.trigger(AS.message.PAGE_NAVIGATE,{page:this.pageIndex}),this.$("#currentPagePosition").html(AS.util.numberZero(a+1)),this.scrubTo(a)},scrubTo:function(a){this.$thumb.toggleClass("loaded",this.getPages().at(a).get("isLoaded")),this.$(".tick").each(function(b,c){$(c).toggleClass("progressed",a>=b)})},tap:function(a){a.stopPropagation(),this.presentationModel.set("timelineVisible",!this.presentationModel.get("timelineVisible"))},thumbDown:function(a){clearTimeout(this.dragTimeoutId),this.thumbDownTimelineVisible=this.presentationModel.get("timelineVisible"),this.presentationModel.set({timelineVisible:!0,currentScrubPosition:this.pageIndex});var b=parseInt(this.$thumb.css("left"),10);this.dragStartX=a.pageX-b,this.dragTimeoutId=setTimeout(this.dragStart,e,a),$(document).on("mousemove",this.thumbMove),$(document).on("mouseup",this.thumbUp)},dragStart:function(a){clearTimeout(this.dragTimeoutId),this.dragging||(this.tickWidth=this.$(".tick").width(),this.dragging=!0,this.$thumb.addClass("dragging"),$(document).off("mouseup",this.thumbUp),$(document).on("mouseup",this.dragEnd))},thumbMove:function(a){this.dragging||this.dragStart(a);var b=a.pageX-this.dragStartX,c=this.scrubMin(),d=this.scrubMax(),e=0,f=this.$el.find(".tick");b=Math.max(b,c),b=Math.min(b,d);for(var g=0;g<f.length;g++){var h=g*this.tickWidth+this.tickWidth/2;if(h>=b){e=g;break}}this.$thumb.css("left",b),this.presentationModel.set({currentScrubPosition:e}),this.scrubTo(e)},thumbUp:function(a){this.presentationModel.set({timelineVisible:!this.thumbDownTimelineVisible}),$(document).off("mouseup",this.thumbUp),this.thumbInteractionComplete(a)},dragEnd:function(a){this.thumbInteractionComplete(a);var b=this.presentationModel.get("currentScrubPosition");this.presentationModel.set({setPosition:this.presentationModel.get("currentScrubPosition"),timelineVisible:!1}),this.pageTo(b,!0),$(document).off("mouseup",this.dragEnd)},thumbInteractionComplete:function(a){clearTimeout(this.dragTimeoutId),this.$thumb.removeClass("dragging"),this.dragging=!1,$(document).off("mousemove",this.thumbMove)},toggleThumbActive:function(){this.$thumb.toggleClass("active",this.presentationModel.get("timelineVisible"))},tickClick:function(a){this.lockThumb=!1;var b=$(a.currentTarget);this.presentationModel.set({setPosition:b.index(),timelineVisible:!1}),this.tickRollOut()},tickClickFakeTouch:function(a){var b=$(a.currentTarget);b.index()!==this.currentTick?(this.currentTick=b.index(),AS.message.trigger(AS.message.NAVIGATION_SCRUB,b.index())):(this.presentationModel.set({timelineVisible:!1}),this.currentTick=null)},tickRollOver:function(a){if(!this.dragging){this.lockThumb=!0;var b=$(a.currentTarget),c=b.index();this.presentationModel.set({timelineVisible:!0,timelineVisibleViaHover:!0,currentScrubPosition:c})}},tickRollOut:function(a){this.dragging||(this.lockThumb=!1)},homeButtonClick:function(a){this.presentationModel.set({timelineVisible:!1,setPosition:0}),AS.StateModel.setActiveToolbarItem(void 0)}})}(),function(){"use strict";AS.NavigationPresentationModel=Backbone.Model.extend({isTouch:Modernizr.touch,defaults:{currentScrubPosition:1,setPosition:-1,timelineVisible:!1,timelineVisibleViaHover:!1},initialize:function(){_.bindAll(this),this.isTouch=Modernizr.touch||AS.config.get("app.mobileOnly"),this.isTouch&&this.set({timelineVisible:!1}),this.on("change:timelineVisible",this.timelineVisibleChange),AS.message.on(AS.message.PAGE_NAVIGATE,this.pageNavigate),AS.message.on(AS.message.GOTO_STORE,this.dispose)},pageNavigate:function(a){this.set("setPosition",a.page),this.set("currentScrubPosition",a.page)},timelineVisibleChange:function(){this.get("timelineVisible")||this.set("timelineVisibleViaHover",!1)},dispose:function(){AS.message.off(AS.message.PAGE_NAVIGATE,this.pageNavigate),AS.message.off(AS.message.GOTO_STORE,this.dispose),this.destroy()}});var a,b,c,d=0,e=0;AS.NavigatorView=AS.View.extend({template:"navigationwrapper-tmpl",subviews:[],isTouch:Modernizr.touch||AS.config.get("app.mobileOnly"),touchViews:["TouchScrubberView","ScrubberTimeline"],desktopViews:["ScrubberView","ScrubberTimeline"],events:{mouseleave:"mouseleave"},initialize:function(){_.bindAll(this),this.isTouch=Modernizr.touch||AS.config.get("app.mobileOnly"),this.presentationModel=new AS.NavigationPresentationModel},render:function(){this.rendered||AS.View.prototype.render.call(this);var f,g=this,h=this.model.get("currentVariant"),i=h.get("dimensions");return this.model.set("presentationModel",this.presentationModel),this.presentationModel.set("setPosition",-1,{silent:!0}),AS.config.get("scrubber.filmStrip")||(this.desktopViews=_.without(this.desktopViews,"ScrubberTimeline"),this.touchViews=_.without(this.touchViews,"ScrubberTimeline")),c=i.page.width,a=i.thumbnail.width,b=i.thumbnail.height,f={thumbWidth:a,thumbHeight:b,totalMargin:e,xMargin:d},this.rendered?_.each(this.subviews,function(a){_.extend(a.config,f),a.model=g.model,a.render()}):_.each(this.isTouch?this.touchViews:this.desktopViews,function(a){var b=new AS[a]({model:g.model,config:f});g.subviews.push(b),g.$el.append(b.render().el)}),this.rendered=!0,this},mouseleave:function(a){var b=this.presentationModel;a.currentTarget===this.el&&b.set("timelineVisible",!1)},dispose:function(){AS.message.off(AS.message.PAGE_NAVIGATE,this.presentationModel.pageNavigate),this.remove()}})}(),function(){"use strict";AS.TouchScrubberView=AS.ScrubberView.extend({template:"scrubberview-tmpl",attachHandleTooltip:function(a){},attachTickTooltip:function(a,b){},pageInitialised:function(a){this.pageTo(a,!0)}})}(),function(){"use strict";AS.ToolbarItemView=AS.View.extend({template:"toolbaritem-tmpl",tooltip:null,issueModel:void 0,navigatorView:void 0,initialize:function(a){this.issueModel=a.issueModel,_.bindAll(this)},render:function(){return AS.View.prototype.render.call(this),this.model.get("view")&&"AS.NavigatorView"!==this.model.get("view")&&(this.tooltip=new(AS[this.model.get("view").split(".")[1]])(this.$el,this.model)),this.$el.attr("data-ttip-content",this.model.get("tooltip").toLocaleString()),this.handleSpecifics(),this},dispose:function(){if(this.tooltip)try{this.tooltip.dispose()}catch(a){}this.navigatorView&&this.navigatorView.dispose();var b=this.model.get("title");"PageFitView"===b&&AS.message.off(AS.message.PAGE_FIT_MODE_UPDATED,this.updateTooltip),"Spread View"===b&&AS.message.off(AS.message.SPREAD_VIEW_UPDATED,this.updateTooltip),"Contents"===b&&AS.message.off(AS.message.TOC_NOT_AVAILABLE,this.hideButton),this.remove()},handleSpecifics:function(){var a=this.model.get("title");switch(a){case"Window":AS.util.FULL_SCREEN_SUPPORTED&&!AS.config.get("app.mobileOnly")&&(this.$el.addClass("full-screen-supported"),AS.message.on(AS.message.FULL_SCREEN_ENTER,this.fullScreenEnter),AS.message.on(AS.message.FULL_SCREEN_EXIT,this.fullScreenExit));break;case"Contents":AS.message.on(AS.message.TOC_NOT_AVAILABLE,this.hideButton);break;case"NavigatorView":this.navigatorView=new(AS[this.model.get("view").split(".")[1]])({model:this.issueModel}),this.$el.addClass("navigatorView"),this.$el.find("button").remove(),this.$el.append(this.navigatorView.render().el);break;case"PageFitView":AS.message.on(AS.message.PAGE_FIT_MODE_UPDATED,this.updateTooltip);break;case"Spread View":AS.message.on(AS.message.SPREAD_VIEW_UPDATED,this.updateTooltip);break;case"More":}},hideButton:function(){this.$el.hide()},updateTooltip:function(a){this.$el.data("ttipContent",a.mode.toLocaleString())},fullScreenEnter:function(){this.$el.addClass("is-full-screen").data("ttipContent","tooltip-fullscreen-exit".toLocaleString()),this.$("button").html('<svg xmlns="http://www.w3.org/2000/svg" width="26.083" height="24.167" viewBox="0 0 26.083 24.167"><g ><path d="M18.61 8.277l3.079-3.077-2.193-2.194-3.078 3.079-2.314-2.314-.488 7.311 7.309-.49zM8.962 17.929l-3.079 3.078-2.194-2.193 3.08-3.078-2.316-2.317 7.312-.486-.489 7.311z"/></g></svg>')},fullScreenExit:function(){this.$el.removeClass("is-full-screen").data("ttipContent","tooltip-fullscreen-enter".toLocaleString()),this.$("button").html('<svg xmlns="http://www.w3.org/2000/svg" width="26.083" height="24.167" viewBox="0 0 26.083 24.167"><g ><path d="M16.402 6.052l-3.26 3.259 2.322 2.322 3.26-3.259 2.449 2.45.516-7.741-7.738.518zM6.656 15.795l3.261-3.259 2.322 2.322-3.26 3.26 2.451 2.451-7.741.515.516-7.74z"/></g></svg>')}})}(),function(){"use strict";AS.ToolbarView=AS.View.extend({elementOffset:void 0,template:"toolbar-tmpl",toolbarItems:[],moreMenu:!1,eventsDesktop:{"click .toolbarItem ":"onItemClick"},eventsTouch:{"click .toolbarItem":"onItemClick"},eventsFakeTouch:{"click .toolbarItem":"onItemClick"},events:null,animationTime:2e3,animationEasing:"",isShowing:!1,$toggleButton:void 0,initialize:function(){var a=AS.config.get("animation.toolbar");this.isTouch=AS.util.isTouch(),"object"==typeof a&&(this.animationTime=this.isTouch?a.touch.fadeDuration:a.fadeDuration,this.animationEase=a.fadeEasing),this.collection=new AS.ToolbarItemCollection(AS.config.get("toolbar.items")),_.bindAll(this),this.addEvents();for(var b in this.defaults)this[b]=this.defaults[b]},addEvents:function(){this.events=function(){return Modernizr.touch?this.eventsTouch:AS.config.get("app.mobileOnly")?this.eventsFakeTouch:this.eventsDesktop},AS.message.on(AS.message.TOC_TOGGLE,this.tocHandle),AS.message.on(AS.message.PAGE_NAVIGATE,this.pageNavigate),AS.message.on(AS.message.TOGGLE_FULL_SCREEN,this.hide),AS.message.on(AS.message.TOOLBAR_MORE,this.toggleMoreView),AS.message.on(AS.message.TOC_DID_SHOW,this.showTocButtonShadow),AS.message.on(AS.message.TOC_DID_HIDE,this.hideTocButtonShadow),AS.message.on(AS.message.GLOBAL_AUDIO_DID_SHOW,this.showAudioButtonShadow),AS.message.on(AS.message.GLOBAL_AUDIO_DID_HIDE,this.hideAudioButtonShadow),AS.message.on(AS.message.SHARE_OPTIONS_DID_SHOW,this.showSharingButtonShadow),AS.message.on(AS.message.SHARE_OPTIONS_DID_HIDE,this.hideSharingButtonShadow),AS.message.on(AS.message.TOGGLE_NAV_BARS,_.debounce(this.toggleToolbar.bind(this),100)),AS.browser.iphone&&(AS.message.on(AS.message.ORIENTATION_CHANGE,_.debounce(this.repositionToolbar.bind(this),250)),AS.message.on(AS.message.GOTO_STORE,this.removeEvent))},removeEvent:function(){AS.browser.iphone&&($(window).off("scroll",this.repositionToolbar),this.repositionEvent=!1)},render:function(){var a=this,b=AS.config.get();return a.toolbarItems&&(a.toolbarItems.forEach(function(a){a.dispose()}),a.toolbarItems=[]),this.rendered||AS.View.prototype.render.call(this),this.$toggleButton=this.$("#toggleButton"),this.$toolbarContainer=this.$("#toolbarContainer"),this.$toolbarContainerMore=this.$("#toolbarContainerMore"),this.$toolbarContainer.empty(),this.$toolbarContainerMore.empty(),this.collection.forEach(function(c){var d=!1,e=c.get("title");if(_.contains(c.get("allowedFrameworks"),AS.util.CURRENT_FRAMEWORK)||(d=!0),("Store"===e&&!b.features.storeAccessibility||"Audio"===e&&!b.features.globalAudioPlayer||"Contents"===e&&!b.features.tableOfContents||"Window"===e&&!b.features.fullScreen||"NavigatorView"===e&&!b.features.scrubber||"PageFitView"===e&&!b.features.pageFitButton||"Spread View"===e&&!b.features.spreadToggleButton)&&(d=!0),"Share"===e)if(b.features.socialSharing){var f=b.socialSharing.options,g=0;for(var h in f)if(f[h]===!0){++g;break}d=g?!1:!0}else d=!0;if(!d){var i=new AS.ToolbarItemView({model:c,issueModel:this.model});a.toolbarItems.push(i),c.get("isMore")?this.$toolbarContainerMore.append(i.render().el):this.$toolbarContainer.append(i.render().el)}},this),AS.StateModel.isVarientChanged()||this.hide(),this.rendered=!0,AS.browser.iphone&&!this.repositionEvent&&($(window).on("scroll",this.repositionToolbar),this.repositionEvent=!0),this},repositionToolbar:function(){if(AS.orientation.get()===AS.constant.ORIENTATION.LANDSCAPE){var a=this;this.height=window.innerHeight,$(window).scrollTop(0),setTimeout(function(){var b=document.querySelector("#app-view");if(b){var c=b.clientHeight;a.height!==c&&c>0&&c>a.height&&(a.el.style.bottom=c-a.height+"px")}})}else this.el.style.bottom="0px"},pageNavigate:function(){AS.StateModel.isPageNavigateViaAction()&&(this.hide(),AS.StateModel.setPageNavigateViaAction(!1))},toggleToolbar:function(){this.isShowing?this.hide():this.show()},show:function(){this.isShowing!==!1||AS.util.isModelViewMode()||(this.isShowing=!0,AS.message.trigger(AS.message.TOOLBAR_WILL_SHOW),this.$el.addClass("displayed"),AS.browser.iphone&&this.repositionToolbar(),this.$toggleButton.addClass("open"))},hide:function(){this.isShowing===!0&&(this.isShowing=!1,this.$el.removeClass("displayed"),this.$toggleButton.removeClass("open"),this.$toolbarContainerMore.removeClass("displayed"),this.$(".more").removeClass("expanded"),this.moreMenu=!1,AS.StateModel.setActiveToolbarItem(void 0))},toggleMoreView:function(){this.$toolbarContainerMore.toggleClass("displayed"),this.$(".more").toggleClass("expanded"),this.$(".more").hasClass("expanded")?this.moreMenu=!0:this.moreMenu=!1},tocHandle:function(){this.$el.toggleClass("drop-shadow")},onItemClick:function(a){var b=$(a.currentTarget).data("action");if(b===AS.message.TOOLBAR_MORE)this.toggleMoreView();else if(b===AS.message.TOGGLE_FULL_SCREEN)if(AS.util.isIE10()){var c=AS.util.isFullScreen()?"fullscreen-alert-exit":"fullscreen-alert-enter",d=c.toLocaleString();AS.message.trigger(AS.message.ALERT,d)}else AS.message.trigger(AS.message.TOGGLE_FULL_SCREEN);else AS.message.trigger(b,a)},getButton:function(a){return this.$('[data-action="'+a+'"]').find("button")},showTocButtonShadow:function(){this.getButton(AS.message.TOC_TOGGLE).addClass("expanded")},hideTocButtonShadow:function(){this.getButton(AS.message.TOC_TOGGLE).removeClass("expanded")},showAudioButtonShadow:function(){this.getButton(AS.message.TOGGLE_GLOBAL_AUDIO).addClass("expanded")},hideAudioButtonShadow:function(){this.getButton(AS.message.TOGGLE_GLOBAL_AUDIO).removeClass("expanded")},showSharingButtonShadow:function(){this.getButton(AS.message.SHARE).addClass("expanded")},hideSharingButtonShadow:function(){this.getButton(AS.message.SHARE).removeClass("expanded")}})}(),function(){"use strict";AS.TocFrameView=AS.View.extend({template:"tocframe-tmpl",page:void 0,url:void 0,$frame:void 0,height:void 0,width:void 0,debounceLayout:void 0,rendered:!1,isOnScreen:!1,isTouch:Modernizr.touch,initialize:function(a){_.bindAll(this),this.page=a.page,this.url=a.url,this.yPos=a.yPos,this.debounceLayout=_.debounce(this.layout,100),this.responsivePage=this.page.responsive,AS.message.on(AS.message.RESIZE,this.debounceLayout),AS.message.on(AS.message.TOC_DID_SHOW,this.widgetOnScreen),AS.message.on(AS.message.TOC_DID_HIDE,this.widgetOffScreen)},render:function(){return this.rendered||AS.View.prototype.render.call(this),this.$frame=this.$("#tocFrame"),this.$frame.attr("src",this.url).attr("data-webapp","true").attr("data-autoplay","false").attr("data-toc","true").attr("scrolling","no"),this.setDimensions(),this.$frame.one("load",this.iframeLoaded),this.rendered=!0,this},setDimensions:function(){this.width=parseInt(this.page.properties.width,10)||AS.util.getDefaultWidthForPage(AS.Session.getCurrentVariant().get("orientation")),this.height=parseInt(this.page.properties.height,10)||AS.util.getDefaulHeightForPage(AS.Session.getCurrentVariant().get("orientation")),this.responsivePage&&(this.height=50),this.setWidth(this.width),this.setHeight(this.height)},widgetOffScreen:function(){var a=this.window();this.isOnScreen=!1,a.PR&&a.PR.Core&&a.PR.Core.initialized&&a.PR.Core._offScreen()},widgetOnScreen:function(){this.layout(),this.isOnScreen=!0;var a=this.window();a.PR&&a.PR.Core&&a.PR.Core.initialized&&a.PR.Core._onScreen()},layout:function(){var a,b=.95*$(window).width(),c=this.width,d=this.height,e=$(window).height()-this.yPos;this.responsivePage&&(d=this.$frame.get(0).contentDocument.body.scrollHeight,this.setHeight(d)),a=b/c,1>a?this.responsivePage?(a=1,this.setWidth(b)):(d*=a,e/=a):(a=1,this.responsivePage&&this.setWidth(this.width)),this.$el.height(e),this.$el.css(AS.util.CSSTransformString({scale:a,origin:"top left"})),AS.message.trigger(AS.message.TOC_TRANSLATE,{height:d}),AS.message.trigger(AS.message.TOC_ITEM_TOGGLE)},setHeight:function(a){this.$frame.height(a),this.$("#tocFrameContainer").height(a)},setWidth:function(a){this.$frame.width(a),this.$el.width(a)},iframeLoaded:function(){AS.ContentAdaptor.processIframe(this.$frame.get(0),!1,!1),this.setConnectionState(),this.watchForWidgets()},window:function(){return this.$frame.get(0).contentWindow},watchForWidgets:function(){var a=this.window();try{if(a.PR.Core.initialized)return void this.registerEvents()}catch(b){}try{a.radio(a.PR.Event.PR_INITIALIZED).subscribe(this.registerEvents)}catch(b){}},registerEvents:function(){var a=this.window();this.isOnScreen&&this.widgetOnScreen(),a.radio(a.PR.Event.PR_INITIALIZED).unsubscribe(this.registerEvents)},setConnectionState:function(){try{this.window().isOnline(AS.StateModel.get("isConnected"))}catch(a){}},dispose:function(){AS.message.off(AS.message.RESIZE,this.debounceLayout),AS.message.off(AS.message.TOC_DID_SHOW,this.onScreen),AS.message.off(AS.message.TOC_DID_HIDE,this.offScreen),this.remove()}})}(),function(){"use strict";AS.TocBannerView=AS.View.extend({template:"tocbanner-tmpl",rendered:void 0,title:void 0,isTouch:Modernizr.touch,eventsDesktop:{"click .hideToc":"hideTocButtonClick"},eventsTouch:{"tap .hideToc":"hideTocButtonClick"},eventsFakeTouch:{"click .hideToc":"hideTocButtonClick"},events:{},initialize:function(a){this.title=a.title,_.bindAll(this),_.extend(this.events,function(){return Modernizr.touch?this.eventsTouch:AS.config.get("app.mobileOnly")?this.eventsFakeTouch:this.eventsDesktop}.bind(this)()),AS.message.on(AS.message.TOC_ON_SCREEN,this.shrinkText),AS.message.on(AS.message.RESIZE,this.shrinkText)},render:function(){this.rendered||AS.View.prototype.render.call(this);var a=AS.config.get("tocBanner");return this.$el.css({height:a.height+"px"}),this.$("#bannerTitle").html(this.title),this.rendered=!0,this},shrinkText:function(){"function"==typeof $.fn.dotdotdot&&this.$("#bannerTitle").dotdotdot()},hideTocButtonClick:function(){AS.message.trigger(AS.message.TOC_TOGGLE)},dispose:function(){AS.message.off(AS.message.TOC_ON_SCREEN,this.shrinkText),AS.message.off(AS.message.RESIZE,this.shrinkText),this.remove()}})}(),function(){"use strict";AS.TocView=AS.View.extend({template:"toc-tmpl",isClosed:!0,isTouch:Modernizr.touch,iScroller:null,currentTranslateX:0,maxTranslateX:0,sectionViews:[],oldX_:0,vx_:0,dx_:0,startX:0,direction:1,defaultTransitionDuration:500,tolerance:10,tocWidth:"300px",tocFrameView:void 0,$tocView:void 0,events:null,tocPages:void 0,bannerView:void 0,initialize:function(){_.bindAll(this),this.isTouch=Modernizr.touch||AS.config.get("app.mobileOnly"),this.addEvents()},addEvents:function(){AS.message.on(AS.message.TOC_TOGGLE,this.clickHandle),AS.message.on(AS.message.TOC_ITEM_TOGGLE,this.refreshiScroll),AS.message.on(AS.message.PAGE_NAVIGATE,this.onPageNavigate),AS.message.on(AS.message.GOTO_STORE,this.cleanExistingView)},render:function(){if(AS.config.get("features.tableOfContents")===!1)return this;if(this.rendered?this.cleanExistingView():AS.View.prototype.render.call(this),!this.canCreateToc())return AS.message.trigger(AS.message.TOC_NOT_AVAILABLE),this;if(this.$tocView=this.$("#tocView"),this.tocPages.length?(this.createTocFrameView(),this.attachIScroll(this.el),AS.message.on(AS.message.TOC_TRANSLATE,this.translate)):(this.createSections(),this.isTouch&&this.attachIScroll(this.el),AS.message.on(AS.message.RESIZE,this.adjustHeight)),AS.config.get("toc.tocBanner")){var a="table-of-contents".toLocaleString(),b=this.tocPages.length?this.tocPages[0]:void 0;b&&b.article&&""!==b.article.title&&"..."!==b.article.title&&(a=b.article.title),this.bannerView=new AS.TocBannerView({title:a}),this.$tocView.prepend(this.bannerView.render().el)}return this.rendered=!0,this},cleanExistingView:function(){AS.message.off(AS.message.TOC_TRANSLATE,this.translate),AS.message.off(AS.message.RESIZE,this.adjustHeight),this.iScroller&&this.iScroller.destroy(),this.tocFrameView&&(this.tocFrameView.dispose(),this.tocFrameView=void 0),this.bannerView&&(this.bannerView.dispose(),this.bannerView=void 0),this.$tocView&&this.$tocView.empty(),this.el.style.width=""},isDesignedTocAvailable:function(){return this.tocPages=this.getTocPages(),this.tocPages.length?!0:!1},canCreateLegacyToc:function(){var a=this.getSingleSections();return _.size(a)>1||1===_.size(a)&&!this.hasContentSection()||1===_.size(a)&&this.hasContentSection()&&_.size(this.model.get("currentVariant").get("articles"))>1},canCreateToc:function(){return this.isDesignedTocAvailable()||this.canCreateLegacyToc()},hasContentSection:function(){return"undefined"!=typeof this.getSingleSections().contents?!0:!1},attachIScroll:function(a){this.iScroller=new IScroll(a,{scrollbars:!0,interactiveScrollbars:!0,bounce:!0,momentum:!0,mouseWheel:!0}),this.iScroller.on("scrollStart",this.onScrollStart),this.iScroller.on("scrollMove",this.onScrollMove),this.iScroller.on("scrollEnd",this.onScrollEnd)},createTocFrameView:function(){var a=this.tocPages[0],b=this.getTocPageUrl(a),c=AS.util.getToolbarHeight();this.tocFrameView=new AS.TocFrameView({page:a,url:b,yPos:c}),this.$tocView.append(this.tocFrameView.render().el)},getTocPageUrl:function(a){var b=this.model.get("currentVariant").get("issue").urlRoot()+"/";return b+=a.url},getTocPages:function(){return this.model.get("currentVariant").get("tocPages")},translate:function(a){var b="100%";if(a&&!this.isClosed){var c=AS.util.getToolbarHeight(),d=this.getBannerHeight();b=$(window).height()-a.height-c-d,b=b>0?b:0,this.$tocView.height(a.height+d)}this.$el.css(AS.util.CSSTransformString({top:b}))},getBannerHeight:function(){var a=AS.config.get();return a.toc.tocBanner?a.tocBanner.height:0},adjustHeight:function(){var a=this.$(".tocContainer");if(a){var b=a.height();if(!this.isTouch){var c=$(window).height()-this.getBannerHeight()-AS.util.getToolbarHeight();b=c>b?b:c}a.height(b),this.translate({height:b})}},createSections:function(){var a=document.createElement("ul"),b=this.getSingleSections(),c=(AS.config.get(),this);a.className="tocContainer",this.$tocView.append(a),this.el.style.width=this.tocWidth,a.style.top=this.getBannerHeight()+"px",a.style.paddingBottom=AS.util.getToolbarHeight()+"px",_.size(b)>1&&this.hasContentSection()&&delete b.contents,_.each(b,function(a,b){var d=new AS.TocSectionView({section:a,index:b,model:c.model});this.addSection(d)},this)},addSection:function(a){this.sectionViews.push(a),this.$el.find(".tocContainer").append(a.render().el)},onScrollStart:function(){this.$el.addClass("scrolling"),this.iScroller.moved=!0,this.model.set("scrolling",!0),this.scrolling=!0},onScrollMove:function(a){a.preventDefault()},onScrollEnd:function(){this.$el.removeClass("scrolling"),this.model.set("scrolling",!1),this.scrolling=!1},clickHandle:function(){AS.StateModel.setActiveToolbarItem(AS.message.TOC_TOGGLE),this.showTOC(this.isClosed)},getTitle:function(){return this.model.get("title")},getSections:function(){return this.model.get("currentVariant").get("sections")},getSingleSections:function(){return this.model.get("currentVariant").get("singleSections")},getIssueID:function(){return this.model.get("currentVariant").get("issue").get("actualId")},showTOC:function(a){var b=a;if(!(!this.isClosed&&b||this.isClosed&&!b)){if(this.hasRefreshed||(this.hasRefreshed=!0,this.refreshiScroll()),b)return this.isClosed=!1,this.$el.addClass("open"),this.tocFrameView||this.adjustHeight(),this.refreshiScroll(),AS.message.trigger(AS.message.TOC_DID_SHOW),void(this.tocFrameView?AS.message.trigger(AS.message.TRACK_PAGE,{page:this.getIssueID()+"/TOC/"+this.tocPages[0].article.id+"/0",title:"Application Page - Contents"}):AS.message.trigger(AS.message.TRACK_PAGE,{page:this.getIssueID()+"/Common/Common/Contents",title:"Application Page - Contents"}));this.isClosed=!0,this.$el.removeClass("open"),this.translate(),this.iScroller&&this.iScroller.scrollTo(0,0),AS.message.trigger(AS.message.TOC_DID_HIDE)}},hideTOC:function(){this.showTOC(!1)},scrollSelectedIntoView:function(){var a=$("#toc .tocContainer"),b=$("#toc .tocArticle.selected");if(0!==b.length){var c=a.scrollTop(),d=c+a.height(),e=b.offset().top?b.offset().top:0,f=e+b.height();c>e?a.scrollTop(e):f>d&&a.scrollTop(f-a.height())}},refreshiScroll:function(){var a=this.iScroller?this.iScroller:!1;_.delay(function(){a&&a.refresh()},300)},onPageNavigate:function(a){this.isClosed||AS.StateModel.setActiveToolbarItem(AS.message.TOC_TOGGLE),this.hideTOC()},onScreen:function(a){AS.message.trigger(AS.message.TOC_ON_SCREEN)}})}(),function(){"use strict";AS.TocSectionView=AS.View.extend({className:"sectionView tocSection",tagName:"li",initialize:function(a){_.bindAll(this),this.options=a,this.section=this.options.section,this.index=this.options.index,AS.message.on(AS.message.TOC_ON_SCREEN,this.onScreen)},processSection:function(){var a,b,c={},d=AS.View.resolveTemplate("tocitem-tmpl");
return c={name:this.section.name,index:this.index,colour:this.section.colour},a=d(c),b=$("<div />").html(a),b=this.createArticleViews(b),b.first()},createArticleViews:function(a){var b,c,d=this;return _.each(this.section.pages,function(e,f){"advert"!==e.article.type&&(b=new AS.TocArticleView({article:e,index:f,model:d.model}),c!==e.article.id&&(c=e.article.id,a.find(".sectionItems").append(b.render().el)))}),a},render:function(){return this.$el.append(this.processSection()),this}})}(),function(){"use strict";AS.TocArticleView=AS.View.extend({className:"articleView tocArticle",tagName:"li",events:{"click .goToArticle":"gotoArticle","tap .goToArticle":"gotoArticle"},initialize:function(a){_.bindAll(this),this.options=a,this.article=this.options.article,this.index=this.options.index,AS.message.on(AS.message.TOC_ON_SCREEN,this.onScreen),AS.message.on(AS.message.PAGE_NAVIGATE,this.onPageNavigate)},gotoArticle:function(a){if(!this.scrolling&&!this.model.get("scrolling")){var b=$(a.currentTarget).data("target");AS.message.trigger(AS.message.PAGE_NAVIGATE,{page:parseInt(b,0)})}},processArticles:function(){var a,b,c=AS.View.resolveTemplate("tocsubitem-tmpl");return b=this.getArticleData(this.article,this.index),a=c(b)},onScreen:function(){this.shortenTOCText()},shortenTOCText:function(){var a=this.$(".articleTitle"),b=this.$(".articleDescription"),c=AS.config.get("toc.titleLines")||4,d=AS.config.get("toc.descriptionLines")||2;this._restrictTextByLines(a,c),this._restrictTextByLines(b,d)},_restrictTextByLines:function(a,b){var c,d;a.each(function(){c||(d=$(this).html(),c=$(this).html("&nbsp").height(),$(this).html(d)),"function"==typeof $.fn.dotdotdot&&$(this).dotdotdot({height:c*b})})},getArticleData:function(a,b){var c,d,e,f,g=this;return this.articlePageLookup=this.getArticles(),f=new AS.PageModel(a),""===a.article["abstract"]&&this.$el.addClass("no-description"),c=AS.config.get("toc.showHTMLTitle")?a.article.titleHtml:a.article.title,d=a.thumbnail?AS.config.get("toc.showImage"):!1,{name:c,description:a.article["abstract"],id:parseFloat(g.articlePageLookup[a.article.id]),imageShow:d,descriptionShow:AS.config.get("toc.showDescription"),page:e,image:f.thumbnailUrl()}},getArticles:function(){return this.model.get("currentVariant").get("articles")},onPageNavigate:function(a){var b=AS.Session.getCurrentVariant().get("articles")[AS.Session.getCurrentArticleId()];a.page===this.article.index||b===this.article.index?this.$el.addClass("selected"):this.$el.removeClass("selected")},render:function(){return this.$el.empty(),this.$el.append(this.processArticles()),this}})}(),function(){"use strict";AS.SharingView=AS.View.extend({events:{"click .icon.email":"emailshare","click .icon.twitter":"twittershare","click .icon.linkedin":"linkedinshare","click .icon.facebook":"facebookshare"},template:"sharing-tmpl",$parent:void 0,socialUrl:void 0,initialize:function(a,b,c){_.bindAll(this),this.$parent=a,this.addEvents();var d=AS.config.get();d.features.socialSharing&&AS.message.on(AS.message.TOOLBAR_WILL_SHOW,this.updateVisibility),this.render()},addEvents:function(){AS.message.on(AS.message.SHARE,this.showView),AS.message.on(AS.message.RESIZE,this.hideView)},removeEvents:function(){AS.message.off(AS.message.SHARE,this.showView),AS.message.off(AS.message.RESIZE,this.hideView)},getCurrentArticle:function(){return AS.Session.getCurrentIssue().getCurrentArticle()},hideView:function(){"block"===this.el.style.display&&(this.el.style.display="none",AS.message.trigger(AS.message.SHARE_OPTIONS_DID_HIDE))},showView:function(a){if(AS.StateModel.setActiveToolbarItem(AS.message.SHARE),"block"===this.el.style.display)return void this.hideView();var b=this.$parent.offset(),c=this.$(".sharing_icons .icon"),d=this.el.querySelectorAll(".icon").length;this.$el.css({top:b.top-c.height()*d,left:b.left+(this.$parent.width()-c.width())/2,"z-index":"5"}),a&&(this.el.style.display="block",AS.message.trigger(AS.message.SHARE_OPTIONS_DID_SHOW));var e=this.getCurrentArticle();this.comment=e.socialComment||"sharing-string".toLocaleString(),this.comment=encodeURIComponent(this.comment),this.socialUrl=e.socialUrl?encodeURIComponent(e.socialUrl):this.getCurrentArticleUrl()},getHTMLTitle:function(){return encodeURIComponent($("title").text())},getCurrentUrl:function(){return encodeURIComponent(window.location.href)},getCurrentArticleUrl:function(){return encodeURIComponent(location.origin+location.pathname+location.hash.split("/")[0]+"/"+encodeURIComponent(AS.Session.getCurrentIssue().id)+"/"+encodeURIComponent(AS.Session.getCurrentArticleId()))},getShareUrlFB:function(){return this.getCurrentArticle().socialUrl||location.origin+location.pathname+location.hash.split("/")[0]+"/"+AS.Session.getCurrentIssue().id+"/"+AS.Session.getCurrentArticleId()},render:function(){return AS.View.prototype.render.call(this),$("body").append(this.el),this},getTopOffset:function(a){return(window.screen.availHeight-a)/2},getLeftOffset:function(a){return(window.screen.availWidth-a)/2},emailshare:function(){this.logShare("Email"),window.open("mailto:?Subject="+this.getHTMLTitle()+"&Body="+this.comment+"%0D%0A"+this.socialUrl,"_parent")},linkedinshare:function(){this.logShare("LinkedIn"),this.preferenceForWindow="left="+this.getLeftOffset(980)+" ,top="+this.getTopOffset(780)+",width=980,height=780,toolbar=0,resizable=1",window.open("https://www.linkedin.com/shareArticle?mini=true&url="+this.socialUrl+"&title="+this.getHTMLTitle()+"&summary="+this.comment,"_blank",this.preferenceForWindow)},twittershare:function(){this.logShare("Twitter"),this.preferenceForWindow="left="+this.getLeftOffset(600)+" ,top="+this.getTopOffset(500)+",width=600,height=500,toolbar=0,resizable=1",window.open("https://twitter.com/intent/tweet?&text="+this.comment+"&url="+this.socialUrl,"_blank",this.preferenceForWindow)},facebookshare:function(){this.logShare("Facebook");var a=AS.config.get("socialSharing.facebook.AppID"),b=AS.config.get("socialSharing.facebook.caption"),c=AS.config.get("socialSharing.facebook.description")||this.comment;if(b&&"facebook-sharing"===b&&(b=a?this.getShareUrlFB():this.socialUrl),a){var d={};d.method="feed",d.title=decodeURIComponent(this.getHTMLTitle()),d.link=this.getShareUrlFB(),d.picture=this.getCurrentArticle().socialImageUrl||"",d.caption=b,d.description=decodeURIComponent(c),b=b||this.getShareUrlFB();try{this.FBInitialised||(FB.init({appId:a,status:!0,cookie:!0}),this.FBInitialised=!0),FB.ui(d)}catch(e){}}else b=b||this.socialUrl,this.preferenceForWindow="left="+this.getLeftOffset(600)+" ,top="+this.getTopOffset(500)+",width=600,height=500,toolbar=0,resizable=1",window.open("https://www.facebook.com/sharer/sharer.php?u="+this.socialUrl+"&title="+this.getHTMLTitle()+"&picture="+(this.getCurrentArticle().socialImageUrl||"")+"&caption="+b+"&description="+c,"_blank",this.preferenceForWindow)},logShare:function(a){this.hideView();var b=AS.router.publicationModel.get("currentIssue").get("currentVariant").get("issue").get("actualId"),c=AS.router.publicationModel.get("currentIssue").get("currentVariant").get("currentArticleID"),d=b+"/"+c+"/";AS.message.trigger(AS.message.TRACK_EVENT,{eventCategory:AS.Analytics.categories.SHARE,eventAction:a,eventLabel:d})},dispose:function(){this.removeEvents(),this.$el.remove()}})}(),function(){"use strict";AS.SpreadView=AS.View.extend({$parent:void 0,initialize:function(a,b,c){_.bindAll(this),this.$parent=a,this.svg=this.$parent.find("svg"),AS.message.on(AS.message.GOTO_STORE,this.gotoStore),AS.message.on(AS.message.FACING_PAGE_DISPLAY,this.onPageDisplay),this.render()},render:function(){return AS.View.prototype.render.call(this),this},updateIcon:function(){var a;AS.StateModel.isSpreadMode()?(this.svg.find(".singlepagebutton").show(),this.svg.find(".facingpagesbutton").hide(),a="single-view"):(this.svg.find(".facingpagesbutton").show(),this.svg.find(".singlepagebutton").hide(),a="spread-view"),AS.message.trigger(AS.message.SPREAD_VIEW_UPDATED,{mode:a})},onPageDisplay:function(a){!a&&AS.StateModel.isSpreadMode()||"landscape"!==AS.orientation.get()?this.$parent.hide():(this.$parent.show(),this.updateIcon())},dispose:function(){AS.message.off(AS.message.FACING_PAGE_DISPLAY,this.onPageDisplay),AS.message.off(AS.message.GOTO_STORE,this.gotoStore),this.$el.remove()},gotoStore:function(){AS.StateModel.setSpreadMode(!0)}})}(),function(){"use strict";AS.PageFitView=AS.View.extend({initialize:function(a,b,c){_.bindAll(this),this.$parent=a,this.svg=this.$parent.find("svg"),void 0===AS.StateModel.isWidthFitMode()&&this.setDefaultMode(),this.registerEvents(),this.render()},registerEvents:function(){AS.message.on(AS.message.GOTO_STORE,this.gotoStore),AS.message.on(AS.message.PAGE_FIT_MODE_HIDE,this.onPageDisplay)},unregisterEvents:function(){AS.message.off(AS.message.GOTO_STORE,this.gotoStore),AS.message.off(AS.message.PAGE_FIT_MODE_HIDE,this.onPageDisplay)},setDefaultMode:function(){AS.StateModel.setWidthFitMode(AS.ConfigUtil.isWidthFitModeEnabled())},render:function(){return AS.View.prototype.render.call(this),this},updateView:function(){this.updateIcon(),this.hideOtherToolbarItems()},updateIcon:function(){var a,b=AS.StateModel.isSpreadMode()&&AS.util.isCurrentPageIsFacingPage()&&"landscape"===AS.orientation.get();AS.StateModel.isWidthFitMode()?(this.svg.find(".autoFit").show(),this.svg.find(".widthFit").hide(),a="fit-page-to-window",b&&(a="fit-spread-to-window")):(this.svg.find(".widthFit").show(),this.svg.find(".autoFit").hide(),a="fit-page-to-width",b&&(a="fit-spread-to-width")),AS.message.trigger(AS.message.PAGE_FIT_MODE_UPDATED,{mode:a})},hideOtherToolbarItems:function(){AS.StateModel.setActiveToolbarItem(void 0)},onPageDisplay:function(a){a?this.$parent.hide():(this.$parent.show(),this.updateIcon())},dispose:function(){this.unregisterEvents(),this.$el.remove()},gotoStore:function(){this.setDefaultMode()}})}(),function(){"use strict";AS.AudioView=AS.View.extend({percX:0,template:AS.View.resolveTemplate("audio-tmpl"),model:null,options:{margin:"5"},id:"audioplayer",className:"invisible",events:{"click .next.move-button":"clickNext","click .prev.move-button":"clickPrev","click .play-button":"clickPlay","mousedown .scrubber-handle":"scrubberStartMove","click .scrubber":"clickScrubber"},initialize:function(){_.bindAll(this),this.addEvents()},addEvents:function(){AS.message.on(AS.message.TOGGLE_GLOBAL_AUDIO,this.toggleView)},removeEvents:function(){AS.message.off(AS.message.TOGGLE_GLOBAL_AUDIO,this.toggleView)},setModel:function(a){this.model&&this.model.off(),this.model=a,this.model.on("change",this.render,this),this.render()},render:function(){$(this.el).html(this.template(this.model.toJSON()));var a=Math.floor(100*Number(this.model.get("currentDuration")/Number(this.model.get("totalDuration"))));return this.$el.find(".scrubber-ticks.left").css("width",a+"%"),this.$el.find(".scrubber-ticks.right").css("width",100-a+"%"),this.model.get("updateScrubber")?this.$el.find(".scrubber-handle").css("left",a+"%"):this.$el.find(".scrubber-handle").css("left",100*this.percX+"%"),this},showView:function(){this.$el.css({bottom:AS.config.get("toolbar.height")+"px",right:0,"z-index":1e3}),this.$el.removeClass("invisible").addClass("show"),AS.message.trigger(AS.message.GLOBAL_AUDIO_DID_SHOW)},hideView:function(a){this.$el.removeClass("show").addClass("invisible"),AS.message.trigger(AS.message.GLOBAL_AUDIO_DID_HIDE)},toggleView:function(a){AS.StateModel.setActiveToolbarItem(AS.message.TOGGLE_GLOBAL_AUDIO),this.$el.hasClass("invisible")?this.showView(a):this.hideView(a)},setOptions:function(a){for(var b in a)this.options[b]=a[b]},clickNext:function(){AS.message.trigger(AS.message.NEXT_GLOBAL_AUDIO)},clickPrev:function(){AS.message.trigger(AS.message.PREV_GLOBAL_AUDIO)},clickPlay:function(){this.model.togglePlay()},clickScrubber:function(a){var b=!1;if(""!==this.model.get("audioUrl")){this.model.get("playing")&&(b=!0,this.model.togglePlay());var c=$(".scrubber"),d=a.pageX-c.offset().left;this.percX=d/c.width(),this.model.set("updateScrubber",!0),this.model.set("currentDuration",this.model.get("totalDuration")*this.percX),AS.message.trigger(AS.message.UPDATE_GLOBAL_AUDIO),b&&this.model.togglePlay()}},scrubberStartMove:function(a){""!==this.model.get("audioUrl")&&($(window).on("mouseup",this.scrubberEndMove),$(window).on("mousemove",this.scrubberMove),this.$el.on("mouseleave",this.scrubberEndMove),this.model.set("updateScrubber",!1))},scrubberMove:function(a){var b=this.$(".scrubber-handle"),c=this.$(".scrubber").width(),d=a.pageX-b.parent().offset().left;0>d&&(d=0),d>c&&(d=c),this.percX=d/c,b.css("left",d)},scrubberEndMove:function(a){$(window).off("mouseup",this.scrubberEndMove),$(window).off("mousemove",this.scrubberMove),this.$el.off("mouseleave",this.scrubberEndMove),this.model.set("updateScrubber",!0),this.model.set("currentDuration",this.model.get("totalDuration")*this.percX),AS.message.trigger(AS.message.UPDATE_GLOBAL_AUDIO)},dispose:function(){this.removeEvents(),this.remove()}})}(),function(){"use strict";AS.NoCookieModel=Backbone.Model.extend({defaults:{cookieTitle:"cookies-title".toLocaleString(),cookieText:"cookies-text".toLocaleString(),loader:AS.config.get("app.loading")}}),AS.NoCookieView=AS.View.extend({template:"nocookies-tmpl",model:new AS.NoCookieModel,initialize:function(){return _.bindAll(this),this.model.set("loader",AS.config.get("app.loading")),this},render:function(){return AS.View.prototype.render.call(this),this.$("#loading-image").on("load",function(){$(this).parent().css({"margin-top":-this.height/2,"margin-left":-this.width/2})}).attr("src",this.model.get("loader").image),this}})}(),function(){"use strict";AS.OfflineModel=Backbone.Model.extend({defaults:{offlineTitle:"offline-title".toLocaleString(),offlineText:"offline-text".toLocaleString(),loader:AS.config.get("app.loading")}}),AS.OfflineView=AS.SingletonView.extend({template:"offline-tmpl",model:new AS.OfflineModel,initialize:function(){return _.bindAll(this),this.model.set("loader",AS.config.get("app.loading")),this.render(),this},render:function(){return AS.View.prototype.render.call(this),this.$("#loading-image").on("load",function(){$(this).parent().css({"margin-top":-this.height/2,"margin-left":-this.width/2})}).attr("src",this.model.get("loader").image),this},hide:function(){this.$el.removeClass("display"),this.$el.on("transitionend",this.removeFromDom)},removeFromDom:function(){$("#offline-screen").remove(),this.$el.off("transitionend")},show:function(){var a=this;this.$el.off("transitionend"),this.addToDom(),_.defer(function(){a.$el.addClass("display")})},addToDom:function(){0===$("#offline-screen").length&&$("body").append(this.el)}})}(),function(){"use strict";function a(a){window.alert(a)}AS.message.on(AS.message.ALERT,a)}(),function(){"use strict";function a(a){var b=a.id,c=a.get("issue").id;return[c,b].join("/")}function b(a){"object"==typeof a&&(g=a)}function c(a){"object"==typeof a&&(h=a)}function d(a,b){AS.Session.authenticated=!0,b&&(AS.Session.authCredentials={username:b.username,password:b.password},AS.Session.userid="",b.userid&&(AS.Session.userid=b.userid)),g&&g.setUserAccess(!0,a)}function e(){AS.Session.authenticated=!1,AS.Session.userid="",f(),g&&g.setUserAccess(!1)}function f(){h=null}var g,h,i=function(){return{read:function(a){return localStorage.getItem(a)},write:function(a,b){localStorage.setItem(a,b)},clear:function(a){localStorage.removeItem(a)}}};AS.Session={storage:i(),authenticated:!1,authCredentials:{username:"",password:""},userid:"",canTap:!0,getPublication:function(){return g},getPublicationId:function(){return this.getPublication().id},getCurrentIssue:function(){return h},getCurrentIssueId:function(){return h?h.get("actualId"):null},getCurrentArticleId:function(){var a=h?h.getCurrentArticle():null;return a?a.id:void 0},getCurrentVariant:function(){return h?h.get("currentVariant"):void 0},getCurrentPageIndex:function(){var a=this.getCurrentVariant();return a?a.get("currentPageIndex"):void 0},getCurrentPage:function(){var a=this.getCurrentVariant(),b=this.getCurrentPageIndex();return a?a.get("pages").at(b):void 0},getCurrentPageId:function(){var a=this.getCurrentPage();return a?a.id:void 0},getCurrentUserId:function(){return AS.Session.userid},loadStateForCurrentPage:function(){var b=a(this.getCurrentPage());return this.storage.read(b)},saveStateForCurrentPage:function(b){var c=a(this.getCurrentPage());this.storage.write(c,b)},resetStateForCurrentPage:function(){var b=this.getCurrentPage(),c=a(b);this.storage.clear(c),AS.message.trigger(AS.message.REFRESH_PAGE,this.getCurrentPageIndex())}},AS.message.on(AS.message.PUBLICATION_LOADED,b),AS.message.on(AS.message.ISSUE_LOADED,c),AS.message.on(AS.message.AUTHENTICATED,d),AS.message.on(AS.message.UNAUTHENTICATED,e),AS.message.on(AS.message.STORE,f)}(),function(){"use strict";function a(a){return a}function b(a){return"string"==typeof a&&0===a.indexOf("data:")}function c(a){return function(b){a[b.data.command].apply(a,b.data.args)}}var d={png:"image/png",jpg:"image/jpg",gif:"image/gif",jpeg:"image/jpeg",css:"text/css",json:"application/json",ttf:"application/octet-stream",otf:"application/octet-stream",js:"application/javascript",swf:"application/octet-stream",mp4:"video/mp4"},e=function(){function a(a){for(var b in h)if(new RegExp(b).test(a))return h[b]}function b(b,c,d){var e=a(c);try{var f=new XMLHttpRequest;f.open("GET",b,!0),f.responseType=e.responseType,f.onload=function(){if(200===this.status){var a=this.response,f=function(b,c){d(b,c,a)};"function"==typeof e.process?e.process(a,c,f,b):f(null,a)}else d("error")},f.send()}catch(g){d("error")}}function c(a,b,c,d){var e,f=new FileReader;if("undefined"!=typeof Blob)try{e=new Blob([a],{type:b})}catch(h){}if(!e&&"undefined"!=typeof g)try{var i=new g;i.append(a),e=i.getBlob(b)}catch(h){return c(h)}f.onloadend=function(a){c(null,f.result)},f.onerror=c,f.readAsDataURL(e)}function d(a,b,c,d){var e,f;try{e=JSON.parse(a)}catch(g){f=String(g)}setTimeout(c,0,f,e)}function e(a,b,c,d){var e;setTimeout(c,0,e,a)}function f(a,b,c,d){function e(a,b,c,d,e,f){var h=g.split("/"),i=c?c.split("/"):p5.split("/"),j=c?c.split("/"):p5.split("/");_.each(j,function(a){".."===a&&(h.pop(),i.shift())});var k=b+h.join("/")+"/"+i.join("/")+d.replace("'","");return k}function f(a){return a.substring(0,a.lastIndexOf("/"))}var g=f(d);a=a.replace(/(url\()['"]?([^#][\s\S]+?)['"]?(\))/gi,e),c(null,a)}var g="undefined"!=typeof g&&g||"undefined"!=typeof WebKitBlobBuilder&&WebKitBlobBuilder||"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,h={"image|video|octet-stream":{process:c,responseType:"arraybuffer"},javascript:{process:e,responseType:"text"},css:{process:f,responseType:"text"},json:{process:d,responseType:"text"}};return{loadFile:b}}(),f=function(){var f,g=[],h={},i={persistenceEnabled:!1,registerImpl:function(a,b,c){g.push({id:a,priority:c,impl:b}),g.sort(function(a,b){return a.priority<b.priority}),h[a]=b},retrieveImpl:function(a){if(!a)return f;var b=h[a];return"function"==typeof b?b():b},reset:function(){g=[],h={},f=void 0},disableOffline:function(a,b){i.persistenceEnabled=!1,"function"==typeof b&&b()},init:function(a){return f=g.length>0?g.shift().impl():void 0,AS.config.get("app.enableOffline")?f?void("function"==typeof f.init?(i.persistenceEnabled=!0,f.init(function(b){if(b)return i.init(a);try{}catch(c){}a()})):_.defer(a)):void this.disableOffline("No offline support available",a):void this.disableOffline("Offline support disabled",a)},read:function(c,d){var e=a(c);d=d||{},i.persistenceEnabled?f.read(e,function(a){a?(b(a)||(a=JSON.parse(a)),"function"==typeof d.success&&d.success(a,c)):"function"==typeof d.error&&d.error("Not found in local storage: "+c)}):"function"==typeof d.error&&d.error("No persistence layer found")},remove:function(b,c){var d=a(b);f.remove(d,function(){c()})},write:function(c,d,e,g){var h=a(c);b(d)||(d=JSON.stringify(d)),i.persistenceEnabled&&f.write(h,d,e,g)},loadFile:function(a,b){if("function"!=typeof b.error)throw new Error("No Error Callback for load Resource");if("function"!=typeof b.success)throw new Error("No Success Callback for load resource");var c=a.split("?").shift().split(".").pop(),f=d[c],g=this;e.loadFile(a,f,function(c,d,e){return c?g.error(a,b):void(i.persistenceEnabled?g.writeFile(a,d,e,b):b.success(d,e,a))})},writeFile:function(a,b,c,d){if("function"!=typeof d.error)throw new Error("No Error Callback for load Resource");if("function"!=typeof d.success)throw new Error("No Success Callback for load resource");i.write(a,b,c,function(){d.success(b,c,a)})},error:function(a,b){if("function"!=typeof b.error)throw new Error("No Error Callback for load Resource");if("function"!=typeof b.success)throw new Error("No Success Callback for load resource");i.read(a,{success:function(a){b.success(a)},error:function(c){b.error("File: "+a+" not found")}})},createResponder:c};return i};AS.OfflineManager=f,AS.offlineWorker=e,AS.offlineManager=f()}(),function(){"use strict";function a(){_.bindAll(this),this.storeJSON={},this.initilised=!1,this.updateChecked=!1,this.publication=void 0,this.storeJSONKey=void 0,this.publishedDate=void 0,this.callback=void 0,this.init()}a.prototype={init:function(){this.initilised||(this.publication=AS.router.publicationModel.get("name"),this.publishedDate=AS.router.publicationModel.get("published"),this.storeJSONKey=this.publication+"sstore")},fetch:function(a){this.fetchSuccess=a.success,AS.offlineManager.read(this.storeJSONKey,{success:this.validJSON,error:function(a){}})},validJSON:function(a){a?AS.resourceHelper.isOnline?a.publishedDate===this.publishedDate?(this.storeJSON=a,this.initilised=!0,AS.message.trigger(AS.message.OFFLINE_STORE_JSON_READY),"function"==typeof this.fetchSuccess&&this.fetchSuccess(this.storeJSON)):this.freshBuild(this.validJSON):(this.storeJSON=a,this.initilised=!0,AS.message.trigger(AS.message.OFFLINE_STORE_JSON_READY),"function"==typeof this.fetchSuccess&&this.fetchSuccess(this.storeJSON)):this.freshBuild(this.validJSON)},writeJSON:function(a,b){AS.offlineManager.write(this.storeJSONKey,a,{},function(){b(a)})},freshBuild:function(a){function b(b){_.each(b.orientations,function(g,h){AS.offlineManager.loadFile(g,function(g,h,i){b.varients=b.varients+1,c.size=c.size+h.byteLength,b.varients===_.keys(b.orientations).length&&(c.issues.push(b),e+=1,e===d.length&&f.writeJSON(c,a))})})}var c,d,e=0,f=(this.storeJSONKey,this);c={version:AS.config.get("version"),commit:AS.config.get("gitcommit"),publishedDate:this.publishedDate,name:this.publication,created:new Date,issues:[],size:0},d=AS.router.publicationModel.get("issues").models,_.each(d,function(a){var c={title:a.get("title"),orientations:a.get("previews"),id:a.get("actualId"),varients:0,size:0};b(c)})}},AS.LibraryManager=a}(),function(){"use strict";function a(a){_.bindAll(this),this.issueJSON={id:void 0,pages:[],asset:[],size:0,noPages:0,published:0,downloaded:void 0},this.callback=void 0,this.issueID=void 0,this.processed=!1,this.issueModel=void 0,this.noPages=0,this.savedPages=0,this.savedAssets=0,this.postProcessCount=0,this.postProcessMe=[],this.completed=!1,this.totalSize=0,this.pageSize=0,this.pageDetails=[],this.pageQueue=[],this.assetQueue=[],this.fileTypes={HTML:"processHTML",CSS:"processCSS",JS:"processJS",JPG:"processBinary",GIF:"processBinary",PNG:"processBinary",JPEG:"processBinary",TTF:"processBinary",OTF:"processBinary",SWF:"processBinary",MP4:"processBinary"},this.issueID=a.id,this.offline=void 0,this.postProcessHTML=!0,this.postProcessCSS=!0,this.postProcessJS=!0,this.postProcessIMAGES=!0,this.mediaElementRequired=!0,this.init()}a.prototype={init:function(){this.freshStart(),this.offlineKey=AS.router.publicationModel.get("name")+"-"+this.issueID},freshStart:function(){this.savedPages=0,this.noPages=0,this.completed=!1,this.offline=void 0,this.issueJSON={id:this.issueID,pages:[],asset:[],size:0,noPages:0,published:0,downloaded:void 0}},offlineCheck:function(a){var b=this;void 0===this.offline?AS.offlineManager.read(this.offlineKey,{success:function(c){b.offline=!1,c&&(b.issueJSON=c,b.offline=!0),"function"==typeof a&&a(b.offline)},error:function(a){}}):"function"==typeof a&&a(b.offline)},download:function(){var a=AS.router.publicationModel.get("issues").get(this.issueID),b=this;this.issueModel=new AS.IssueModel({publication:AS.router.publicationModel.publicationModel,summary:a}),function c(a){b.issueModel.fetch({success:function(){b.getInfo()},error:function(){AS.util.RETINA?(AS.util.RETINA=!1,c(a)):errorHandler()}})}(this.issueModel)},getInfo:function(){var a,b=this.issueModel.get("variants").models,c=this;this.mediaElementRequired&&(a=AS.config.get("widgets"),a.reader=AS.router.readerURL,this.pageQueue.push(a.reader+a.video.mediaElementCSSFile),this.postProcessMe.push(a.reader+a.video.mediaElementCSSFile),c.noPages+=1),_.each(b,function(a,b){c.noPages+=a.get("pages").models.length,_.each(a.get("pages").models,function(a,b){c.pageQueue.push(a.url()),AS.message.trigger(AS.message.OFFLINE_PAGE_READ_COMPLETE,{id:c.issueID,total:c.pageQueue.length}),c.assetQueue.push(a.thumbnailUrl())})}),this.issueJSON.id=this.issueID,this.issueJSON.noPages=c.pageQueue.length,this.issueJSON.published=this.issueModel.get("publishedDate"),this.issueJSON.downloaded=Date(),this.process()},postProcess:function(a,b){function c(c){function e(a,b,c,d,e,f){return o.push([a,c]),a}function f(a,b,c,d,e,f,g,h){return c?o.push([a,c]):o.push([a,f]),a}function g(a){var b=(a[1],d.fileExt(a[1])),c=d.fileTypes[b];return q[c]?void AS.offlineManager.read(a[1],{success:function(a,b){q[c](a,b)},error:function(){h()}}):void h()}function h(){if(o.length)j=o.shift(),g(j);else{if(!p)return p=!0,d.processCSS&&(c=c.replace(/(url\()['"]([^#][\s\S]+?)['"](\))|(url\()([^#][\s\S]+?)(\))/gi,f)),d.postProcessJS&&(i=c.replace(/(<script[^>]+?src=['"])([^'"]+)(['"].+?>)/gi,e)),d.postProcessIMAGES&&(i=c.replace(/(<img[^>]+?src=['"])([^'^"][\S\s]+?)(['"](?:\s?)+(?:>|\/>))/gi,e),i=c.replace(/(data-indicator-image-(?:on|off)=["'])([^'^"]+)(['"])/gi,e),i=c.replace(/(data-(?:arrow|offline)-image=["'])([^'^"]+)(['"])/gi,e),i=c.replace(/(?=<.*?data-action=['"]ZOOMABLE_IMAGE['"].*?>)(<.*?data-src=['"])([^'^"].*?)(['"].*?>)/gi,e)),void h();AS.offlineManager.write(a,c,{},b)}}var i,j,k='<style type="text/css">',l="</style>",m="<script>",n="</script>",o=[],p=!1,q={processBinary:function(a,b){c=c.replace(b,a),h()},processJS:function(a,b){c=c.split(j[0]).join(m+a+n),h()},processCSS:function(a,b){c=c.replace(j[0],k+a+l),h()}};d.postProcessCSS&&(i=c.replace(/(<link[^>]+?href=['"])([^'"]+)(['"].+>)/gi,e)),h()}var d=this;a&&(this.postProcessCount+=1,this.postProcessHTML?AS.offlineManager.read(a,{success:function(a){c(a)},error:function(){b()}}):b())},pageComplete:function(){this.completed||(this.savedPages+=1,AS.message.trigger(AS.message.OFFLINE_PAGE_DOWNLOAD_COMPLETE,{id:this.issueID,complete:this.savedPages,total:this.noPages}),this.process())},issueComplete:function(a){var b=this,c=b.savedPages-this.postProcessMe.length;return this.postProcessMe.length?(AS.message.trigger(AS.message.OFFLINE_PAGE_PROCESS_COMPLETE,{id:b.issueID,complete:c,total:b.savedPages}),void this.postProcess(this.postProcessMe.shift(),this.issueComplete)):(this.completed=!0,this.offline=!0,this.issueJSON.pages=this.pageDetails,void AS.offlineManager.write(this.offlineKey,this.issueJSON,{},function(){void AS.message.trigger(AS.message.OFFLINE_ISSUE_COMPLETE,{id:b.issueID,total:b.noPages,complete:b.savedPages,json:b.issueJSON})}))},process:function(){var a;return this.assetQueue.length?(a=this.assetQueue.shift(),void("processBinary"===this.fileTypes[this.fileExt(a)]?this.processBinary(a):this.loadAsset(a))):this.processed?this.pageQueue.length?(this.processed=!1,a=this.pageQueue.shift(),void this.loadAsset(a)):void 0:(this.processed=!0,void(this.pageQueue.length?this.pageComplete():this.issueComplete()))},processBinary:function(a){var b=this;AS.offlineManager.loadFile(a,{success:this.process,error:function(){b.process()}})},processCSS:function(a,b){function c(a,b,c,f,g,h){var i=d.split("/"),j=c.split("/"),k=c.split("/");_.each(k,function(a){".."===a&&(i.pop(),j.shift())});var l=b+i.join("/")+"/"+j.join("/")+f.replace("'","");return-1===_.indexOf(e.issueJSON.asset,i.join("/")+"/"+j.join("/"))&&(e.assetQueue.push(i.join("/")+"/"+j.join("/")),e.issueJSON.asset.push(i.join("/")+"/"+j.join("/"))),l}var d=this.getRoot(b),e=this;a=a.replace(/(url\()['"]?([^#][\s\S]+?)['"]?(\))/gi,c),AS.offlineManager.write(b,a,{},this.process)},processJS:function(a,b){this.getRoot(b),AS.offlineManager.write(b,a,{},this.process)},processHTML:function(a,b){function c(a,b,c,e,f,g){return-1!==a.indexOf("://")?a:d(a,b,c,e,f,g)}function d(a,b,c,d,f,h){var i=e.split("/"),j=c.split("/"),k=c.split("/");_.each(k,function(a){".."===a&&(i.pop(),j.shift())});var l=b+i.join("/")+"/"+j.join("/")+d,m=i.join("/")+"/"+j.join("/");return-1===_.indexOf(g.issueJSON.asset,m)&&(g.assetQueue.push(m),g.issueJSON.asset.push(m)),l}var e=this.getRoot(b),f={url:b,assets:[],size:0},g=this;a=a.replace(/(<img[^>]+?src=['"])([^'^"][\S\s]+?)(['"](?:\s?)+(?:>|\/>))/gi,d),a=a.replace(/(<link[^>]+?href=['"])([^'"]+)(['"].+>)/gi,d),a=a.replace(/(<script[^>]+?src=['"])([^'"]+)(['"].+?>)/gi,d),a=a.replace(/(url\()([^#][\s\S]+?)(\))/gi,d),a=a.replace(/(data-indicator-image-(?:on|off)=["'])([^'^"]+)(['"])/gi,d),a=a.replace(/(data-(?:arrow|offline)-image=["'])([^'^"]+)(['"])/gi,d),a=a.replace(/(?=<.*?data-action=['"]ZOOMABLE_IMAGE['"].*?>)(<.*?data-src=['"])([^'^"].*?)(['"].*?>)/gi,d),a=a.replace(/(?=<.*?data-widget=['"](?:VIDEO)['"].*?>)(<.*?data-src=['"])([^'^"].*?)(['"].*?>)/gi,c),this.pageDetails.push(f),this.postProcessMe.push(b),AS.offlineManager.write(b,a,{},this.process)},remove:function(){function a(a){f+=1,AS.message.trigger(AS.message.OFFLINE_PAGE_DELETE_COMPLETE,{id:e.issueID,complete:f,total:d}),f===d&&AS.offlineManager.remove(e.offlineKey,b)}function b(a){e.freshStart(),e.offline=!1,_.defer(function(){AS.message.trigger(AS.message.OFFLINE_ISSUE_DELETE_COMPLETE,{id:e.issueID,total:e.noPages,complete:e.savedPages,json:e.issueJSON})})}var c=this.issueJSON.asset,d=c.length,e=this,f=0;_.each(this.issueJSON.pages,function(a,b){c.push(a.url)}),_.each(c,function(b,c){AS.offlineManager.remove(b,a)})},getRoot:function(a){return a.substring(0,a.lastIndexOf("/"))},fileExt:function(a){var b=a.split("?").shift();return b.split(".").pop().toUpperCase()},loadAsset:function(a){var b=this,c=new XMLHttpRequest;c.onload=function(){if(200===this.status){var c=this.response,d=b.fileExt(a);b[b.fileTypes[d]](c,a)}else b.process()},c.open("get",a,!0),c.send()}},AS.LibraryManager.Issue=a}(),function(){"use strict";var a=window.webkitRequestFileSystemSync||window.requestFileSystemSync,b=AS.offlineManager,c=function(){function a(a,b,c){e[a][b]=c}function c(a,b){var c=e[a][b];return delete e[a][b],c}var d,e={read:{},write:{}},f={readFileComplete:function(a,b){c("read",a)(b)},writeFileComplete:function(a){c("write",a)()}};return{name:"File System",init:function(a){d=new Worker(AS.config.get("app.workerBasePath")+"/offline.filesystem.worker.js"),d.addEventListener("message",b.createResponder(f)),d.addEventListener("error",function(a){throw"Error in FileSystem API: "+a.message}),_.defer(a)},read:function(b,c){a("read",b,c),d.postMessage({command:"read",args:[b]})},write:function(b,c,e,f){a("write",b,f),d.postMessage({command:"write",args:[b,e]})}}};a&&b.registerImpl("fileSystem",c,2)}(),function(){"use strict";var a=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,b=AS.config.get("offline.dbName"),c="undefined"!=typeof a,d=function(){var c,d=b;return{name:"IndexedDB",init:function(b){function e(a){a.createObjectStore(d)}var f=a.open(d);f.onerror=function(a){b(a)},f.onsuccess=function(f){if(c=f.target.result,c.onerror=function(a){throw"Error creating/accessing IndexedDB database"},!c.objectStoreNames.length){c.close();var g=a.open(d,c.version++);return void(g.onsuccess=function(a){e(a.target.result),b()})}b()},f.onupgradeneeded=function(a){e(f.result)}},read:function(a,b){
var e=c.transaction([d],"readonly");e.objectStore(d).get(a).onsuccess=function(a){var c=a.target.result;b(c)}},write:function(a,b,e,f){var g,h=c.transaction([d],"readwrite");g=h.objectStore(d).put(b,a),g.onsuccess=f,g.onerror=function(){f("Unable to write: "+a)}},remove:function(a,b){var e,f=c.transaction([d],"readwrite");e=f.objectStore(d)["delete"](a),e.onsuccess=b,e.onerror=function(){b("Unable to delete: "+a)}}}};c&&AS.offlineManager.registerImpl("indexedDb",d,3)}(),function(){"use strict";var a="undefined"!=typeof window.openDatabase,b=AS.config.get("offline.dbName"),c=/Phantom/.test(navigator.userAgent)?1048576:52428800,d=function(){function a(a){return function(b){a("SQL Error: "+b.message)}}var d;return{name:"WebSQL",init:function(a){try{d=window.openDatabase(b,"",b,c),_.defer(a)}catch(e){_.defer(a,e)}},read:function(b,c){d.transaction(function(a){a.executeSql("CREATE TABLE IF NOT EXISTS resources (id unique, data)"),a.executeSql("SELECT * FROM resources WHERE id = ?",[b],function(a,b){c(b.rows.length>0?b.rows.item(0).data:void 0)})},a(c))},write:function(b,c,e,f){this.read(b,function(e){d.transaction(function(a){a.executeSql("CREATE TABLE IF NOT EXISTS resources (id unique, data)"),e?a.executeSql("UPDATE resources SET data = ? WHERE id = ?",[c,b]):a.executeSql("INSERT INTO resources (id, data) VALUES (?, ?)",[b,c])},a(f),f)})},remove:function(b,c){this.read(b,function(e){d.transaction(function(a){a.executeSql("CREATE TABLE IF NOT EXISTS resources (id unique, data)"),e&&a.executeSql("DELETE FROM resources WHERE id = ?",[b])},a(c),c)})}}};a&&AS.offlineManager.registerImpl("webSql",d,1)}(),function(){"use strict";var a=AS.cookies.detect()?"undefined"!=typeof localStorage:!1,b=function(){return{name:"LocalStorage",init:function(a){_.defer(a)},read:function(a,b){_.defer(b,localStorage.getItem(a))},write:function(a,b,c,d){localStorage.setItem(a,b),_.defer(d)}}};a&&AS.offlineManager.registerImpl("localStorage",b,0)}(),function(){"use strict";var a=AS.offlineManager,b=[],c={URL_TO_POLL:"webreader/online-poller.json",POLLING_INTERVAL:5e3,isOnline:!1,initialised:!1,polled:!1,init:function(b){return this.initialised?void("function"==typeof b&&setTimeout(b)):void a.init(function(){c.initialised=!0,c.poll(),"function"==typeof b&&b()})},poll:function(){function a(){for(c.polled=!0;b.length;){var a=b.shift();c.loadResource(a.url,a.callback)}}$.ajax({url:c.URL_TO_POLL,type:"GET",timeout:c.POLLING_INTERVAL,cache:!1,success:function(){c.isOnline||(c.isOnline=!0,AS.message.trigger(AS.message.ONLINE)),a()},error:function(){c.isOnline&&(c.isOnline=!1,AS.message.trigger(AS.message.OFFLINE)),a()}})},loadResource:function(c,d){if("function"!=typeof d.error)throw new Error("No Error Callback for load Resource");if("function"!=typeof d.success)throw new Error("No Success Callback for load resource");return this.polled?a.persistenceEnabled&&AS.config.get("app.enableOffline")?void(this.isOnline?a.loadFile(c,d):a.read(c,{success:function(a,b){d.success(a,b)},error:function(a){d.error(a)}})):void _.defer(function(){d.error("No Persistence/Offline Mode available")}):void b.push({url:c,callback:d})}};_.bindAll(c);var d=Backbone.ajax;Backbone.ajax=function(a){c.loadResource(a.url,{success:function(b){return a.success(b)},error:function(b){return d.call(this,a)}})},AS.resourceManager=c,AS.message.on(AS.message.APPLICATION_START,function(){c.init()})}(),function(){"use strict";var a=(AS.offlineManager,AS.resourceManager);AS.resourceHelper={attach:function(b,c,d){AS.router.offline?a.loadResource(c,{success:function(a){b.src=a||c,d()},error:function(a){b.src=c,d()}}):(b.src=c,d())}}}(),function(){"use strict";function a(a){AS.message.trigger(AS.message.ISSUE_LOADING_ERROR,0),a&&AS.message.trigger(AS.message.NOTIFICATION_SHOW,a.toLocaleString()),window.location.hash=""}AS.Router=Backbone.Router.extend({appView:void 0,storeView:void 0,issueView:void 0,loaderview:void 0,ie9iframeView:void 0,notificationView:void 0,offlineView:void 0,renderViewForce:!1,readerURL:null,directToStore:!0,connection:!0,routes:{"issue/:issue/:article":"redirectToArticle","issue/:issue(/:variant)(/:page)":"loaderScreen","redirect/:issue/:page":"redirect","*path":"store"},initialize:function(){_.bindAll(this),this.getReaderURL(),AS.message.on(AS.message.PRE_AUTHENTICATED,this.start),AS.message.on(AS.message.PAGE_INITIALISED,this.pageInitialised),AS.message.on(AS.message.GOTO_STORE,this.gotoStore),AS.message.on(AS.message.LOADING_OPEN,this.loadingDone),AS.message.on(AS.message.ORIENTATION_CHANGE,this.orientationChange),AS.message.on(AS.message.OFFLINE,this.offline),AS.message.on(AS.message.ONLINE,this.online),AS.message.on(AS.message.SPREAD_VIEW_TOGGLE,_.debounce(this.spreadViewToggle,200)),AS.config.get("features.variantSwitching")&&AS.message.on(AS.message.RESIZE,_.debounce(this.onResize,500)),AS.AuthProxy.enabled?AS.message.trigger(AS.message.PRE_AUTHENTICATE):(AS.Session.authenticated=!0,this.start())},spreadViewToggle:function(){var a=this.publicationModel.get("currentIssue").get("currentVariant"),b=a.get("orientation");AS.StateModel.setSpreadMode(!AS.StateModel.isSpreadMode()),AS.StateModel.setActiveToolbarItem(void 0),this.variantChangeProcess(b,!0)},onResize:function(){this.appView.currentView!==this.storeView&&this.variantChangeProcess(AS.util.getWindowOrientation(),!0)},start:function(){this.appController=new AS.AppController,this.loaderview=new AS.LoaderView,$("body").append(this.loaderview.el),AS.util.isIE9()&&(this.ie9iframeView=new AS.IE9IframeView,$("body").append(this.ie9iframeView.render().el)),this.notificationView=new AS.NotificationView,$("#loader-screen").before(this.notificationView.el),this.appView=new AS.AppView,$("#loader-screen").before(this.appView.render().el),Modernizr.touch||AS.config.get("app.mobileOnly")||(this.ttip=new AS.TTipView,$("#loader-screen").before(this.ttip.el)),this.publicationModel=new AS.PublicationModel,this.publicationModel.fetch({success:function(a){AS.message.trigger(AS.message.PUBLICATION_LOADED,a),Backbone.history.start()},error:function(){AS.message.trigger(AS.message.NOTIFICATION_SHOW,"notification-load-config-fail".toLocaleString(),{level:AS.NOTIFICATION_LEVEL.ERROR})}})},getReaderURL:function(){var a,b=window.location.pathname;-1!==b.indexOf(".html")&&(a=b.split("/"),a=a.slice(0,a.length-1),b=a.join("/")),b+="/"===b[b.length-1]?"webreader/":"/webreader/",this.readerURL=b},loadIssue:function(b,c){function d(){$("body").removeClass("issue-hide"),AS.message.trigger(AS.message.ISSUE_LOADED,f),c(f)}function e(){h.publicationModel.set("currentIssueId",null),a("issue-no-content-store")}var f,g,h=this;if(this.publicationModel.get("currentIssueId")!==b){if(this.publicationModel.set("currentIssueId",b),g=this.publicationModel.get("issues").get(b),"undefined"==typeof g)return e();!g.get("viewable"),f=new AS.IssueModel({publication:this.publicationModel,summary:g}),function i(a){a.fetch({success:function(){return a.isValid()?void d():e()},error:function(){AS.util.RETINA?(AS.util.RETINA=!1,i(a)):e()}})}(f),this.publicationModel.set("currentIssue",f)}else{if(f=this.publicationModel.get("currentIssue"),!f.isValid())return e();d()}},getSlugForPage:function(a,b,c){var d=this.getSlugObjectForPage(a,b,c);return["issue",d.issueId,d.orientation,d.pageIndex].join("/")},getSlugObjectForPage:function(a,b,c){var d=void 0!==c?this.publicationModel.get("issues").get(c):this.publicationModel.get("currentIssue");return b=b||d.get("currentVariant").get("orientation"),{issueId:d.id,orientation:b,pageIndex:a+1}},store:function(){if(this.directToStore=!1,!AS.config.get("features.storeAccessibility")){var a=AS.Session.getPublication().attributes;if(a.hasOwnProperty("issues")&&a.issues.length>0){var b=a.issues.models[0],c=["issue",b.id,b.attributes.orientation,1].join("/");return void AS.router.navigate(c,{trigger:!0})}}this.storeView||(this.storeView=new AS.StoreView({model:this.publicationModel})),this.publicationModel.get("currentIssue")&&AS.message.trigger(AS.message.ISSUE_UNLOADED),AS.message.trigger(AS.message.STORE),this.appView.initView(this.storeView),document.title="greeting".toLocaleString(),AS.message.trigger(AS.message.TRACK_PAGE,{page:window.location.href,title:"Store"})},loaderScreen:function(a,b,c,d){if(this.directToStore&&window.navigator.standalone)return this.directToStore=!1,void this.gotoStore();b=AS.util.getWindowOrientation();var e=this.publicationModel.get("currentIssue"),f=e?e.get("currentVariant"):void 0;f&&a===e.id&&b===f.get("orientation")?this.loadingDone({issueId:a,variant:b,pageNumber:c,articleId:d}):this.loaderview.loadIssue(a,b,c,d)},loadingDone:function(a){this.issue(a.issueId,a.variant,a.pageNumber,!1,a.articleId)},issue:function(b,c,d,e,f){var g=this;this.issueView||(this.issueView=new AS.IssueView),this.loadIssue(b,function(b){if(!b||!b.get("currentVariant"))return a();var h,i=b.get("currentVariant").get("orientation");c=c||AS.orientation.value(),e=e||i!==c;var j=b.closestVariant(c);j||(c=i,e=!0),b.setCurrentVariant(j),(!d||isNaN(d))&&(d=1,f&&j&&j.get("articles")&&j.get("articles")[f]>-1&&(d=j.get("articles")[f]+1));var k=d-1,l=b.get("currentVariant").get("pages").length;if(k>l){if(g.loaderview.loadingIndex>l)return a("issue-no-content");k=b.get("currentVariant").get("currentPageIndex")}e&&(h=g.getSlugForPage(d-1),history.replaceState?history.replaceState({},null,"#"+h):location.hash=h),b.get("currentVariant").set("currentArticleID",g.getArticleByPage(k)),g.issueView.model=b,f&&(g.loaderview.loadingIndex=d),g.appView.initView(g.issueView,g.renderViewForce||e,function(){_.defer(function(){AS.message.trigger(AS.message.PAGE_NAVIGATE,{page:k})})}),g.renderViewForce=!1})},getArticleByPage:function(a){var b,c=this.publicationModel.get("currentIssue").get("currentVariant").get("pages");return c.forEach(function(c,d){d===a&&(b=c.get("article").id)}),b},redirect:function(b,c){var d=this;b.indexOf(":")>=0&&(b=AS.util.parseIssueId(b)),this.loadIssue(b,function(b){var e,f=b.getPageById(c);f?(e=d.getSlugForPage(f.index(),f.get("variant").get("orientation"),b.id),d.navigate(e,{trigger:!0})):a()})},redirectToArticle:function(a,b){this.loaderScreen(a,AS.orientation.value(),void 0,b)},offline:function(){return this.connection=!1,AS.config.get("app.enableOffline")?void AS.message.trigger(AS.message.NOTIFICATION_SHOW,"notification-offline".toLocaleString()):AS.OfflineView.getInstance().show()},online:function(){AS.OfflineView.getInstance().hide(),this.connection=!0},pageInitialised:function(a){var b=this.publicationModel.get("currentIssue"),c=b.get("currentVariant"),d=c.get("pages").at(a),e=d.get("article"),f=e?e.title:void 0,g=AS.config.get("publication.title")+" - "+(a+1);if(b&&this.appView.currentView===this.issueView){var h=this.getSlugForPage(a);window.location.hash!=="#"+h&&this.navigate(h)}f&&(g+=" - "+f),document.title=g},gotoStore:function(){this.navigate("store",{trigger:!0})},orientationChange:function(a){AS.orientation.set(a),this.appView.currentView===this.storeView?AS.message.trigger(AS.message.RESIZE):this.variantChangeProcess(a)},variantChangeProcess:function(a,b){var c=AS.Session.getCurrentPage().get("responsive");if(!c){var d,e,f,g=this.publicationModel.get("currentIssue"),h=g.get("currentVariant"),i=h.get("currentPageIndex"),j=h.get("pages"),k=g.closestVariant(a),l=k?k.get("pages"):void 0,m=0,n=!1;if(!b||!k||k.cid!==h.cid){if(AS.StateModel.setVarientChanged(!0),k&&l)if(e=j.models[i].get("article").id,d=j.models[i].get("contents")[0].pageRef,f=k.get("height")===h.get("width")&&k.get("width")===h.get("height"),f||AS.config.get("features.rememberPageAfterVariantSwitch"))for(var o=0;o<l.models.length;++o){var p=l.models[o];if(p.get("article").id===e&&p.get("contents")[0].pageRef===d){n=!0;break}++m}else m=k.get("articles")[this.getArticleByPage(i)],n=void 0===m?!1:!0;if(!n){if(f)return this.renderViewForce=!0,void(b||this.loaderview.loadIssue(g.id,h.get("orientation"),i+1));m=0}var q=this.getSlugObjectForPage(m,a);this.renderViewForce=!0,this.loaderview&&(this.loaderview.loadingIssueMessage=!1),b?this.issue(q.issueId,q.orientation,q.pageIndex):this.loaderview.loadIssue(q.issueId,q.orientation,q.pageIndex)}}},noCookies:function(){return this.noCookieView=new AS.NoCookieView,this.appView.initView(this.noCookieView),this.noCookieView},_bindRoutes:function(){return!AS.cookies.detect()&&AS.config.get("app.enableCookies")?(this.appView||(this.appView=new AS.AppView,$("body").append(this.appView.render().el)),void this.noCookies()):void Backbone.Router.prototype._bindRoutes.apply(this,arguments)}})}(),function(){"use strict";AS.config({IssueView:{template:"issueview-tmpl",components:["PageListView","ToolbarView","TocView"]},PageListView:{"class":AS.PageListView},ToolbarView:{"class":AS.ToolbarView},TocView:{"class":AS.TocView}})}(),function(){"use strict";AS.structs={}}(),function(){"use strict";AS.structs.Map=function(a,b){this.map_={},this.keys_=[],this.count_=0,this.version_=0;var c=arguments.length;if(c>1){if(c%2)throw Error("Uneven number of arguments");for(var d=0;c>d;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)},AS.structs.Map.prototype.getCount=function(){return this.count_},AS.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var a=[],b=0;b<this.keys_.length;b++){var c=this.keys_[b];a.push(this.map_[c])}return a},AS.structs.Map.prototype.getKeys=function(){return this.cleanupKeysArray_(),this.keys_.concat()},AS.structs.Map.prototype.containsKey=function(a){return AS.structs.Map.hasKey_(this.map_,a)},AS.structs.Map.prototype.containsValue=function(a){for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];if(AS.structs.Map.hasKey_(this.map_,c)&&this.map_[c]===a)return!0}return!1},AS.structs.Map.prototype.equals=function(a,b){if(this===a)return!0;if(this.count_!==a.getCount())return!1;var c=b||AS.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var d,e=0;d=this.keys_[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0},AS.structs.Map.defaultEquals=function(a,b){return a===b},AS.structs.Map.prototype.isEmpty=function(){return 0===this.count_},AS.structs.Map.prototype.clear=function(){this.map_={},this.keys_.length=0,this.count_=0,this.version_=0},AS.structs.Map.prototype.remove=function(a){return AS.structs.Map.hasKey_(this.map_,a)?(delete this.map_[a],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1},AS.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!==this.keys_.length){for(var a=0,b=0;a<this.keys_.length;){var c=this.keys_[a];AS.structs.Map.hasKey_(this.map_,c)&&(this.keys_[b++]=c),a++}this.keys_.length=b}if(this.count_!==this.keys_.length){var d={};for(a=0,b=0;a<this.keys_.length;)c=this.keys_[a],AS.structs.Map.hasKey_(d,c)||(this.keys_[b++]=c,d[c]=1),a++;this.keys_.length=b}},AS.structs.Map.prototype.get=function(a,b){return AS.structs.Map.hasKey_(this.map_,a)?this.map_[a]:b},AS.structs.Map.prototype.set=function(a,b){AS.structs.Map.hasKey_(this.map_,a)||(this.count_++,this.keys_.push(a),this.version_++),this.map_[a]=b},AS.structs.Map.prototype.forEach=function(a,b){for(var c=this.getKeys(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}},AS.structs.Map.prototype.clone=function(){return new AS.structs.Map(this)},AS.structs.Map.prototype.transpose=function(){for(var a=new AS.structs.Map,b=0;b<this.keys_.length;b++){var c=this.keys_[b],d=this.map_[c];a.set(d,c)}return a},AS.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var a={},b=0;b<this.keys_.length;b++){var c=this.keys_[b];a[c]=this.map_[c]}return a},AS.structs.Map.hasKey_=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)}}(),function(){"use strict";AS.structs.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),AS.structs.uidCounter_=0,AS.structs.Set=function(a){this.map_=new AS.structs.Map,a&&this.addAll(a)},AS.structs.Set.getUid=function(a){return a[AS.structs.UID_PROPERTY_]||(a[AS.structs.UID_PROPERTY_]=++AS.structs.uidCounter_)},AS.structs.Set.getKey_=function(a){var b=typeof a;return"object"===b&&a||"function"===b?"o"+AS.structs.Set.getUid(a):b.substr(0,1)+a},AS.structs.Set.prototype.getCount=function(){return this.map_.getCount()},AS.structs.Set.prototype.add=function(a){this.map_.set(AS.structs.Set.getKey_(a),a)},AS.structs.Set.prototype.addAll=function(a){for(var b=AS.structs.getValues(a),c=b.length,d=0;c>d;d++)this.add(b[d])},AS.structs.Set.prototype.removeAll=function(a){for(var b=AS.structs.getValues(a),c=b.length,d=0;c>d;d++)this.remove(b[d])},AS.structs.Set.prototype.remove=function(a){return this.map_.remove(AS.structs.Set.getKey_(a))},AS.structs.Set.prototype.clear=function(){this.map_.clear()},AS.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()},AS.structs.Set.prototype.contains=function(a){return this.map_.containsKey(AS.structs.Set.getKey_(a))},AS.structs.Set.prototype.containsAll=function(a){return AS.structs.every(a,this.contains,this)},AS.structs.Set.prototype.intersection=function(a){for(var b=new AS.structs.Set,c=AS.structs.getValues(a),d=0;d<c.length;d++){var e=c[d];this.contains(e)&&b.add(e)}return b},AS.structs.Set.prototype.difference=function(a){var b=this.clone();return b.removeAll(a),b},AS.structs.Set.prototype.getValues=function(){return this.map_.getValues()},AS.structs.Set.prototype.clone=function(){return new AS.structs.Set(this)},AS.structs.Set.prototype.equals=function(a){return this.getCount()===AS.structs.getCount(a)&&this.isSubsetOf(a)},AS.structs.Set.prototype.isSubsetOf=function(a){var b=AS.structs.getCount(a);return this.getCount()>b?!1:(!(a instanceof AS.structs.Set)&&b>5&&(a=new AS.structs.Set(a)),AS.structs.every(this,function(b){return AS.structs.contains(a,b)}))},AS.structs.Set.prototype.__iterator__=function(a){return this.map_.__iterator__(!1)}}();